import{j as e}from"./ui-vendor-_s0klCrL.js";import{u as N,b as n}from"./react-vendor-C7VPsBAG.js";import{N as o,S as v,B as b,A as y,C as d,h as w,i as k,k as m,af as C,D as A,a9 as E,a2 as S}from"./index-BLJ_ytcB.js";import{P as L}from"./progress-CS8SLfk3.js";import{T as P}from"./trophy-C_Kv6fHf.js";import"./utils-vendor-DYGWDIxX.js";function H(){const[,x]=N(),[t,h]=n.useState([]),[g,j]=n.useState(!0),i=n.useCallback(async()=>{try{const a=await fetch("/api/achievements/my-progress",{credentials:"include"});if(a.ok){const r=await a.json();h(r)}}catch{}finally{j(!1)}},[]);n.useEffect(()=>{i()},[i]);const p=Array.from(new Set(t.map(a=>a.category)));if(g)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(o,{}),e.jsx("div",{className:"container mx-auto py-20",children:e.jsx("div",{className:"text-center text-white",children:"Loading achievements..."})})]});const l=t.filter(a=>a.earned).length,c=t.length,f=c>0?l/c*100:0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(v,{title:"Achievements - Unlock Rewards & Track Progress",description:"Complete achievements on AmourScans to earn coins and unlock rewards. Track your progress across reading, engagement, and special challenges.",keywords:"achievements, unlock rewards, earn coins, manga achievements, progress tracking, challenges"}),e.jsx(o,{}),e.jsxs("div",{className:"container mx-auto py-16 px-4",children:[e.jsxs(b,{variant:"ghost",onClick:()=>x("/"),className:"min-h-11 w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs(d,{className:"mb-6",children:[e.jsx(w,{children:e.jsxs(k,{className:"flex items-center gap-2",children:[e.jsx(P,{className:"h-6 w-6"}),"Achievements"]})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Progress"}),e.jsxs("span",{className:"font-bold",children:[l," / ",c]})]}),e.jsx(L,{value:f,className:"h-3"})]})})]}),p.map(a=>{const r=t.filter(s=>s.category===a),u=r.filter(s=>s.earned).length;return e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-3 capitalize",children:[a," (",u,"/",r.length,")"]}),e.jsx("div",{className:"grid gap-4 grid-cols-1 sm:grid-cols-2",children:r.map(s=>e.jsx(d,{className:s.earned?"border-green-500":"",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`
                        p-2 rounded-lg
                        ${s.earned?"bg-green-500 text-white":"bg-muted"}
                      `,children:s.earned?e.jsx(C,{className:"h-6 w-6"}):e.jsx(A,{className:"h-6 w-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold mb-1",children:s.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-yellow-500"}),e.jsxs("span",{className:"font-medium",children:[s.rewardValue," coins"]}),s.earned&&s.earnedAt&&e.jsx("span",{className:"ml-auto text-xs text-green-600",children:"âœ“ Earned"})]})]})]})})},s.id))})]},a)})]}),e.jsx(S,{})]})}export{H as default};
