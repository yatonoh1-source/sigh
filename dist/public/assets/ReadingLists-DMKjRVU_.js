import{j as e}from"./ui-vendor-_s0klCrL.js";import{u as J,b as d}from"./react-vendor-C7VPsBAG.js";import{c as H,_ as W,u as X,b as Z,N as ee,B as r,A as se,C as h,h as g,i as v,k as x,j as ie,O as ae,P as te,R as re,T as L,ai as le,a0 as ne,F as ce,r as l,I as k,a5 as E,s as F,v as S,w as T,x as P,y as m,D as y,a2 as de,aj as f,q as N}from"./index-BLJ_ytcB.js";import{D as q,a as M,b as V,c as O,d as R,e as A}from"./dialog-BPAt-TF-.js";import{P as B}from"./plus-k2bBbm5g.js";import{G as u}from"./globe-DHpg7DRg.js";import{S as oe}from"./square-pen-CRfgceVq.js";import{E as he}from"./eye-CaJoh2v9.js";import"./utils-vendor-DYGWDIxX.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=H("BookMarked",[["path",{d:"M10 2v8l3-3 3 3V2",key:"sqw3rj"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=H("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);function we(){const[,j]=J(),{toast:a}=W(),{isAuthenticated:p,isLoading:b}=X(),[I,n]=d.useState(!1),[Y,o]=d.useState(!1),[C,D]=d.useState(null),[i,t]=d.useState({name:"",description:"",visibility:"private"});d.useEffect(()=>{!b&&!p&&j("/login?returnTo=/reading-lists")},[b,p,j]);const{data:c,isLoading:z}=Z({queryKey:["/api/reading-lists"],queryFn:async()=>{const s=await fetch("/api/reading-lists",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch reading lists");return s.json()},enabled:p}),K=async()=>{if(!i.name.trim()){a({title:"Error",description:"Please enter a list name",variant:"error"});return}try{await f("POST","/api/reading-lists",i),N.invalidateQueries({queryKey:["/api/reading-lists"]}),n(!1),t({name:"",description:"",visibility:"private"}),a({title:"List Created",description:"Your reading list has been created successfully."})}catch(s){a({title:"Error",description:s.message||"Failed to create list",variant:"error"})}},Q=async()=>{if(C){if(!i.name.trim()){a({title:"Error",description:"Please enter a list name",variant:"error"});return}try{await f("PATCH",`/api/reading-lists/${C.id}`,i),N.invalidateQueries({queryKey:["/api/reading-lists"]}),o(!1),D(null),a({title:"List Updated",description:"Your reading list has been updated successfully."})}catch(s){a({title:"Error",description:s.message||"Failed to update list",variant:"error"})}}},U=async s=>{if(confirm("Are you sure you want to delete this reading list? This cannot be undone."))try{await f("DELETE",`/api/reading-lists/${s}`),N.invalidateQueries({queryKey:["/api/reading-lists"]}),a({title:"List Deleted",description:"Your reading list has been deleted successfully."})}catch(_){a({title:"Error",description:_.message||"Failed to delete list",variant:"error"})}},G=s=>{D(s),t({name:s.name,description:s.description||"",visibility:s.visibility}),o(!0)},$=s=>s==="public"?e.jsx(u,{className:"w-4 h-4"}):e.jsx(y,{className:"w-4 h-4"});return e.jsxs("div",{className:"min-h-screen bg-background w-full overflow-x-hidden",children:[e.jsx(ee,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(r,{variant:"ghost",onClick:()=>j("/"),className:"w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Reading Lists"}),e.jsx("p",{className:"text-muted-foreground",children:"Create custom collections of your favorite series"})]}),e.jsxs(r,{onClick:()=>n(!0),className:"min-h-11",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Create List"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(h,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Total Lists"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold",children:c?.length||0})})]}),e.jsxs(h,{children:[e.jsxs(g,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(v,{className:"text-sm font-medium",children:"Public Lists"}),e.jsx(u,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(x,{children:e.jsx("div",{className:"text-2xl font-bold",children:c?.filter(s=>s.visibility==="public").length||0})})]})]}),z?e.jsx("div",{children:"Loading your reading lists..."}):c&&c.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(s=>e.jsxs(h,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(v,{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-5 h-5"}),s.name]}),e.jsx(ie,{className:"mt-2",children:s.description||"No description"})]}),e.jsxs(ae,{children:[e.jsx(te,{asChild:!0,children:e.jsx(r,{variant:"ghost",size:"icon",children:e.jsx(xe,{className:"w-4 h-4"})})}),e.jsxs(re,{align:"end",children:[e.jsxs(L,{onClick:()=>G(s),children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsx(le,{}),e.jsxs(L,{onClick:()=>U(s.id),className:"text-destructive",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ce,{variant:s.visibility==="public"?"default":"secondary",children:[$(s.visibility),e.jsx("span",{className:"ml-1",children:s.visibility})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(he,{className:"w-4 h-4"}),s.itemCount||0," items"]})]})})]},s.id))}):e.jsx(h,{children:e.jsxs(x,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(w,{className:"w-16 h-16 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Reading Lists Yet"}),e.jsx("p",{className:"text-muted-foreground text-center mb-4",children:"Create your first reading list to organize your favorite series"}),e.jsxs(r,{onClick:()=>n(!0),className:"min-h-11",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Create Your First List"]})]})}),e.jsx(q,{open:I,onOpenChange:n,children:e.jsxs(M,{className:"w-[95vw] max-w-lg",children:[e.jsxs(V,{children:[e.jsx(O,{children:"Create Reading List"}),e.jsx(R,{children:"Create a custom list to organize your favorite series"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"List Name"}),e.jsx(k,{id:"name",placeholder:"My Favorites",value:i.name,onChange:s=>t({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(E,{id:"description",placeholder:"Describe your reading list...",value:i.description,onChange:s=>t({...i,description:s.target.value}),rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"visibility",children:"Visibility"}),e.jsxs(F,{value:i.visibility,onValueChange:s=>t({...i,visibility:s}),children:[e.jsx(S,{id:"visibility",children:e.jsx(T,{})}),e.jsxs(P,{children:[e.jsx(m,{value:"private",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Private - Only you can see this"]})}),e.jsx(m,{value:"public",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Public - Everyone can see this"]})})]})]})]})]}),e.jsxs(A,{children:[e.jsx(r,{variant:"outline",onClick:()=>n(!1),className:"min-h-11",children:"Cancel"}),e.jsx(r,{onClick:K,className:"min-h-11",children:"Create List"})]})]})}),e.jsx(q,{open:Y,onOpenChange:o,children:e.jsxs(M,{className:"w-[95vw] max-w-lg",children:[e.jsxs(V,{children:[e.jsx(O,{children:"Edit Reading List"}),e.jsx(R,{children:"Update your reading list details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit-name",children:"List Name"}),e.jsx(k,{id:"edit-name",value:i.name,onChange:s=>t({...i,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit-description",children:"Description (Optional)"}),e.jsx(E,{id:"edit-description",value:i.description,onChange:s=>t({...i,description:s.target.value}),rows:3})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"edit-visibility",children:"Visibility"}),e.jsxs(F,{value:i.visibility,onValueChange:s=>t({...i,visibility:s}),children:[e.jsx(S,{id:"edit-visibility",children:e.jsx(T,{})}),e.jsxs(P,{children:[e.jsx(m,{value:"private",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Private - Only you can see this"]})}),e.jsx(m,{value:"public",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Public - Everyone can see this"]})})]})]})]})]}),e.jsxs(A,{children:[e.jsx(r,{variant:"outline",onClick:()=>o(!1),className:"min-h-11",children:"Cancel"}),e.jsx(r,{onClick:Q,className:"min-h-11",children:"Update List"})]})]})})]})]}),e.jsx(de,{})]})}export{we as default};
