import{j as e}from"./ui-vendor-_s0klCrL.js";import{b as f,u as ve,L as be}from"./react-vendor-C7VPsBAG.js";import{c as de,ax as oe,b as he,d as U,t as m,L as F,C as S,h as E,i as O,D as _,j as I,f as B,F as T,at as Ne,au as we,k as P,av as G,r as y,I as M,B as u,u as Ce,al as H,A as se,aa as Se,ab as ke,ac as D,ak as te,g as ae,ad as ie,a3 as Ae,aw as Pe,a0 as re,s as J,v as Q,w as X,x as W,y as p,a5 as Fe,ap as De}from"./index-BLJ_ytcB.js";import{D as le,f as Ee,a as Oe,b as Ie,c as Te,d as Me}from"./dialog-BPAt-TF-.js";import{A as qe,a as Le,b as Ue,c as Be,d as ze,e as Re,f as $e,g as Ve}from"./alert-dialog-CQ2ww59i.js";import{A as Ke}from"./AdIntensityControl-BeITXsYb.js";import{S as He}from"./ShopControl-BYDEny0B.js";import{E as me}from"./eye-off-BZjFRRGX.js";import{E as ue}from"./eye-CaJoh2v9.js";import{P as Je}from"./plus-k2bBbm5g.js";import{G as ne}from"./globe-DHpg7DRg.js";import{D as Qe}from"./database-BaclKRYr.js";import{C as Xe}from"./chart-column-CWfcpHvH.js";import{S as We}from"./square-pen-CRfgceVq.js";import{S as _e}from"./save-0LRYMEmV.js";import"./utils-vendor-DYGWDIxX.js";import"./shield-off-j9I-w8cD.js";import"./wrench-D2GTUzw_.js";import"./shopping-cart-CoPQWzz9.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=de("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=de("Key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);async function Ze(){const l=await fetch("/api/admin/oauth/providers",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}});if(!l.ok)throw new Error("Failed to fetch OAuth providers");return l.json()}async function Ye(l,o){const c=await B(`/api/admin/oauth/providers/${l}`,{method:"PUT",body:JSON.stringify(o)});if(!c.ok){const n=await c.json();throw new Error(n.message||`Failed to update ${l} OAuth provider`)}return c.json()}function es(){const l=oe(),[o,c]=f.useState({google:!1,discord:!1}),[n,b]=f.useState({google:{clientId:"",clientSecret:""},discord:{clientId:"",clientSecret:""}}),{data:k,isLoading:z}=he({queryKey:["oauth-providers"],queryFn:Ze}),x=U({mutationFn:({provider:t,config:r})=>Ye(t,r),onSuccess:(t,r)=>{l.invalidateQueries({queryKey:["oauth-providers"]});const N=r.provider.charAt(0).toUpperCase()+r.provider.slice(1);m({title:"Success",description:`${N} OAuth configuration updated successfully`}),b(h=>({...h,[r.provider]:{clientId:"",clientSecret:""}}))},onError:(t,r)=>{const N=r.provider.charAt(0).toUpperCase()+r.provider.slice(1);m({title:"Error",description:t.message||`Failed to update ${N} OAuth configuration`,variant:"error"})}}),v=(t,r)=>{x.mutate({provider:t,config:{enabled:r}})},A=t=>{const r=n[t];if(!r.clientId&&!r.clientSecret){m({title:"Validation Error",description:"Please provide at least one credential to update",variant:"error"});return}x.mutate({provider:t,config:{clientId:r.clientId||void 0,clientSecret:r.clientSecret||void 0}})},C=(t,r,N)=>{const h=k?.[t];return h?e.jsxs(S,{className:"border-border",children:[e.jsx(E,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:[N==="google"&&e.jsxs("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",children:[e.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),e.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),e.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),e.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),N==="discord"&&e.jsx("svg",{className:"w-6 h-6",viewBox:"0 0 24 24",fill:"#5865F2",children:e.jsx("path",{d:"M20.317 4.492c-1.53-.69-3.17-1.2-4.885-1.49a.075.075 0 0 0-.079.036c-.21.369-.444.85-.608 1.23a18.566 18.566 0 0 0-5.487 0 12.36 12.36 0 0 0-.617-1.23A.077.077 0 0 0 8.562 3c-1.714.29-3.354.8-4.885 1.491a.07.07 0 0 0-.032.027C.533 9.093-.32 13.555.099 17.961a.08.08 0 0 0 .031.055 20.03 20.03 0 0 0 5.993 2.98.078.078 0 0 0 .084-.026c.462-.62.874-1.275 1.226-1.963.021-.04.001-.088-.041-.104a13.201 13.201 0 0 1-1.872-.878.075.075 0 0 1-.008-.125c.126-.093.252-.19.372-.287a.075.075 0 0 1 .078-.01c3.927 1.764 8.18 1.764 12.061 0a.075.075 0 0 1 .079.009c.12.098.245.195.372.288a.075.075 0 0 1-.006.125c-.598.344-1.22.635-1.873.877a.075.075 0 0 0-.041.105c.36.687.772 1.341 1.225 1.962a.077.077 0 0 0 .084.028 19.963 19.963 0 0 0 6.002-2.981.076.076 0 0 0 .032-.054c.5-5.094-.838-9.52-3.549-13.442a.06.06 0 0 0-.031-.028zM8.02 15.278c-1.182 0-2.157-1.069-2.157-2.38 0-1.312.956-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.956 2.38-2.157 2.38zm7.975 0c-1.183 0-2.157-1.069-2.157-2.38 0-1.312.955-2.38 2.157-2.38 1.21 0 2.176 1.077 2.157 2.38 0 1.312-.946 2.38-2.157 2.38z"})})]}),e.jsxs("div",{children:[e.jsxs(O,{className:"text-lg",children:[r," OAuth"]}),e.jsxs(I,{className:"text-sm",children:["Configure ",r," authentication"]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:h.enabled?e.jsxs(T,{variant:"default",className:"bg-green-500",children:[e.jsx(Ne,{className:"w-3 h-3 mr-1"}),"Enabled"]}):e.jsxs(T,{variant:"secondary",children:[e.jsx(we,{className:"w-3 h-3 mr-1"}),"Disabled"]})})]})}),e.jsxs(P,{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between p-3 rounded-lg bg-muted",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{checked:h.enabled,onCheckedChange:g=>v(t,g),disabled:x.isPending}),e.jsxs(y,{className:"text-sm font-medium cursor-pointer",children:["Enable ",r," Login"]})]})}),e.jsxs("div",{className:"space-y-3 p-4 border rounded-lg",children:[e.jsxs("h4",{className:"text-sm font-semibold flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),"OAuth Credentials"]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:`${t}-client-id`,children:"Client ID"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(M,{id:`${t}-client-id`,type:"text",placeholder:h.clientId?"••••••••":"Enter new Client ID",value:n[t].clientId,onChange:g=>b(w=>({...w,[t]:{...w[t],clientId:g.target.value}})),className:"flex-1"})}),h.clientId&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Current: ",h.clientId.substring(0,20),"..."]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:`${t}-client-secret`,children:"Client Secret"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{id:`${t}-client-secret`,type:o[t]?"text":"password",placeholder:h.hasClientSecret?"••••••••":"Enter new Client Secret",value:n[t].clientSecret,onChange:g=>b(w=>({...w,[t]:{...w[t],clientSecret:g.target.value}})),className:"flex-1"}),e.jsx(u,{type:"button",variant:"outline",size:"icon",onClick:()=>c(g=>({...g,[t]:!g[t]})),children:o[t]?e.jsx(me,{className:"h-4 w-4"}):e.jsx(ue,{className:"h-4 w-4"})})]}),h.hasClientSecret&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Secret is configured (hidden for security)"})]}),e.jsx(u,{onClick:()=>A(t),disabled:x.isPending||!n[t].clientId&&!n[t].clientSecret,className:"w-full",children:x.isPending?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4 mr-2"}),"Update Credentials"]})})]}),e.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-lg",children:[e.jsx("p",{className:"font-medium mb-1",children:"Setup Instructions:"}),e.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[e.jsxs("li",{children:["Create OAuth credentials in the"," ",t==="google"?e.jsx("a",{href:"https://console.cloud.google.com/apis/credentials",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Google Cloud Console"}):e.jsx("a",{href:"https://discord.com/developers/applications",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Discord Developer Portal"})]}),e.jsxs("li",{children:["Add your callback URL: ",e.jsxs("code",{className:"text-xs bg-background px-1 rounded",children:["/api/auth/",t,"/callback"]})]}),e.jsx("li",{children:"Enter the Client ID and Client Secret above"}),e.jsx("li",{children:"Enable the provider to allow user authentication"})]})]})]})]},t):null};return z?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(F,{className:"h-8 w-8 animate-spin"})}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(S,{className:"border-blue-200 dark:border-blue-800 bg-blue-50/50 dark:bg-blue-950/20",children:e.jsxs(E,{children:[e.jsxs(O,{className:"text-lg flex items-center gap-2",children:[e.jsx(_,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),"OAuth Authentication Providers"]}),e.jsx(I,{children:"Configure external authentication providers to allow users to sign in with their existing accounts. Only owners can manage these settings."})]})}),C("google","Google","google"),C("discord","Discord","discord")]})}async function ss(){const l=await fetch("/api/admin/settings",{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!l.ok)throw new Error("Failed to fetch settings");return l.json()}async function ts(l,o,c){const n=await B(`/api/admin/settings/${l}/${o}`,{method:"PUT",body:JSON.stringify(c)});if(!n.ok){const b=await n.json().catch(()=>({message:"Failed to save setting"}));throw new Error(b.message||"Failed to save setting")}return n.json()}async function as(l,o){const c=await B(`/api/admin/settings/by-id/${l}`,{method:"PUT",body:JSON.stringify(o)});if(!c.ok){const n=await c.json().catch(()=>({message:"Failed to update setting"}));throw new Error(n.message||"Failed to update setting")}return c.json()}async function is(l){const o=await B(`/api/admin/settings/${l}`,{method:"DELETE"});if(!o.ok){const c=await o.json().catch(()=>({message:"Failed to delete setting"}));throw new Error(c.message||"Failed to delete setting")}}function Cs(){const{isAdmin:l,isAuthenticated:o}=Ce(),[,c]=ve(),n=oe(),[b,k]=f.useState(!1),[z,x]=f.useState(!1),[v,A]=f.useState(null),[C,t]=f.useState(null),[r,N]=f.useState("site"),[h,g]=f.useState(!1),[w,Z]=f.useState(!1),[i,j]=f.useState({category:"site",key:"",value:"",type:"string",description:"",isPublic:!1}),{data:Y,isLoading:xe,error:ee}=he({queryKey:["admin-settings"],queryFn:ss,enabled:l&&o}),R=U({mutationFn:({category:s,key:a,data:d})=>ts(s,a,d),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-settings"]}),m({title:"Success",description:"Setting saved successfully"}),k(!1),q()},onError:s=>{m({title:"Error",description:s.message||"Failed to save setting",variant:"error"})}}),$=U({mutationFn:({id:s,data:a})=>as(s,a),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-settings"]}),m({title:"Success",description:"Setting updated successfully"}),x(!1),A(null),q()},onError:s=>{m({title:"Error",description:s.message||"Failed to update setting",variant:"error"})}}),V=U({mutationFn:is,onSuccess:()=>{n.invalidateQueries({queryKey:["admin-settings"]}),m({title:"Success",description:"Setting deleted successfully"}),t(null)},onError:s=>{m({title:"Error",description:s.message||"Failed to delete setting",variant:"error"})}}),q=()=>{j({category:"site",key:"",value:"",type:"string",description:"",isPublic:!1})},ge=s=>{A(s),j({category:s.category,key:s.key,value:s.value,type:s.type,description:s.description||"",isPublic:s.isPublic}),x(!0)},je=s=>{s.preventDefault();let a=i.value;try{switch(i.type){case"number":if(a=Number(i.value),isNaN(a)){m({title:"Invalid Value",description:"Please enter a valid number",variant:"error"});return}break;case"boolean":a=i.value==="true"||i.value===!0;break;case"json":typeof i.value=="string"&&JSON.parse(i.value);break}}catch{m({title:"Invalid Value",description:"Please enter a valid value for the selected type",variant:"error"});return}const d={...i,value:a};v?$.mutate({id:v.id,data:d}):R.mutate({category:d.category,key:d.key,data:d})},pe=(s,a)=>{switch(a){case"boolean":return s==="true"?"✓ True":"✗ False";case"json":try{return JSON.stringify(JSON.parse(s),null,2)}catch{return s}default:return s.length>50?`${s.substring(0,50)}...`:s}},fe=s=>{switch(s){case"site":return e.jsx(ne,{className:"h-4 w-4"});case"users":return e.jsx(te,{className:"h-4 w-4"});case"content":return e.jsx(ae,{className:"h-4 w-4"});case"system":return e.jsx(ce,{className:"h-4 w-4"});default:return e.jsx(H,{className:"h-4 w-4"})}},ye=async()=>{Z(!0);try{n.clear();const s=["manga-reading-mode","manga-fit-width","manga-dark-mode","manga-reading-direction","manga-autoscroll-speed"],a={};s.forEach(d=>{a[d]=localStorage.getItem(d)}),localStorage.clear(),Object.entries(a).forEach(([d,K])=>{K!==null&&localStorage.setItem(d,K)}),m({title:"Cache Cleared",description:"Application cache has been cleared successfully. The page will reload to apply changes."}),setTimeout(()=>{window.location.reload()},1500)}catch{m({title:"Error",description:"Failed to clear cache. Please try again.",variant:"error"}),Z(!1)}},L=s=>{if(!Y)return[];const a=Y.filter(d=>d.category===s);return h?a.filter(d=>d.isPublic):a};return!o||!l?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-background/95 flex items-center justify-center p-4",children:e.jsxs(S,{className:"max-w-md w-full bg-card/80 backdrop-blur-md border-border/50",children:[e.jsxs(E,{className:"text-center",children:[e.jsx("div",{className:"mx-auto mb-4 w-16 h-16 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(H,{className:"w-8 h-8 text-primary"})}),e.jsx(O,{className:"text-2xl",children:"Admin Access Required"}),e.jsx(I,{className:"mt-2",children:"You need admin privileges to access system settings"})]}),e.jsx(P,{children:e.jsx(u,{onClick:()=>c("/"),className:"w-full",children:"Return to Home"})})]})}):xe?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(F,{className:"h-8 w-8 animate-spin"})})}):ee?e.jsx("div",{className:"container mx-auto p-6",children:e.jsx(S,{children:e.jsx(P,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-red-600",children:["Error loading settings: ",ee.message]})})})}):e.jsxs("div",{className:"container mx-auto p-6",children:[e.jsxs(u,{variant:"ghost",onClick:()=>c("/admin"),className:"w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(be,{href:"/admin",children:e.jsxs(u,{variant:"ghost",size:"sm",children:[e.jsx(se,{className:"h-4 w-4 mr-2"}),"Back to Admin"]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(H,{className:"h-6 w-6 text-blue-600"}),e.jsx("h1",{className:"text-3xl font-bold",children:"System Settings"})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(le,{open:b,onOpenChange:k,children:e.jsx(Ee,{asChild:!0,children:e.jsxs(u,{children:[e.jsx(Je,{className:"h-4 w-4 mr-2"}),"Add Setting"]})})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{id:"show-public",checked:h,onCheckedChange:g}),e.jsx(y,{htmlFor:"show-public",className:"text-sm",children:"Show only public settings"})]})]})}),e.jsxs(Se,{value:r,onValueChange:N,children:[e.jsxs(ke,{className:"grid w-full grid-cols-5",children:[e.jsxs(D,{value:"site",className:"flex items-center gap-2",children:[e.jsx(ne,{className:"h-4 w-4"}),"Site"]}),e.jsxs(D,{value:"users",className:"flex items-center gap-2",children:[e.jsx(te,{className:"h-4 w-4"}),"Users"]}),e.jsxs(D,{value:"content",className:"flex items-center gap-2",children:[e.jsx(ae,{className:"h-4 w-4"}),"Content"]}),e.jsxs(D,{value:"oauth",className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4"}),"OAuth"]}),e.jsxs(D,{value:"system",className:"flex items-center gap-2",children:[e.jsx(ce,{className:"h-4 w-4"}),"System"]})]}),e.jsx(ie,{value:"oauth",className:"space-y-4",children:e.jsx(es,{})}),["site","users","content","system"].map(s=>e.jsxs(ie,{value:s,className:"space-y-4",children:[s==="system"&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{className:"border-blue-200 dark:border-blue-800",children:[e.jsxs(E,{children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qe,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"}),e.jsx(O,{children:"Cache Management"})]})}),e.jsx(I,{children:"Clear application cache to improve performance and resolve issues"})]}),e.jsx(P,{className:"space-y-4",children:e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("div",{className:"rounded-lg bg-blue-50 dark:bg-blue-950/30 p-4 border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ae,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"What gets cleared:"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"• React Query cache (API responses)"}),e.jsx("li",{children:"• Temporary session data"}),e.jsx("li",{children:"• Reading progress (preserved)"}),e.jsx("li",{children:"• User preferences (preserved)"})]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(u,{onClick:ye,disabled:w,variant:"outline",className:"border-blue-600 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-950",children:w?e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}),"Clearing Cache..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Clear Application Cache"]})}),e.jsxs(u,{onClick:()=>{m({title:"Browser Cache",description:"Press Ctrl+Shift+R (Windows/Linux) or Cmd+Shift+R (Mac) to clear browser cache and hard refresh."})},variant:"ghost",className:"text-muted-foreground",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"Browser Cache Instructions"]})]})]})})]}),e.jsx(Ke,{}),e.jsx(He,{})]}),e.jsxs(S,{children:[e.jsxs(E,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[fe(s),e.jsxs(O,{className:"capitalize",children:[s," Settings"]})]}),e.jsxs(T,{variant:"secondary",children:[L(s).length," setting",L(s).length!==1?"s":""]})]}),e.jsxs(I,{children:["Manage ",s," configuration settings"]})]}),e.jsx(P,{children:L(s).length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No ",h?"public ":"",s," settings found"]}):e.jsx("div",{className:"space-y-3",children:L(s).map(a=>e.jsx(S,{className:"border",children:e.jsx(P,{className:"pt-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(T,{variant:"outline",className:"text-xs",children:a.type}),e.jsxs(T,{variant:a.isPublic?"default":"secondary",className:"text-xs",children:[a.isPublic?e.jsx(ue,{className:"h-3 w-3 mr-1"}):e.jsx(me,{className:"h-3 w-3 mr-1"}),a.isPublic?"Public":"Private"]})]}),e.jsx("h4",{className:"font-semibold text-sm mb-1",children:a.key}),a.description&&e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:a.description}),e.jsx("div",{className:"bg-gray-50 p-2 rounded text-sm font-mono",children:pe(a.value,a.type)})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>ge(a),children:e.jsx(We,{className:"h-4 w-4"})}),e.jsx(u,{variant:"ghost",size:"sm",onClick:()=>t(a),children:e.jsx(re,{className:"h-4 w-4 text-red-600"})})]})]})})},a.id))})})]})]},s))]}),e.jsx(le,{open:b||z,onOpenChange:s=>{s||(k(!1),x(!1),A(null),q())},children:e.jsxs(Oe,{className:"sm:max-w-[425px]",children:[e.jsxs(Ie,{children:[e.jsx(Te,{children:v?"Edit Setting":"Add New Setting"}),e.jsx(Me,{children:v?"Update the setting configuration":"Create a new system setting"})]}),e.jsxs("form",{onSubmit:je,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(y,{htmlFor:"category",children:"Category"}),e.jsxs(J,{value:i.category,onValueChange:s=>j({...i,category:s}),disabled:!!v,children:[e.jsx(Q,{children:e.jsx(X,{placeholder:"Select category"})}),e.jsxs(W,{children:[e.jsx(p,{value:"site",children:"Site"}),e.jsx(p,{value:"users",children:"Users"}),e.jsx(p,{value:"content",children:"Content"}),e.jsx(p,{value:"system",children:"System"})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"type",children:"Type"}),e.jsxs(J,{value:i.type,onValueChange:s=>j({...i,type:s}),children:[e.jsx(Q,{children:e.jsx(X,{placeholder:"Select type"})}),e.jsxs(W,{children:[e.jsx(p,{value:"string",children:"String"}),e.jsx(p,{value:"number",children:"Number"}),e.jsx(p,{value:"boolean",children:"Boolean"}),e.jsx(p,{value:"json",children:"JSON"})]})]})]})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"key",children:"Key"}),e.jsx(M,{id:"key",value:i.key,onChange:s=>j({...i,key:s.target.value}),placeholder:"e.g., site_name, max_upload_size",disabled:!!v,required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"value",children:"Value"}),i.type==="json"?e.jsx(Fe,{id:"value",value:i.value,onChange:s=>j({...i,value:s.target.value}),placeholder:'{"key": "value"}',rows:4,required:!0}):i.type==="boolean"?e.jsxs(J,{value:String(i.value),onValueChange:s=>j({...i,value:s}),children:[e.jsx(Q,{children:e.jsx(X,{placeholder:"Select boolean value"})}),e.jsxs(W,{children:[e.jsx(p,{value:"true",children:"True"}),e.jsx(p,{value:"false",children:"False"})]})]}):e.jsx(M,{id:"value",type:i.type==="number"?"number":"text",value:i.value,onChange:s=>j({...i,value:s.target.value}),placeholder:"Enter value",required:!0})]}),e.jsxs("div",{children:[e.jsx(y,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(M,{id:"description",value:i.description,onChange:s=>j({...i,description:s.target.value}),placeholder:"Brief description of this setting"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{id:"isPublic",checked:i.isPublic,onCheckedChange:s=>j({...i,isPublic:s})}),e.jsx(y,{htmlFor:"isPublic",children:"Public setting (visible to non-admins)"})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsxs(u,{type:"button",variant:"outline",onClick:()=>{k(!1),x(!1),A(null),q()},children:[e.jsx(De,{className:"h-4 w-4 mr-2"}),"Cancel"]}),e.jsxs(u,{type:"submit",disabled:R.isPending||$.isPending,children:[R.isPending||$.isPending?e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(_e,{className:"h-4 w-4 mr-2"}),v?"Update":"Create"]})]})]})]})}),e.jsx(qe,{open:!!C,onOpenChange:()=>t(null),children:e.jsxs(Le,{children:[e.jsxs(Ue,{children:[e.jsx(Be,{children:"Delete Setting"}),e.jsxs(ze,{children:['Are you sure you want to delete the setting "',C?.key,'"? This action cannot be undone and may affect system functionality.']})]}),e.jsxs(Re,{children:[e.jsx($e,{children:"Cancel"}),e.jsxs(Ve,{onClick:()=>{C&&V.mutate(C.id)},className:"bg-red-600 hover:bg-red-700",disabled:V.isPending,children:[V.isPending?e.jsx(F,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(re,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})}export{Cs as default};
