const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Settings-CnNr72qf.js","assets/ui-vendor-_s0klCrL.js","assets/react-vendor-C7VPsBAG.js","assets/dialog-BPAt-TF-.js","assets/map-pin-DBn9lb12.js","assets/trophy-C_Kv6fHf.js","assets/monitor-C8b6Kadu.js","assets/utils-vendor-DYGWDIxX.js","assets/Library-7Xq3yWul.js","assets/History-DR37sg_K.js","assets/alert-dialog-CQ2ww59i.js","assets/Privacy-CAnBrdQn.js","assets/database-BaclKRYr.js","assets/eye-CaJoh2v9.js","assets/DMCA-DnWg4QDu.js","assets/file-text-BFdtmCm2.js","assets/Terms-UDxMsN5I.js","assets/Shop-Du37d5w3.js","assets/progress-CS8SLfk3.js","assets/wrench-D2GTUzw_.js","assets/crown-Cq9T_P0l.js","assets/zap-JsjwqhbD.js","assets/shopping-cart-CoPQWzz9.js","assets/ReadingLists-DMKjRVU_.js","assets/plus-k2bBbm5g.js","assets/globe-DHpg7DRg.js","assets/square-pen-CRfgceVq.js","assets/Admin-DdLH9ETd.js","assets/activity-Blw82mLV.js","assets/chart-column-CWfcpHvH.js","assets/dollar-sign-xVsTkna1.js","assets/circle-check-big-B1R9t0pA.js","assets/UserManagement-CqzOgZ0O.js","assets/save-0LRYMEmV.js","assets/SeriesManagement-B4VMiiak.js","assets/square-check-big-CO7qm0JX.js","assets/square-Bkony4Hd.js","assets/eye-off-BZjFRRGX.js","assets/image-BxQwejDH.js","assets/Analytics-Dy6EMFon.js","assets/chart-vendor-BWHaG5wj.js","assets/download-BAdLORKC.js","assets/trending-down-BwsJp3ld.js","assets/SystemSettings-B-KA_k9J.js","assets/AdIntensityControl-BeITXsYb.js","assets/shield-off-j9I-w8cD.js","assets/ShopControl-BYDEny0B.js","assets/CurrencyManagement-CEN0zCqx.js","assets/table-DVHEST2Z.js","assets/package-DcYjros-.js","assets/ChapterAccessManagement-Dw4kHytp.js","assets/UserCurrencyManagement-Ck6W01jT.js","assets/minus-IziBK7bE.js","assets/AdminAds-D4UdA9X9.js","assets/Subscriptions-C3lJxQJf.js","assets/gift-lTXnbkoc.js","assets/SubscriptionManage-9GjkgPOX.js","assets/FlashSales-Chvxtj28.js","assets/percent-Bdg2aQgN.js","assets/BattlePass-DcSsdN1L.js","assets/AdminMonetization-Amkxs3e4.js","assets/DailyRewards-4_64votu.js","assets/Achievements-DxKpdDsA.js","assets/Referrals-Brs9TJ0A.js","assets/Loyalty-C0jqMmOb.js","assets/Wallet-Copdpm3X.js","assets/AdminFlashSales-BnIDjims.js","assets/AdminSubscriptions-D_WuGwnp.js","assets/RoleAuthority-D91Q1bg3.js","assets/SecurityDashboard-rsXoGGpo.js","assets/AdminSEO-BPlxnKQ_.js"])))=>i.map(i=>d[i]);
import{j as e,V as Mn,R as Fn,A as On,C as qn,T as $n,D as zn,P as cc,c as Jt,a as Zt,b as Un,d as dc,e as uc,f as mc,g as hc,u as De,h as fc,i as ke,k as ve,l as pc,S as Bn,m as Nt,n as Os,o as Qn,p as Kn,q as xc,r as Vn,I as Hn,s as Wn,t as Gn,v as Xn,L as Yn,w as Jn,x as gc,y as bc,O as Zn,z as yc,B as ei,E as vc,F as ti,G as si,H as wc,J as jc,K as Zr,M as ea,N as ta,Q as ri,U as sa,W as ai,X as ni,Y as ii,Z as Nc,_ as Sc,$ as oi,a0 as _c,a1 as li,a2 as ci,a3 as kc,a4 as di,a5 as Cc,a6 as ui,a7 as mi,a8 as Ic,a9 as Ac,aa as hi,ab as Pc,ac as Tc}from"./ui-vendor-_s0klCrL.js";import{a as Ec,b as o,u as Ce,s as Rc,L as X,R as Dt,d as Dr,e as yr,f as Dc,h as Lc,F as Mc,C as Fc,i as Js,j as fi,k as pi,S as Oc,l as Y}from"./react-vendor-C7VPsBAG.js";import{c as xi,t as qc,u as gi,s as g,n as bi,b as ra,a as $c,r as zc,d as Zs,e as qs,f as Uc,o as ue,z as yi,g as B,h as oe,i as ps}from"./utils-vendor-DYGWDIxX.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function r(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(n){if(n.ep)return;n.ep=!0;const i=r(n);fetch(n.href,i)}})();var _s={},Wa;function Bc(){if(Wa)return _s;Wa=1;var t=Ec();return _s.createRoot=t.createRoot,_s.hydrateRoot=t.hydrateRoot,_s}var Ga=Bc();const Qc="modulepreload",Kc=function(t){return"/"+t},Xa={},ce=function(s,r,a){let n=Promise.resolve();if(r&&r.length>0){let u=function(h){return Promise.all(h.map(m=>Promise.resolve(m).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=c?.nonce||c?.getAttribute("nonce");n=u(r.map(h=>{if(h=Kc(h),h in Xa)return;Xa[h]=!0;const m=h.endsWith(".css"),f=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const p=document.createElement("link");if(p.rel=m?"stylesheet":Qc,m||(p.as="script"),p.crossOrigin="",p.href=h,d&&p.setAttribute("nonce",d),document.head.appendChild(p),m)return new Promise((x,y)=>{p.addEventListener("load",x),p.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${h}`)))})}))}function i(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return n.then(c=>{for(const d of c||[])d.status==="rejected"&&i(d.reason);return s().catch(i)})};var es=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Vc={setTimeout:(t,s)=>setTimeout(t,s),clearTimeout:t=>clearTimeout(t),setInterval:(t,s)=>setInterval(t,s),clearInterval:t=>clearInterval(t)},Hc=class{#e=Vc;#t=!1;setTimeoutProvider(t){this.#e=t}setTimeout(t,s){return this.#e.setTimeout(t,s)}clearTimeout(t){this.#e.clearTimeout(t)}setInterval(t,s){return this.#e.setInterval(t,s)}clearInterval(t){this.#e.clearInterval(t)}},Rt=new Hc;function Wc(t){setTimeout(t,0)}var Ft=typeof window>"u"||"Deno"in globalThis;function $e(){}function Gc(t,s){return typeof t=="function"?t(s):t}function Lr(t){return typeof t=="number"&&t>=0&&t!==1/0}function vi(t,s){return Math.max(t+(s||0)-Date.now(),0)}function St(t,s){return typeof t=="function"?t(s):t}function tt(t,s){return typeof t=="function"?t(s):t}function Ya(t,s){const{type:r="all",exact:a,fetchStatus:n,predicate:i,queryKey:c,stale:d}=t;if(c){if(a){if(s.queryHash!==aa(c,s.options))return!1}else if(!xs(s.queryKey,c))return!1}if(r!=="all"){const u=s.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof d=="boolean"&&s.isStale()!==d||n&&n!==s.state.fetchStatus||i&&!i(s))}function Ja(t,s){const{exact:r,status:a,predicate:n,mutationKey:i}=t;if(i){if(!s.options.mutationKey)return!1;if(r){if(Ot(s.options.mutationKey)!==Ot(i))return!1}else if(!xs(s.options.mutationKey,i))return!1}return!(a&&s.state.status!==a||n&&!n(s))}function aa(t,s){return(s?.queryKeyHashFn||Ot)(t)}function Ot(t){return JSON.stringify(t,(s,r)=>Mr(r)?Object.keys(r).sort().reduce((a,n)=>(a[n]=r[n],a),{}):r)}function xs(t,s){return t===s?!0:typeof t!=typeof s?!1:t&&s&&typeof t=="object"&&typeof s=="object"?Object.keys(s).every(r=>xs(t[r],s[r])):!1}var Xc=Object.prototype.hasOwnProperty;function wi(t,s){if(t===s)return t;const r=Za(t)&&Za(s);if(!r&&!(Mr(t)&&Mr(s)))return s;const n=(r?t:Object.keys(t)).length,i=r?s:Object.keys(s),c=i.length,d=r?new Array(c):{};let u=0;for(let h=0;h<c;h++){const m=r?h:i[h],f=t[m],p=s[m];if(f===p){d[m]=f,(r?h<n:Xc.call(t,m))&&u++;continue}if(f===null||p===null||typeof f!="object"||typeof p!="object"){d[m]=p;continue}const x=wi(f,p);d[m]=x,x===f&&u++}return n===c&&u===n?t:d}function $s(t,s){if(!s||Object.keys(t).length!==Object.keys(s).length)return!1;for(const r in t)if(t[r]!==s[r])return!1;return!0}function Za(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Mr(t){if(!en(t))return!1;const s=t.constructor;if(s===void 0)return!0;const r=s.prototype;return!(!en(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function en(t){return Object.prototype.toString.call(t)==="[object Object]"}function Yc(t){return new Promise(s=>{Rt.setTimeout(s,t)})}function Fr(t,s,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,s):r.structuralSharing!==!1?wi(t,s):s}function Jc(t,s,r=0){const a=[...t,s];return r&&a.length>r?a.slice(1):a}function Zc(t,s,r=0){const a=[s,...t];return r&&a.length>r?a.slice(0,-1):a}var na=Symbol();function ji(t,s){return!t.queryFn&&s?.initialPromise?()=>s.initialPromise:!t.queryFn||t.queryFn===na?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}function Ni(t,s){return typeof t=="function"?t(...s):!!t}var ed=class extends es{#e;#t;#s;constructor(){super(),this.#s=t=>{if(!Ft&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()})}setFocused(t){this.#e!==t&&(this.#e=t,this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(s=>{s(t)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},ia=new ed;function Or(){let t,s;const r=new Promise((n,i)=>{t=n,s=i});r.status="pending",r.catch(()=>{});function a(n){Object.assign(r,n),delete r.resolve,delete r.reject}return r.resolve=n=>{a({status:"fulfilled",value:n}),t(n)},r.reject=n=>{a({status:"rejected",reason:n}),s(n)},r}var td=Wc;function sd(){let t=[],s=0,r=d=>{d()},a=d=>{d()},n=td;const i=d=>{s?t.push(d):n(()=>{r(d)})},c=()=>{const d=t;t=[],d.length&&n(()=>{a(()=>{d.forEach(u=>{r(u)})})})};return{batch:d=>{let u;s++;try{u=d()}finally{s--,s||c()}return u},batchCalls:d=>(...u)=>{i(()=>{d(...u)})},schedule:i,setNotifyFunction:d=>{r=d},setBatchNotifyFunction:d=>{a=d},setScheduler:d=>{n=d}}}var Ee=sd(),rd=class extends es{#e=!0;#t;#s;constructor(){super(),this.#s=t=>{if(!Ft&&window.addEventListener){const s=()=>t(!0),r=()=>t(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(t){this.#s=t,this.#t?.(),this.#t=t(this.setOnline.bind(this))}setOnline(t){this.#e!==t&&(this.#e=t,this.listeners.forEach(r=>{r(t)}))}isOnline(){return this.#e}},zs=new rd;function ad(t){return Math.min(1e3*2**t,3e4)}function Si(t){return(t??"online")==="online"?zs.isOnline():!0}var qr=class extends Error{constructor(t){super("CancelledError"),this.revert=t?.revert,this.silent=t?.silent}};function _i(t){let s=!1,r=0,a;const n=Or(),i=()=>n.status!=="pending",c=b=>{if(!i()){const w=new qr(b);p(w),t.onCancel?.(w)}},d=()=>{s=!0},u=()=>{s=!1},h=()=>ia.isFocused()&&(t.networkMode==="always"||zs.isOnline())&&t.canRun(),m=()=>Si(t.networkMode)&&t.canRun(),f=b=>{i()||(a?.(),n.resolve(b))},p=b=>{i()||(a?.(),n.reject(b))},x=()=>new Promise(b=>{a=w=>{(i()||h())&&b(w)},t.onPause?.()}).then(()=>{a=void 0,i()||t.onContinue?.()}),y=()=>{if(i())return;let b;const w=r===0?t.initialPromise:void 0;try{b=w??t.fn()}catch(k){b=Promise.reject(k)}Promise.resolve(b).then(f).catch(k=>{if(i())return;const T=t.retry??(Ft?0:3),N=t.retryDelay??ad,M=typeof N=="function"?N(r,k):N,O=T===!0||typeof T=="number"&&r<T||typeof T=="function"&&T(r,k);if(s||!O){p(k);return}r++,t.onFail?.(r,k),Yc(M).then(()=>h()?void 0:x()).then(()=>{s?p(k):y()})})};return{promise:n,status:()=>n.status,cancel:c,continue:()=>(a?.(),n),cancelRetry:d,continueRetry:u,canStart:m,start:()=>(m()?y():x().then(y),n)}}var ki=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Lr(this.gcTime)&&(this.#e=Rt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Ft?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Rt.clearTimeout(this.#e),this.#e=void 0)}},nd=class extends ki{#e;#t;#s;#a;#r;#i;#o;constructor(t){super(),this.#o=!1,this.#i=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.#a=t.client,this.#s=this.#a.getQueryCache(),this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.#e=tn(this.options),this.state=t.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#r?.promise}setOptions(t){if(this.options={...this.#i,...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const s=tn(this.options);s.data!==void 0&&(this.setData(s.data,{updatedAt:s.dataUpdatedAt,manual:!0}),this.#e=s)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#s.remove(this)}setData(t,s){const r=Fr(this.state.data,t,this.options);return this.#n({data:r,type:"success",dataUpdatedAt:s?.updatedAt,manual:s?.manual}),r}setState(t,s){this.#n({type:"setState",state:t,setStateOptions:s})}cancel(t){const s=this.#r?.promise;return this.#r?.cancel(t),s?s.then($e).catch($e):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(t=>tt(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===na||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>St(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!vi(this.state.dataUpdatedAt,t)}onFocus(){this.observers.find(s=>s.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#r?.continue()}onOnline(){this.observers.find(s=>s.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#r?.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.#r&&(this.#o?this.#r.cancel({revert:!0}):this.#r.cancelRetry()),this.scheduleGc()),this.#s.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#n({type:"invalidate"})}async fetch(t,s){if(this.state.fetchStatus!=="idle"&&this.#r?.status()!=="rejected"){if(this.state.data!==void 0&&s?.cancelRefetch)this.cancel({silent:!0});else if(this.#r)return this.#r.continueRetry(),this.#r.promise}if(t&&this.setOptions(t),!this.options.queryFn){const d=this.observers.find(u=>u.options.queryFn);d&&this.setOptions(d.options)}const r=new AbortController,a=d=>{Object.defineProperty(d,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},n=()=>{const d=ji(this.options,s),h=(()=>{const m={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(m),m})();return this.#o=!1,this.options.persister?this.options.persister(d,h,this):d(h)},c=(()=>{const d={fetchOptions:s,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:n};return a(d),d})();this.options.behavior?.onFetch(c,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==c.fetchOptions?.meta)&&this.#n({type:"fetch",meta:c.fetchOptions?.meta}),this.#r=_i({initialPromise:s?.initialPromise,fn:c.fetchFn,onCancel:d=>{d instanceof qr&&d.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(d,u)=>{this.#n({type:"failed",failureCount:d,error:u})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:c.options.retry,retryDelay:c.options.retryDelay,networkMode:c.options.networkMode,canRun:()=>!0});try{const d=await this.#r.start();if(d===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(d),this.#s.config.onSuccess?.(d,this),this.#s.config.onSettled?.(d,this.state.error,this),d}catch(d){if(d instanceof qr){if(d.silent)return this.#r.promise;if(d.revert){if(this.state.data===void 0)throw d;return this.state.data}}throw this.#n({type:"error",error:d}),this.#s.config.onError?.(d,this),this.#s.config.onSettled?.(this.state.data,d,this),d}finally{this.scheduleGc()}}#n(t){const s=r=>{switch(t.type){case"failed":return{...r,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...Ci(r.data,this.options),fetchMeta:t.meta??null};case"success":const a={...r,data:t.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:t.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=t.manual?a:void 0,a;case"error":const n=t.error;return{...r,error:n,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...t.state}}};this.state=s(this.state),Ee.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#s.notify({query:this,type:"updated",action:t})})}};function Ci(t,s){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Si(s.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function tn(t){const s=typeof t.initialData=="function"?t.initialData():t.initialData,r=s!==void 0,a=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:s,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var id=class extends es{constructor(t,s){super(),this.options=s,this.#e=t,this.#n=null,this.#o=Or(),this.bindMethods(),this.setOptions(s)}#e;#t=void 0;#s=void 0;#a=void 0;#r;#i;#o;#n;#p;#m;#h;#c;#d;#l;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),sn(this.#t,this.options)?this.#u():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $r(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $r(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#w(),this.#t.removeObserver(this)}setOptions(t){const s=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof tt(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#j(),this.#t.setOptions(this.options),s._defaulted&&!$s(this.options,s)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&rn(this.#t,r,this.options,s)&&this.#u(),this.updateResult(),a&&(this.#t!==r||tt(this.options.enabled,this.#t)!==tt(s.enabled,this.#t)||St(this.options.staleTime,this.#t)!==St(s.staleTime,this.#t))&&this.#x();const n=this.#g();a&&(this.#t!==r||tt(this.options.enabled,this.#t)!==tt(s.enabled,this.#t)||n!==this.#l)&&this.#b(n)}getOptimisticResult(t){const s=this.#e.getQueryCache().build(this.#e,t),r=this.createResult(s,t);return ld(this,r)&&(this.#a=r,this.#i=this.options,this.#r=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(t,s){return new Proxy(t,{get:(r,a)=>(this.trackProp(a),s?.(a),a==="promise"&&!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(r,a))})}trackProp(t){this.#f.add(t)}getCurrentQuery(){return this.#t}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const s=this.#e.defaultQueryOptions(t),r=this.#e.getQueryCache().build(this.#e,s);return r.fetch().then(()=>this.createResult(r,s))}fetch(t){return this.#u({...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(t){this.#j();let s=this.#t.fetch(this.options,t);return t?.throwOnError||(s=s.catch($e)),s}#x(){this.#v();const t=St(this.options.staleTime,this.#t);if(Ft||this.#a.isStale||!Lr(t))return;const r=vi(this.#a.dataUpdatedAt,t)+1;this.#c=Rt.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#b(t){this.#w(),this.#l=t,!(Ft||tt(this.options.enabled,this.#t)===!1||!Lr(this.#l)||this.#l===0)&&(this.#d=Rt.setInterval(()=>{(this.options.refetchIntervalInBackground||ia.isFocused())&&this.#u()},this.#l))}#y(){this.#x(),this.#b(this.#g())}#v(){this.#c&&(Rt.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(Rt.clearInterval(this.#d),this.#d=void 0)}createResult(t,s){const r=this.#t,a=this.options,n=this.#a,i=this.#r,c=this.#i,u=t!==r?t.state:this.#s,{state:h}=t;let m={...h},f=!1,p;if(s._optimisticResults){const E=this.hasListeners(),_=!E&&sn(t,s),q=E&&rn(t,r,s,a);(_||q)&&(m={...m,...Ci(h.data,t.options)}),s._optimisticResults==="isRestoring"&&(m.fetchStatus="idle")}let{error:x,errorUpdatedAt:y,status:b}=m;p=m.data;let w=!1;if(s.placeholderData!==void 0&&p===void 0&&b==="pending"){let E;n?.isPlaceholderData&&s.placeholderData===c?.placeholderData?(E=n.data,w=!0):E=typeof s.placeholderData=="function"?s.placeholderData(this.#h?.state.data,this.#h):s.placeholderData,E!==void 0&&(b="success",p=Fr(n?.data,E,s),f=!0)}if(s.select&&p!==void 0&&!w)if(n&&p===i?.data&&s.select===this.#p)p=this.#m;else try{this.#p=s.select,p=s.select(p),p=Fr(n?.data,p,s),this.#m=p,this.#n=null}catch(E){this.#n=E}this.#n&&(x=this.#n,p=this.#m,y=Date.now(),b="error");const k=m.fetchStatus==="fetching",T=b==="pending",N=b==="error",M=T&&k,O=p!==void 0,v={status:b,fetchStatus:m.fetchStatus,isPending:T,isSuccess:b==="success",isError:N,isInitialLoading:M,isLoading:M,data:p,dataUpdatedAt:m.dataUpdatedAt,error:x,errorUpdatedAt:y,failureCount:m.fetchFailureCount,failureReason:m.fetchFailureReason,errorUpdateCount:m.errorUpdateCount,isFetched:m.dataUpdateCount>0||m.errorUpdateCount>0,isFetchedAfterMount:m.dataUpdateCount>u.dataUpdateCount||m.errorUpdateCount>u.errorUpdateCount,isFetching:k,isRefetching:k&&!T,isLoadingError:N&&!O,isPaused:m.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:N&&O,isStale:oa(t,s),refetch:this.refetch,promise:this.#o,isEnabled:tt(s.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const E=I=>{v.status==="error"?I.reject(v.error):v.data!==void 0&&I.resolve(v.data)},_=()=>{const I=this.#o=v.promise=Or();E(I)},q=this.#o;switch(q.status){case"pending":t.queryHash===r.queryHash&&E(q);break;case"fulfilled":(v.status==="error"||v.data!==q.value)&&_();break;case"rejected":(v.status!=="error"||v.error!==q.reason)&&_();break}}return v}updateResult(){const t=this.#a,s=this.createResult(this.#t,this.options);if(this.#r=this.#t.state,this.#i=this.options,this.#r.data!==void 0&&(this.#h=this.#t),$s(s,t))return;this.#a=s;const r=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,n=typeof a=="function"?a():a;if(n==="all"||!n&&!this.#f.size)return!0;const i=new Set(n??this.#f);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(c=>{const d=c;return this.#a[d]!==t[d]&&i.has(d)})};this.#N({listeners:r()})}#j(){const t=this.#e.getQueryCache().build(this.#e,this.options);if(t===this.#t)return;const s=this.#t;this.#t=t,this.#s=t.state,this.hasListeners()&&(s?.removeObserver(this),t.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#N(t){Ee.batch(()=>{t.listeners&&this.listeners.forEach(s=>{s(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function od(t,s){return tt(s.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&s.retryOnMount===!1)}function sn(t,s){return od(t,s)||t.state.data!==void 0&&$r(t,s,s.refetchOnMount)}function $r(t,s,r){if(tt(s.enabled,t)!==!1&&St(s.staleTime,t)!=="static"){const a=typeof r=="function"?r(t):r;return a==="always"||a!==!1&&oa(t,s)}return!1}function rn(t,s,r,a){return(t!==s||tt(a.enabled,t)===!1)&&(!r.suspense||t.state.status!=="error")&&oa(t,r)}function oa(t,s){return tt(s.enabled,t)!==!1&&t.isStaleByTime(St(s.staleTime,t))}function ld(t,s){return!$s(t.getCurrentResult(),s)}function an(t){return{onFetch:(s,r)=>{const a=s.options,n=s.fetchOptions?.meta?.fetchMore?.direction,i=s.state.data?.pages||[],c=s.state.data?.pageParams||[];let d={pages:[],pageParams:[]},u=0;const h=async()=>{let m=!1;const f=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(s.signal.aborted?m=!0:s.signal.addEventListener("abort",()=>{m=!0}),s.signal)})},p=ji(s.options,s.fetchOptions),x=async(y,b,w)=>{if(m)return Promise.reject();if(b==null&&y.pages.length)return Promise.resolve(y);const T=(()=>{const G={client:s.client,queryKey:s.queryKey,pageParam:b,direction:w?"backward":"forward",meta:s.options.meta};return f(G),G})(),N=await p(T),{maxPages:M}=s.options,O=w?Zc:Jc;return{pages:O(y.pages,N,M),pageParams:O(y.pageParams,b,M)}};if(n&&i.length){const y=n==="backward",b=y?cd:nn,w={pages:i,pageParams:c},k=b(a,w);d=await x(w,k,y)}else{const y=t??i.length;do{const b=u===0?c[0]??a.initialPageParam:nn(a,d);if(u>0&&b==null)break;d=await x(d,b),u++}while(u<y)}return d};s.options.persister?s.fetchFn=()=>s.options.persister?.(h,{client:s.client,queryKey:s.queryKey,meta:s.options.meta,signal:s.signal},r):s.fetchFn=h}}}function nn(t,{pages:s,pageParams:r}){const a=s.length-1;return s.length>0?t.getNextPageParam(s[a],s,r[a],r):void 0}function cd(t,{pages:s,pageParams:r}){return s.length>0?t.getPreviousPageParam?.(s[0],s,r[0],r):void 0}var dd=class extends ki{#e;#t;#s;#a;constructor(t){super(),this.#e=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#t=[],this.state=t.state||Ii(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#t.includes(t)||(this.#t.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#t=this.#t.filter(s=>s!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#s.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(t){const s=()=>{this.#r({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=_i({fn:()=>this.options.mutationFn?this.options.mutationFn(t,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,c)=>{this.#r({type:"failed",failureCount:i,error:c})},onPause:()=>{this.#r({type:"pause"})},onContinue:s,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});const a=this.state.status==="pending",n=!this.#a.canStart();try{if(a)s();else{this.#r({type:"pending",variables:t,isPaused:n}),await this.#s.config.onMutate?.(t,this,r);const c=await this.options.onMutate?.(t,r);c!==this.state.context&&this.#r({type:"pending",context:c,variables:t,isPaused:n})}const i=await this.#a.start();return await this.#s.config.onSuccess?.(i,t,this.state.context,this,r),await this.options.onSuccess?.(i,t,this.state.context,r),await this.#s.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,t,this.state.context,r),this.#r({type:"success",data:i}),i}catch(i){try{throw await this.#s.config.onError?.(i,t,this.state.context,this,r),await this.options.onError?.(i,t,this.state.context,r),await this.#s.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,i,t,this.state.context,r),i}finally{this.#r({type:"error",error:i})}}finally{this.#s.runNext(this)}}#r(t){const s=r=>{switch(t.type){case"failed":return{...r,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...r,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:t.error,failureCount:r.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=s(this.state),Ee.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function Ii(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ud=class extends es{constructor(t={}){super(),this.config=t,this.#e=new Set,this.#t=new Map,this.#s=0}#e;#t;#s;build(t,s,r){const a=new dd({client:t,mutationCache:this,mutationId:++this.#s,options:t.defaultMutationOptions(s),state:r});return this.add(a),a}add(t){this.#e.add(t);const s=ks(t);if(typeof s=="string"){const r=this.#t.get(s);r?r.push(t):this.#t.set(s,[t])}this.notify({type:"added",mutation:t})}remove(t){if(this.#e.delete(t)){const s=ks(t);if(typeof s=="string"){const r=this.#t.get(s);if(r)if(r.length>1){const a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r[0]===t&&this.#t.delete(s)}}this.notify({type:"removed",mutation:t})}canRun(t){const s=ks(t);if(typeof s=="string"){const a=this.#t.get(s)?.find(n=>n.state.status==="pending");return!a||a===t}else return!0}runNext(t){const s=ks(t);return typeof s=="string"?this.#t.get(s)?.find(a=>a!==t&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ee.batch(()=>{this.#e.forEach(t=>{this.notify({type:"removed",mutation:t})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ja(s,r))}findAll(t={}){return this.getAll().filter(s=>Ja(t,s))}notify(t){Ee.batch(()=>{this.listeners.forEach(s=>{s(t)})})}resumePausedMutations(){const t=this.getAll().filter(s=>s.state.isPaused);return Ee.batch(()=>Promise.all(t.map(s=>s.continue().catch($e))))}};function ks(t){return t.options.scope?.id}var md=class extends es{#e;#t=void 0;#s;#a;constructor(s,r){super(),this.#e=s,this.setOptions(r),this.bindMethods(),this.#r()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(s){const r=this.options;this.options=this.#e.defaultMutationOptions(s),$s(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),r?.mutationKey&&this.options.mutationKey&&Ot(r.mutationKey)!==Ot(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(s){this.#r(),this.#i(s)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#r(),this.#i()}mutate(s,r){return this.#a=r,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(s)}#r(){const s=this.#s?.state??Ii();this.#t={...s,isPending:s.status==="pending",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset}}#i(s){Ee.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};s?.type==="success"?(this.#a.onSuccess?.(s.data,r,a,n),this.#a.onSettled?.(s.data,null,r,a,n)):s?.type==="error"&&(this.#a.onError?.(s.error,r,a,n),this.#a.onSettled?.(void 0,s.error,r,a,n))}this.listeners.forEach(r=>{r(this.#t)})})}},hd=class extends es{constructor(t={}){super(),this.config=t,this.#e=new Map}#e;build(t,s,r){const a=s.queryKey,n=s.queryHash??aa(a,s);let i=this.get(n);return i||(i=new nd({client:t,queryKey:a,queryHash:n,options:t.defaultQueryOptions(s),state:r,defaultOptions:t.getQueryDefaults(a)}),this.add(i)),i}add(t){this.#e.has(t.queryHash)||(this.#e.set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const s=this.#e.get(t.queryHash);s&&(t.destroy(),s===t&&this.#e.delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){Ee.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return this.#e.get(t)}getAll(){return[...this.#e.values()]}find(t){const s={exact:!0,...t};return this.getAll().find(r=>Ya(s,r))}findAll(t={}){const s=this.getAll();return Object.keys(t).length>0?s.filter(r=>Ya(t,r)):s}notify(t){Ee.batch(()=>{this.listeners.forEach(s=>{s(t)})})}onFocus(){Ee.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){Ee.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},fd=class{#e;#t;#s;#a;#r;#i;#o;#n;constructor(t={}){this.#e=t.queryCache||new hd,this.#t=t.mutationCache||new ud,this.#s=t.defaultOptions||{},this.#a=new Map,this.#r=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=ia.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#n=zs.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#n?.(),this.#n=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state.data}ensureQueryData(t){const s=this.defaultQueryOptions(t),r=this.#e.build(this,s),a=r.state.data;return a===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(St(s.staleTime,r))&&this.prefetchQuery(s),Promise.resolve(a))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:s,state:r})=>{const a=r.data;return[s,a]})}setQueryData(t,s,r){const a=this.defaultQueryOptions({queryKey:t}),i=this.#e.get(a.queryHash)?.state.data,c=Gc(s,i);if(c!==void 0)return this.#e.build(this,a).setData(c,{...r,manual:!0})}setQueriesData(t,s,r){return Ee.batch(()=>this.#e.findAll(t).map(({queryKey:a})=>[a,this.setQueryData(a,s,r)]))}getQueryState(t){const s=this.defaultQueryOptions({queryKey:t});return this.#e.get(s.queryHash)?.state}removeQueries(t){const s=this.#e;Ee.batch(()=>{s.findAll(t).forEach(r=>{s.remove(r)})})}resetQueries(t,s){const r=this.#e;return Ee.batch(()=>(r.findAll(t).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...t},s)))}cancelQueries(t,s={}){const r={revert:!0,...s},a=Ee.batch(()=>this.#e.findAll(t).map(n=>n.cancel(r)));return Promise.all(a).then($e).catch($e)}invalidateQueries(t,s={}){return Ee.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},s)))}refetchQueries(t,s={}){const r={...s,cancelRefetch:s.cancelRefetch??!0},a=Ee.batch(()=>this.#e.findAll(t).filter(n=>!n.isDisabled()&&!n.isStatic()).map(n=>{let i=n.fetch(void 0,r);return r.throwOnError||(i=i.catch($e)),n.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then($e)}fetchQuery(t){const s=this.defaultQueryOptions(t);s.retry===void 0&&(s.retry=!1);const r=this.#e.build(this,s);return r.isStaleByTime(St(s.staleTime,r))?r.fetch(s):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then($e).catch($e)}fetchInfiniteQuery(t){return t.behavior=an(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then($e).catch($e)}ensureInfiniteQueryData(t){return t.behavior=an(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return zs.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#s}setDefaultOptions(t){this.#s=t}setQueryDefaults(t,s){this.#a.set(Ot(t),{queryKey:t,defaultOptions:s})}getQueryDefaults(t){const s=[...this.#a.values()],r={};return s.forEach(a=>{xs(t,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(t,s){this.#r.set(Ot(t),{mutationKey:t,defaultOptions:s})}getMutationDefaults(t){const s=[...this.#r.values()],r={};return s.forEach(a=>{xs(t,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const s={...this.#s.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return s.queryHash||(s.queryHash=aa(s.queryKey,s)),s.refetchOnReconnect===void 0&&(s.refetchOnReconnect=s.networkMode!=="always"),s.throwOnError===void 0&&(s.throwOnError=!!s.suspense),!s.networkMode&&s.persister&&(s.networkMode="offlineFirst"),s.queryFn===na&&(s.enabled=!1),s}defaultMutationOptions(t){return t?._defaulted?t:{...this.#s.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Ai=o.createContext(void 0),Ut=t=>{const s=o.useContext(Ai);if(!s)throw new Error("No QueryClient set, use QueryClientProvider to set one");return s},pd=({client:t,children:s})=>(o.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Ai.Provider,{value:t,children:s})),Pi=o.createContext(!1),xd=()=>o.useContext(Pi);Pi.Provider;function gd(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var bd=o.createContext(gd()),yd=()=>o.useContext(bd),vd=(t,s)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(s.isReset()||(t.retryOnMount=!1))},wd=t=>{o.useEffect(()=>{t.clearReset()},[t])},jd=({result:t,errorResetBoundary:s,throwOnError:r,query:a,suspense:n})=>t.isError&&!s.isReset()&&!t.isFetching&&a&&(n&&t.data===void 0||Ni(r,[t.error,a])),Nd=t=>{if(t.suspense){const r=n=>n==="static"?n:Math.max(n??1e3,1e3),a=t.staleTime;t.staleTime=typeof a=="function"?(...n)=>r(a(...n)):r(a),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3))}},Sd=(t,s)=>t.isLoading&&t.isFetching&&!s,_d=(t,s)=>t?.suspense&&s.isPending,on=(t,s,r)=>s.fetchOptimistic(t).catch(()=>{r.clearReset()});function kd(t,s,r){const a=xd(),n=yd(),i=Ut(),c=i.defaultQueryOptions(t);i.getDefaultOptions().queries?._experimental_beforeQuery?.(c),c._optimisticResults=a?"isRestoring":"optimistic",Nd(c),vd(c,n),wd(n);const d=!i.getQueryCache().get(c.queryHash),[u]=o.useState(()=>new s(i,c)),h=u.getOptimisticResult(c),m=!a&&t.subscribed!==!1;if(o.useSyncExternalStore(o.useCallback(f=>{const p=m?u.subscribe(Ee.batchCalls(f)):$e;return u.updateResult(),p},[u,m]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),o.useEffect(()=>{u.setOptions(c)},[c,u]),_d(c,h))throw on(c,u,n);if(jd({result:h,errorResetBoundary:n,throwOnError:c.throwOnError,query:i.getQueryCache().get(c.queryHash),suspense:c.suspense}))throw h.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(c,h),c.experimental_prefetchInRender&&!Ft&&Sd(h,a)&&(d?on(c,u,n):i.getQueryCache().get(c.queryHash)?.promise)?.catch($e).finally(()=>{u.updateResult()}),c.notifyOnChangeProps?h:u.trackResult(h)}function be(t,s){return kd(t,id)}function Ie(t,s){const r=Ut(),[a]=o.useState(()=>new md(r,t));o.useEffect(()=>{a.setOptions(t)},[a,t]);const n=o.useSyncExternalStore(o.useCallback(c=>a.subscribe(Ee.batchCalls(c)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=o.useCallback((c,d)=>{a.mutate(c,d).catch($e)},[a]);if(n.error&&Ni(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:i,mutateAsync:n.mutate}}async function Ti(t){if(!t.ok){const s=await t.text()||t.statusText;let r=s,a=null;try{const i=JSON.parse(s);r=i.message||s,a=i.details||null}catch{r=s}const n=new Error(r);throw n.status=t.status,n.statusText=t.statusText,n.details=a,t.status===404?n.message=r||"The requested resource was not found":t.status===403?n.message=r||"You do not have permission to access this resource":t.status===500?n.message=r||"An internal server error occurred. Please try again later":t.status===503?n.message="Service temporarily unavailable. Please try again in a moment":t.status>=500&&(n.message=r||"A server error occurred. Please try again later"),n}}let Cs=null;async function Cd(){if(Cs)return Cs;try{const t=await fetch("/api/csrf-token",{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch CSRF token");return Cs=(await t.json()).csrfToken,Cs||""}catch(t){throw t}}async function Fe(t,s,r){const a={};if(r&&(a["Content-Type"]="application/json"),t!=="GET"&&t!=="HEAD"){const i=await Cd();a["x-csrf-token"]=i}const n=await fetch(s,{method:t,headers:a,body:r?JSON.stringify(r):void 0,credentials:"include"});return await Ti(n),n}const ys=({on401:t})=>async({queryKey:s})=>{const r=await fetch(s.join("/"),{credentials:"include"});return t==="returnNull"&&r.status===401?null:(await Ti(r),await r.json())};function ln(t,s){if(s&&typeof s=="object"&&"status"in s){const r=s.status||0;if(r>=400&&r<500&&r!==408&&r!==429)return!1}return t<3}const U=new fd({defaultOptions:{queries:{queryFn:ys({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:300*1e3,gcTime:600*1e3,retry:ln,retryDelay:t=>Math.min(1e3*2**t,3e4)},mutations:{retry:ln,retryDelay:t=>Math.min(1e3*2**t,3e4)}}}),Id=3,Ad=5e3;let vr=0;function Pd(){return vr=(vr+1)%Number.MAX_SAFE_INTEGER,vr.toString()}const wr=new Map,cn=t=>{if(wr.has(t))return;const s=setTimeout(()=>{wr.delete(t),us({type:"REMOVE_TOAST",toastId:t})},Ad);wr.set(t,s)},Td=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,Id)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===s.toast.id?{...r,...s.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=s;return r?cn(r):t.toasts.forEach(a=>{cn(a.id)}),{...t,toasts:t.toasts.map(a=>a.id===r||r===void 0?{...a,open:!1}:a)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==s.toastId)}}},Ps=[];let Ts={toasts:[]};function us(t){Ts=Td(Ts,t),Ps.forEach(s=>{s(Ts)})}function Ed({...t}){const s=Pd(),r=n=>us({type:"UPDATE_TOAST",toast:{...n,id:s}}),a=()=>us({type:"DISMISS_TOAST",toastId:s});return us({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:n=>{n||a()}}}),{id:s,dismiss:a,update:r}}function Oe(){const[t,s]=o.useState(Ts);return o.useEffect(()=>(Ps.push(s),()=>{const r=Ps.indexOf(s);r>-1&&Ps.splice(r,1)}),[t]),{...t,toast:Ed,dismiss:r=>us({type:"DISMISS_TOAST",toastId:r})}}const dn=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,un=xi,ts=(t,s)=>r=>{var a;if(s?.variants==null)return un(t,r?.class,r?.className);const{variants:n,defaultVariants:i}=s,c=Object.keys(n).map(h=>{const m=r?.[h],f=i?.[h];if(m===null)return null;const p=dn(m)||dn(f);return n[h][p]}),d=r&&Object.entries(r).reduce((h,m)=>{let[f,p]=m;return p===void 0||(h[f]=p),h},{}),u=s==null||(a=s.compoundVariants)===null||a===void 0?void 0:a.reduce((h,m)=>{let{class:f,className:p,...x}=m;return Object.entries(x).every(y=>{let[b,w]=y;return Array.isArray(w)?w.includes({...i,...d}[b]):{...i,...d}[b]===w})?[...h,f,p]:h},[]);return un(t,c,u,r?.class,r?.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rd=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ei=(...t)=>t.filter((s,r,a)=>!!s&&a.indexOf(s)===r).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Dd={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ld=o.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:n="",children:i,iconNode:c,...d},u)=>o.createElement("svg",{ref:u,...Dd,width:s,height:s,stroke:t,strokeWidth:a?Number(r)*24/Number(s):r,className:Ei("lucide",n),...d},[...c.map(([h,m])=>o.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=(t,s)=>{const r=o.forwardRef(({className:a,...n},i)=>o.createElement(Ld,{ref:i,iconNode:s,className:Ei(`lucide-${Rd(t)}`,a),...n}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=z("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=z("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jr=z("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fd=z("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Od=z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=z("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qd=z("BookX",[["path",{d:"m14.5 7-5 5",key:"dy991v"}],["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"m9.5 7 5 5",key:"s45iea"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=z("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $d=z("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zd=z("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=z("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=z("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=z("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const is=z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tt=z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=z("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=z("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=z("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=z("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=z("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=z("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=z("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=z("Compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kd=z("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=z("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=z("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=z("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nr=z("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=z("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hn=z("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=z("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=z("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=z("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=z("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fn=z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=z("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=z("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ls=z("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xn=z("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gd=z("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xd=z("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=z("Pin",[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ur=z("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jd=z("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zd=z("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=z("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eu=z("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=z("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tu=z("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=z("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=z("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const su=z("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ru=z("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=z("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=z("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gn=z("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nu=z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ge=z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bn=z("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=z("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function C(...t){return qc(xi(t))}const iu=cc,Fi=o.forwardRef(({className:t,...s},r)=>e.jsx(Mn,{ref:r,className:C("fixed top-4 left-1/2 -translate-x-1/2 z-[100] flex max-h-screen w-full flex-col p-2 md:top-auto md:bottom-4 md:right-4 md:left-auto md:translate-x-0 md:flex-col-reverse md:p-4 md:max-w-[420px] max-w-[calc(100%-1rem)]",t),...s}));Fi.displayName=Mn.displayName;const ou=ts("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-xl border p-3 pr-8 shadow-xl backdrop-blur-md transition-all duration-300 data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-top-full data-[state=open]:slide-in-from-top-full md:data-[state=closed]:slide-out-to-right-full md:data-[state=open]:slide-in-from-bottom-full hover:shadow-2xl md:p-4 md:space-x-3",{variants:{variant:{default:"border-[#707ff5]/30 bg-gradient-to-r from-[#1e1e76]/95 via-[#4b4bc3]/95 to-[#707ff5]/95 text-white shadow-[#707ff5]/20",success:"border-green-500/50 bg-gradient-to-r from-green-500/15 to-green-600/15 text-green-700 dark:text-green-400 shadow-green-500/20",error:"border-red-500/50 bg-gradient-to-r from-red-500/15 to-red-600/15 text-red-700 dark:text-red-400 shadow-red-500/20",warning:"border-yellow-500/50 bg-gradient-to-r from-yellow-500/15 to-yellow-600/15 text-yellow-800 dark:text-yellow-300 shadow-yellow-500/20",info:"border-[#707ff5]/50 bg-gradient-to-r from-[#4b4bc3]/15 to-[#a195f9]/15 text-[#707ff5] dark:text-[#a195f9] shadow-[#707ff5]/20"}},defaultVariants:{variant:"default"}}),vn={success:da,error:ca,warning:Mi,info:hn,default:hn},Oi=o.forwardRef(({className:t,variant:s,showIcon:r=!0,...a},n)=>{const i=s?vn[s]:vn.default;return e.jsxs(Fn,{ref:n,className:C(ou({variant:s}),t),...a,children:[r&&s&&s!=="default"&&e.jsx(i,{className:"h-4 w-4 md:h-5 md:w-5 shrink-0"}),a.children]})});Oi.displayName=Fn.displayName;const lu=o.forwardRef(({className:t,...s},r)=>e.jsx(On,{ref:r,className:C("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));lu.displayName=On.displayName;const qi=o.forwardRef(({className:t,...s},r)=>e.jsx(qn,{ref:r,className:C("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(Ge,{className:"h-4 w-4"})}));qi.displayName=qn.displayName;const $i=o.forwardRef(({className:t,...s},r)=>e.jsx($n,{ref:r,className:C("text-xs md:text-sm font-semibold leading-none tracking-tight",t),...s}));$i.displayName=$n.displayName;const zi=o.forwardRef(({className:t,...s},r)=>e.jsx(zn,{ref:r,className:C("text-xs md:text-sm opacity-90 leading-snug",t),...s}));zi.displayName=zn.displayName;function cu(){const{toasts:t}=Oe();return e.jsxs(iu,{children:[e.jsx("div",{"aria-live":"polite","aria-atomic":"true",className:"sr-only",children:t.map(({id:s,title:r,description:a})=>e.jsxs("div",{children:[r&&e.jsx("span",{children:r}),a&&e.jsxs("span",{children:[". ",a]})]},s))}),t.map(function({id:s,title:r,description:a,action:n,...i}){return e.jsxs(Oi,{...i,children:[e.jsxs("div",{className:"grid gap-1 flex-1",children:[r&&e.jsx($i,{children:r}),a&&e.jsx(zi,{children:a})]}),n,e.jsx(qi,{})]},s)}),e.jsx(Fi,{})]})}var[er]=Jt("Tooltip",[Un]),ma=Un(),Ui="TooltipProvider",du=700,wn="tooltip.open",[uu,Bi]=er(Ui),Qi=t=>{const{__scopeTooltip:s,delayDuration:r=du,skipDelayDuration:a=300,disableHoverableContent:n=!1,children:i}=t,c=o.useRef(!0),d=o.useRef(!1),u=o.useRef(0);return o.useEffect(()=>{const h=u.current;return()=>window.clearTimeout(h)},[]),e.jsx(uu,{scope:s,isOpenDelayedRef:c,delayDuration:r,onOpen:o.useCallback(()=>{window.clearTimeout(u.current),c.current=!1},[]),onClose:o.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>c.current=!0,a)},[a]),isPointerInTransitRef:d,onPointerInTransitChange:o.useCallback(h=>{d.current=h},[]),disableHoverableContent:n,children:i})};Qi.displayName=Ui;var Ki="Tooltip",[tg,tr]=er(Ki),Br="TooltipTrigger",mu=o.forwardRef((t,s)=>{const{__scopeTooltip:r,...a}=t,n=tr(Br,r),i=Bi(Br,r),c=ma(r),d=o.useRef(null),u=De(s,d,n.onTriggerChange),h=o.useRef(!1),m=o.useRef(!1),f=o.useCallback(()=>h.current=!1,[]);return o.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),e.jsx(fc,{asChild:!0,...c,children:e.jsx(ke.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...a,ref:u,onPointerMove:ve(t.onPointerMove,p=>{p.pointerType!=="touch"&&!m.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),m.current=!0)}),onPointerLeave:ve(t.onPointerLeave,()=>{n.onTriggerLeave(),m.current=!1}),onPointerDown:ve(t.onPointerDown,()=>{n.open&&n.onClose(),h.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:ve(t.onFocus,()=>{h.current||n.onOpen()}),onBlur:ve(t.onBlur,n.onClose),onClick:ve(t.onClick,n.onClose)})})});mu.displayName=Br;var hu="TooltipPortal",[sg,fu]=er(hu,{forceMount:void 0}),Xt="TooltipContent",Vi=o.forwardRef((t,s)=>{const r=fu(Xt,t.__scopeTooltip),{forceMount:a=r.forceMount,side:n="top",...i}=t,c=tr(Xt,t.__scopeTooltip);return e.jsx(Zt,{present:a||c.open,children:c.disableHoverableContent?e.jsx(Hi,{side:n,...i,ref:s}):e.jsx(pu,{side:n,...i,ref:s})})}),pu=o.forwardRef((t,s)=>{const r=tr(Xt,t.__scopeTooltip),a=Bi(Xt,t.__scopeTooltip),n=o.useRef(null),i=De(s,n),[c,d]=o.useState(null),{trigger:u,onClose:h}=r,m=n.current,{onPointerInTransitChange:f}=a,p=o.useCallback(()=>{d(null),f(!1)},[f]),x=o.useCallback((y,b)=>{const w=y.currentTarget,k={x:y.clientX,y:y.clientY},T=vu(k,w.getBoundingClientRect()),N=wu(k,T),M=ju(b.getBoundingClientRect()),O=Su([...N,...M]);d(O),f(!0)},[f]);return o.useEffect(()=>()=>p(),[p]),o.useEffect(()=>{if(u&&m){const y=w=>x(w,m),b=w=>x(w,u);return u.addEventListener("pointerleave",y),m.addEventListener("pointerleave",b),()=>{u.removeEventListener("pointerleave",y),m.removeEventListener("pointerleave",b)}}},[u,m,x,p]),o.useEffect(()=>{if(c){const y=b=>{const w=b.target,k={x:b.clientX,y:b.clientY},T=u?.contains(w)||m?.contains(w),N=!Nu(k,c);T?p():N&&(p(),h())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[u,m,c,h,p]),e.jsx(Hi,{...t,ref:i})}),[xu,gu]=er(Ki,{isInside:!1}),bu=mc("TooltipContent"),Hi=o.forwardRef((t,s)=>{const{__scopeTooltip:r,children:a,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:c,...d}=t,u=tr(Xt,r),h=ma(r),{onClose:m}=u;return o.useEffect(()=>(document.addEventListener(wn,m),()=>document.removeEventListener(wn,m)),[m]),o.useEffect(()=>{if(u.trigger){const f=p=>{p.target?.contains(u.trigger)&&m()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[u.trigger,m]),e.jsx(dc,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:c,onFocusOutside:f=>f.preventDefault(),onDismiss:m,children:e.jsxs(uc,{"data-state":u.stateAttribute,...h,...d,ref:s,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(bu,{children:a}),e.jsx(xu,{scope:r,isInside:!0,children:e.jsx(hc,{id:u.contentId,role:"tooltip",children:n||a})})]})})});Vi.displayName=Xt;var Wi="TooltipArrow",yu=o.forwardRef((t,s)=>{const{__scopeTooltip:r,...a}=t,n=ma(r);return gu(Wi,r).isInside?null:e.jsx(pc,{...n,...a,ref:s})});yu.displayName=Wi;function vu(t,s){const r=Math.abs(s.top-t.y),a=Math.abs(s.bottom-t.y),n=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(r,a,n,i)){case i:return"left";case n:return"right";case r:return"top";case a:return"bottom";default:throw new Error("unreachable")}}function wu(t,s,r=5){const a=[];switch(s){case"top":a.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":a.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":a.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":a.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return a}function ju(t){const{top:s,right:r,bottom:a,left:n}=t;return[{x:n,y:s},{x:r,y:s},{x:r,y:a},{x:n,y:a}]}function Nu(t,s){const{x:r,y:a}=t;let n=!1;for(let i=0,c=s.length-1;i<s.length;c=i++){const d=s[i],u=s[c],h=d.x,m=d.y,f=u.x,p=u.y;m>a!=p>a&&r<(f-h)*(a-m)/(p-m)+h&&(n=!n)}return n}function Su(t){const s=t.slice();return s.sort((r,a)=>r.x<a.x?-1:r.x>a.x?1:r.y<a.y?-1:r.y>a.y?1:0),_u(s)}function _u(t){if(t.length<=1)return t.slice();const s=[];for(let a=0;a<t.length;a++){const n=t[a];for(;s.length>=2;){const i=s[s.length-1],c=s[s.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))s.pop();else break}s.push(n)}s.pop();const r=[];for(let a=t.length-1;a>=0;a--){const n=t[a];for(;r.length>=2;){const i=r[r.length-1],c=r[r.length-2];if((i.x-c.x)*(n.y-c.y)>=(i.y-c.y)*(n.x-c.x))r.pop();else break}r.push(n)}return r.pop(),s.length===1&&r.length===1&&s[0].x===r[0].x&&s[0].y===r[0].y?s:s.concat(r)}var ku=Qi,Gi=Vi;const Cu=ku,Iu=o.forwardRef(({className:t,sideOffset:s=4,...r},a)=>e.jsx(Gi,{ref:a,sideOffset:s,className:C("z-50 overflow-hidden rounded-md border border-[#707ff5]/30 bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-lg shadow-[#707ff5]/20 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...r}));Iu.displayName=Gi.displayName;var Au=(t,s,r,a,n,i,c,d)=>{let u=document.documentElement,h=["light","dark"];function m(x){(Array.isArray(t)?t:[t]).forEach(y=>{let b=y==="class",w=b&&i?n.map(k=>i[k]||k):n;b?(u.classList.remove(...w),u.classList.add(i&&i[x]?i[x]:x)):u.setAttribute(y,x)}),f(x)}function f(x){d&&h.includes(x)&&(u.style.colorScheme=x)}function p(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(a)m(a);else try{let x=localStorage.getItem(s)||r,y=c&&x==="system"?p():x;m(y)}catch{}},jn=["light","dark"],Xi="(prefers-color-scheme: dark)",Pu=typeof window>"u",ha=o.createContext(void 0),Tu={setTheme:t=>{},themes:[]},rg=()=>{var t;return(t=o.useContext(ha))!=null?t:Tu},Eu=t=>o.useContext(ha)?o.createElement(o.Fragment,null,t.children):o.createElement(Du,{...t}),Ru=["light","dark"],Du=({forcedTheme:t,disableTransitionOnChange:s=!1,enableSystem:r=!0,enableColorScheme:a=!0,storageKey:n="theme",themes:i=Ru,defaultTheme:c=r?"system":"light",attribute:d="data-theme",value:u,children:h,nonce:m,scriptProps:f})=>{let[p,x]=o.useState(()=>Mu(n,c)),[y,b]=o.useState(()=>p==="system"?_r():p),w=u?Object.values(u):i,k=o.useCallback(O=>{let G=O;if(!G)return;O==="system"&&r&&(G=_r());let v=u?u[G]:G,E=s?Fu(m):null,_=document.documentElement,q=I=>{I==="class"?(_.classList.remove(...w),v&&_.classList.add(v)):I.startsWith("data-")&&(v?_.setAttribute(I,v):_.removeAttribute(I))};if(Array.isArray(d)?d.forEach(q):q(d),a){let I=jn.includes(c)?c:null,J=jn.includes(G)?G:I;_.style.colorScheme=J}E?.()},[m]),T=o.useCallback(O=>{let G=typeof O=="function"?O(p):O;x(G);try{localStorage.setItem(n,G)}catch{}},[p]),N=o.useCallback(O=>{let G=_r(O);b(G),p==="system"&&r&&!t&&k("system")},[p,t]);o.useEffect(()=>{let O=window.matchMedia(Xi);return O.addListener(N),N(O),()=>O.removeListener(N)},[N]),o.useEffect(()=>{let O=G=>{G.key===n&&(G.newValue?x(G.newValue):T(c))};return window.addEventListener("storage",O),()=>window.removeEventListener("storage",O)},[T]),o.useEffect(()=>{k(t??p)},[t,p]);let M=o.useMemo(()=>({theme:p,setTheme:T,forcedTheme:t,resolvedTheme:p==="system"?y:p,themes:r?[...i,"system"]:i,systemTheme:r?y:void 0}),[p,T,t,y,r,i]);return o.createElement(ha.Provider,{value:M},o.createElement(Lu,{forcedTheme:t,storageKey:n,attribute:d,enableSystem:r,enableColorScheme:a,defaultTheme:c,value:u,themes:i,nonce:m,scriptProps:f}),h)},Lu=o.memo(({forcedTheme:t,storageKey:s,attribute:r,enableSystem:a,enableColorScheme:n,defaultTheme:i,value:c,themes:d,nonce:u,scriptProps:h})=>{let m=JSON.stringify([r,s,i,t,d,c,a,n]).slice(1,-1);return o.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?u:"",dangerouslySetInnerHTML:{__html:`(${Au.toString()})(${m})`}})}),Mu=(t,s)=>{if(Pu)return;let r;try{r=localStorage.getItem(t)||void 0}catch{}return r||s},Fu=t=>{let s=document.createElement("style");return t&&s.setAttribute("nonce",t),s.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(s),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(s)},1)}},_r=t=>(t||(t=window.matchMedia(Xi)),t.matches?"dark":"light");const Ou=ts("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 will-change-transform transition-all duration-150 ease-out hover:scale-[1.02] active:scale-[0.98] active:duration-100",{variants:{variant:{default:"bg-primary text-primary-foreground border border-primary-border",destructive:"bg-destructive text-destructive-foreground border border-destructive-border",outline:" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none ",secondary:"border bg-secondary text-secondary-foreground border border-secondary-border ",ghost:"border border-transparent"},size:{default:"min-h-11 px-4 py-2",sm:"min-h-11 rounded-md px-3 text-xs",lg:"min-h-11 rounded-md px-8",icon:"h-11 w-11"}},defaultVariants:{variant:"default",size:"default"}}),S=o.forwardRef(({className:t,variant:s,size:r,asChild:a=!1,...n},i)=>{const c=a?Bn:"button";return e.jsx(c,{className:C(Ou({variant:s,size:r,className:t})),ref:i,...n})});S.displayName="Button";const Xe=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:C("shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-lg transition-all duration-300 hover:shadow-xl hover:shadow-[#707ff5]/10 hover:border-[#707ff5]/20",t),...s}));Xe.displayName="Card";const Yi=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:C("flex flex-col space-y-1.5 p-6",t),...s}));Yi.displayName="CardHeader";const Ji=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:C("text-2xl font-semibold leading-none tracking-tight",t),...s}));Ji.displayName="CardTitle";const Zi=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:C("text-sm text-muted-foreground",t),...s}));Zi.displayName="CardDescription";const sr=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:C("p-6 pt-0",t),...s}));sr.displayName="CardContent";const qu=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:C("flex items-center p-6 pt-0",t),...s}));qu.displayName="CardFooter";const xt={log:(t,...s)=>{},warn:(t,...s)=>{},error:(t,...s)=>{},debug:(t,...s)=>{},success:(t,s,...r)=>{},info:(t,s,...r)=>{}};class fe extends o.Component{constructor(s){super(s),this.handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0}),this.props.onReset?.()},this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,r){xt.error("ErrorBoundary","Caught error:",{error:s.toString(),stack:s.stack,componentStack:r.componentStack,timestamp:new Date().toISOString(),userAgent:navigator.userAgent,url:window.location.href}),this.setState({error:s,errorInfo:r})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:e.jsxs(Xe,{className:"max-w-2xl w-full",children:[e.jsxs(Yi,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-destructive mb-2",children:[e.jsx(Mi,{className:"h-6 w-6"}),e.jsx(Ji,{className:"text-2xl",children:"Something went wrong"})]}),e.jsx(Zi,{children:"We apologize for the inconvenience. An unexpected error occurred."})]}),e.jsxs(sr,{className:"space-y-4",children:[!1,e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(S,{onClick:this.handleReset,variant:"default",className:"flex items-center gap-2",children:[e.jsx(Yd,{className:"h-4 w-4"}),"Try Again"]}),e.jsxs(S,{onClick:()=>window.location.href="/",variant:"outline",className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),"Go Home"]})]})]})]})}):this.props.children}}function Ke({title:t,description:s,keywords:r,image:a,type:n="website",author:i,publishedTime:c,modifiedTime:d,canonicalUrl:u}){const[h]=Ce(),m=typeof window<"u"?window.location.origin:"",f=u||`${m}${h}`,p=t?`${t} | AmourScans`:"AmourScans - Find Your Love Story",y=s||"Find your love story - explore romantic manga, manhwa, and manhua with beautiful artwork and heartwarming stories. Your destination for romance comics.",b="manga, manhwa, manhua, webtoon, comics, read manga online, manga reader, manhwa reader",w=r?`${b}, ${r}`:b,k=a||`${m}/attached_assets/Featured_manga_hero_cover_71879d12.png`;return o.useEffect(()=>{document.title=p;const T=(M,O,G=!1)=>{const v=G?"property":"name";let E=document.querySelector(`meta[${v}="${M}"]`);E||(E=document.createElement("meta"),E.setAttribute(v,M),document.head.appendChild(E)),E.setAttribute("content",O)};T("description",y),T("keywords",w),i&&T("author",i),T("og:title",p,!0),T("og:description",y,!0),T("og:url",f,!0),T("og:image",k,!0),T("og:type",n,!0),T("og:site_name","AmourScans",!0),c&&T("article:published_time",c,!0),d&&T("article:modified_time",d,!0),i&&T("article:author",i,!0),T("twitter:card","summary_large_image"),T("twitter:title",p),T("twitter:description",y),T("twitter:image",k),T("twitter:url",f);let N=document.querySelector('link[rel="canonical"]');N||(N=document.createElement("link"),N.setAttribute("rel","canonical"),document.head.appendChild(N)),N.setAttribute("href",f)},[p,y,w,k,f,n,i,c,d]),null}function $u({type:t,data:s}){return o.useEffect(()=>{const r=`structured-data-${t.toLowerCase()}`;let a=document.getElementById(r);a||(a=document.createElement("script"),a.id=r,a.type="application/ld+json",document.head.appendChild(a));const n={"@context":"https://schema.org","@type":t==="Series"?"Book":t,...s};return a.textContent=JSON.stringify(n),()=>{const i=document.getElementById(r);i&&i.remove()}},[t,s]),null}function zu(){return e.jsxs("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:[e.jsx(Ke,{title:"404 Error - Page Not Found on AmourScans Manga Reader",description:"The page you're looking for could not be found. Return to AmourScans home page to continue reading your favorite manga and manhwa series online for free.",keywords:"404, page not found, error page"}),e.jsx(Xe,{className:"w-full max-w-md mx-4",children:e.jsxs(sr,{className:"pt-6",children:[e.jsxs("div",{className:"flex mb-4 gap-2",children:[e.jsx(ca,{className:"h-8 w-8 text-red-500"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),e.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})]})}const Qe=o.forwardRef(({className:t,type:s,...r},a)=>e.jsx("input",{type:s,className:C("flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background transition-all duration-200 file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#707ff5] focus-visible:ring-offset-2 focus-visible:border-[#707ff5]/50 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm hover:border-[#707ff5]/30",t),ref:a,...r}));Qe.displayName="Input";function Uu(){return Rc.useSyncExternalStore(Bu,()=>!0,()=>!1)}function Bu(){return()=>{}}var fa="Avatar",[Qu]=Jt(fa),[Ku,eo]=Qu(fa),to=o.forwardRef((t,s)=>{const{__scopeAvatar:r,...a}=t,[n,i]=o.useState("idle");return e.jsx(Ku,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:e.jsx(ke.span,{...a,ref:s})})});to.displayName=fa;var so="AvatarImage",ro=o.forwardRef((t,s)=>{const{__scopeAvatar:r,src:a,onLoadingStatusChange:n=()=>{},...i}=t,c=eo(so,r),d=Vu(a,i),u=Nt(h=>{n(h),c.onImageLoadingStatusChange(h)});return Os(()=>{d!=="idle"&&u(d)},[d,u]),d==="loaded"?e.jsx(ke.img,{...i,ref:s,src:a}):null});ro.displayName=so;var ao="AvatarFallback",no=o.forwardRef((t,s)=>{const{__scopeAvatar:r,delayMs:a,...n}=t,i=eo(ao,r),[c,d]=o.useState(a===void 0);return o.useEffect(()=>{if(a!==void 0){const u=window.setTimeout(()=>d(!0),a);return()=>window.clearTimeout(u)}},[a]),c&&i.imageLoadingStatus!=="loaded"?e.jsx(ke.span,{...n,ref:s}):null});no.displayName=ao;function Nn(t,s){return t?s?(t.src!==s&&(t.src=s),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Vu(t,{referrerPolicy:s,crossOrigin:r}){const a=Uu(),n=o.useRef(null),i=a?(n.current||(n.current=new window.Image),n.current):null,[c,d]=o.useState(()=>Nn(i,t));return Os(()=>{d(Nn(i,t))},[i,t]),Os(()=>{const u=f=>()=>{d(f)};if(!i)return;const h=u("loaded"),m=u("error");return i.addEventListener("load",h),i.addEventListener("error",m),s&&(i.referrerPolicy=s),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",h),i.removeEventListener("error",m)}},[i,r,s]),c}var io=to,oo=ro,lo=no;const ms=o.forwardRef(({className:t,...s},r)=>e.jsx(io,{ref:r,className:C(`
      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border-2 after:border-[#707ff5]/20 dark:after:border-[#707ff5]/30
      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full ring-2 ring-[#707ff5]/10 transition-all duration-200 hover:ring-[#707ff5]/30 hover:shadow-lg hover:shadow-[#707ff5]/20`,t),...s}));ms.displayName=io.displayName;const hs=o.forwardRef(({className:t,...s},r)=>e.jsx(oo,{ref:r,className:C("aspect-square h-full w-full",t),...s}));hs.displayName=oo.displayName;const fs=o.forwardRef(({className:t,...s},r)=>e.jsx(lo,{ref:r,className:C("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...s}));fs.displayName=lo.displayName;const kr=gc,Cr=bc,Hu=o.forwardRef(({className:t,inset:s,children:r,...a},n)=>e.jsxs(Qn,{ref:n,className:C("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...a,children:[r,e.jsx(Tt,{className:"ml-auto"})]}));Hu.displayName=Qn.displayName;const Wu=o.forwardRef(({className:t,...s},r)=>e.jsx(Kn,{ref:r,className:C("z-50 min-w-[8rem] overflow-hidden rounded-md border border-[#707ff5]/20 bg-popover p-1 text-popover-foreground shadow-xl shadow-[#707ff5]/10 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));Wu.displayName=Kn.displayName;const Rs=o.forwardRef(({className:t,sideOffset:s=4,...r},a)=>e.jsx(xc,{children:e.jsx(Vn,{ref:a,sideOffset:s,className:C("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-[#707ff5]/20 bg-popover p-1 text-popover-foreground shadow-xl shadow-[#707ff5]/10 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r})}));Rs.displayName=Vn.displayName;const He=o.forwardRef(({className:t,inset:s,...r},a)=>e.jsx(Hn,{ref:a,className:C("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-all duration-200 focus:bg-gradient-to-r focus:from-[#4b4bc3]/10 focus:to-[#707ff5]/10 focus:text-[#707ff5] hover:bg-gradient-to-r hover:from-[#4b4bc3]/10 hover:to-[#707ff5]/10 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r}));He.displayName=Hn.displayName;const Gu=o.forwardRef(({className:t,children:s,checked:r,...a},n)=>e.jsxs(Wn,{ref:n,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gn,{children:e.jsx(la,{className:"h-4 w-4"})})}),s]}));Gu.displayName=Wn.displayName;const Xu=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Xn,{ref:a,className:C("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Gn,{children:e.jsx(Bd,{className:"h-2 w-2 fill-current"})})}),s]}));Xu.displayName=Xn.displayName;const Yu=o.forwardRef(({className:t,inset:s,...r},a)=>e.jsx(Yn,{ref:a,className:C("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...r}));Yu.displayName=Yn.displayName;const Ds=o.forwardRef(({className:t,...s},r)=>e.jsx(Jn,{ref:r,className:C("-mx-1 my-1 h-px bg-gradient-to-r from-transparent via-[#707ff5]/30 to-transparent",t),...s}));Ds.displayName=Jn.displayName;const co=wc,Ju=jc,Zu=yc,uo=o.forwardRef(({className:t,...s},r)=>e.jsx(Zn,{className:C("fixed inset-0 z-50 bg-gradient-to-br from-black/80 via-[#1e1e76]/20 to-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:r}));uo.displayName=Zn.displayName;const em=ts("fixed z-50 gap-4 bg-background p-6 shadow-xl shadow-[#707ff5]/10 transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b border-[#707ff5]/20 data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t border-[#707ff5]/20 data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r border-[#707ff5]/20 data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l border-[#707ff5]/20 data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),pa=o.forwardRef(({side:t="right",className:s,children:r,...a},n)=>e.jsxs(Zu,{children:[e.jsx(uo,{}),e.jsxs(ei,{ref:n,className:C(em({side:t}),s),...a,children:[r,e.jsxs(vc,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-all duration-200 hover:opacity-100 hover:bg-[#707ff5]/10 focus:outline-none focus:ring-2 focus:ring-[#707ff5] focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));pa.displayName=ei.displayName;const xa=({className:t,...s})=>e.jsx("div",{className:C("flex flex-col space-y-2 text-center sm:text-left",t),...s});xa.displayName="SheetHeader";const ga=o.forwardRef(({className:t,...s},r)=>e.jsx(ti,{ref:r,className:C("text-lg font-semibold text-foreground",t),...s}));ga.displayName=ti.displayName;const mo=o.forwardRef(({className:t,...s},r)=>e.jsx(si,{ref:r,className:C("text-sm text-muted-foreground",t),...s}));mo.displayName=si.displayName;var tm="Separator",Sn="horizontal",sm=["horizontal","vertical"],ho=o.forwardRef((t,s)=>{const{decorative:r,orientation:a=Sn,...n}=t,i=rm(a)?a:Sn,d=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(ke.div,{"data-orientation":i,...d,...n,ref:s})});ho.displayName=tm;function rm(t){return sm.includes(t)}var fo=ho;const ds=o.forwardRef(({className:t,orientation:s="horizontal",decorative:r=!0,...a},n)=>e.jsx(fo,{ref:n,decorative:r,orientation:s,className:C("shrink-0 bg-gradient-to-r from-transparent via-[#707ff5]/30 to-transparent",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px] bg-gradient-to-b",t),...a}));ds.displayName=fo.displayName;var rr="Switch",[am]=Jt(rr),[nm,im]=am(rr),po=o.forwardRef((t,s)=>{const{__scopeSwitch:r,name:a,checked:n,defaultChecked:i,required:c,disabled:d,value:u="on",onCheckedChange:h,form:m,...f}=t,[p,x]=o.useState(null),y=De(s,N=>x(N)),b=o.useRef(!1),w=p?m||!!p.closest("form"):!0,[k,T]=Zr({prop:n,defaultProp:i??!1,onChange:h,caller:rr});return e.jsxs(nm,{scope:r,checked:k,disabled:d,children:[e.jsx(ke.button,{type:"button",role:"switch","aria-checked":k,"aria-required":c,"data-state":yo(k),"data-disabled":d?"":void 0,disabled:d,value:u,...f,ref:y,onClick:ve(t.onClick,N=>{T(M=>!M),w&&(b.current=N.isPropagationStopped(),b.current||N.stopPropagation())})}),w&&e.jsx(bo,{control:p,bubbles:!b.current,name:a,value:u,checked:k,required:c,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});po.displayName=rr;var xo="SwitchThumb",go=o.forwardRef((t,s)=>{const{__scopeSwitch:r,...a}=t,n=im(xo,r);return e.jsx(ke.span,{"data-state":yo(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:s})});go.displayName=xo;var om="SwitchBubbleInput",bo=o.forwardRef(({__scopeSwitch:t,control:s,checked:r,bubbles:a=!0,...n},i)=>{const c=o.useRef(null),d=De(c,i),u=ea(r),h=ta(s);return o.useEffect(()=>{const m=c.current;if(!m)return;const f=window.HTMLInputElement.prototype,x=Object.getOwnPropertyDescriptor(f,"checked").set;if(u!==r&&x){const y=new Event("click",{bubbles:a});x.call(m,r),m.dispatchEvent(y)}},[u,r,a]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:d,style:{...n.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});bo.displayName=om;function yo(t){return t?"checked":"unchecked"}var vo=po,lm=go;const Qs=o.forwardRef(({className:t,...s},r)=>e.jsx(vo,{className:C("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#707ff5] focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gradient-to-r data-[state=checked]:from-[#4b4bc3] data-[state=checked]:to-[#707ff5] data-[state=checked]:shadow-lg data-[state=checked]:shadow-[#707ff5]/30 data-[state=unchecked]:bg-input",t),...s,ref:r,children:e.jsx(lm,{className:C("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-all duration-200 data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Qs.displayName=vo.displayName;function ar(){const{data:t,isLoading:s}=be({queryKey:["/api/auth/user"],queryFn:ys({on401:"returnNull"}),retry:!1,staleTime:3e5,gcTime:6e5,refetchOnMount:!1,refetchOnWindowFocus:!0});return{user:t,isLoading:s,isAuthenticated:!!t,isAdmin:!!t?.isAdmin,isOwner:t?.role==="owner",isStaff:["staff","admin","owner"].includes(t?.role||"")||!!t?.isAdmin,isPremium:["premium","staff","admin","owner"].includes(t?.role||"")||!!t?.isAdmin,isStaffOrAbove:["staff","admin","owner"].includes(t?.role||"")||!!t?.isAdmin}}function cm(){const[,t]=Ce(),{toast:s}=Oe(),r=Ie({mutationFn:async()=>Fe("POST","/api/auth/logout"),onSuccess:()=>{U.setQueryData(["/api/auth/user"],null),U.invalidateQueries({predicate:a=>{const n=a.queryKey[0];return n!=="/api/auth/user"&&(n.includes("/api/user/")||n.includes("/api/admin/")||n.includes("user-specific"))}}),s({title:"Signed out",description:"You've been successfully signed out."}),t("/")},onError:a=>{s({title:"Sign out failed",description:a.message||"Unable to sign out. Please try again.",variant:"error"})}});return{logout:r.mutate,isLoggingOut:r.isPending}}function wo(t,s,r=!0,a=!1){const{data:n,isLoading:i,error:c,refetch:d}=be({queryKey:["search",t,s,a],queryFn:async()=>{const u=new URLSearchParams;t&&u.append("q",t),s?.genre&&u.append("genre",s.genre),s?.status&&u.append("status",s.status),s?.type&&u.append("type",s.type),a&&u.append("browse","true");const h=await fetch(`/api/search?${u.toString()}`,{headers:{"X-Requested-With":"XMLHttpRequest"}});if(!h.ok)throw new Error(`Search failed: ${h.statusText}`);return h.json()},enabled:r&&(!!t?.trim()||!!s?.genre||!!s?.status||!!s?.type||a),staleTime:3e5,gcTime:6e5});return{results:n?.results??[],total:n?.total??0,isLoading:i,error:c,refetch:d,isEmpty:!i&&n?.results?.length===0}}function dm(){const[t,s]=o.useState(""),[r,a]=o.useState({}),[n,i]=o.useState(!1),c=o.useCallback((h,m)=>{a(f=>({...f,[h]:m||void 0}))},[]),d=o.useCallback(()=>{s(""),a({}),i(!1)},[]),u=o.useCallback(()=>{a({})},[]);return{query:t,setQuery:s,filters:r,setFilters:a,updateFilter:c,clearSearch:d,clearFilters:u,isSearchActive:n,setIsSearchActive:i}}const um=ts("whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-all duration-150 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 hover-elevate ",{variants:{variant:{default:"border-transparent bg-gradient-to-r from-violet-600 to-purple-600 text-white shadow-md shadow-purple-500/30 hover:shadow-lg hover:shadow-purple-500/40",secondary:"border-transparent bg-gradient-to-r from-slate-600 to-slate-700 text-white shadow-sm hover:shadow-md",destructive:"border-transparent bg-gradient-to-r from-red-500 to-pink-600 text-white shadow-md shadow-red-500/30 hover:shadow-lg hover:shadow-red-500/40",success:"border-transparent bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md shadow-emerald-500/30 hover:shadow-lg hover:shadow-emerald-500/40",warning:"border-transparent bg-gradient-to-r from-amber-500 to-orange-600 text-white shadow-md shadow-amber-500/30 hover:shadow-lg hover:shadow-amber-500/40",info:"border-transparent bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-md shadow-blue-500/30 hover:shadow-lg hover:shadow-blue-500/40",pink:"border-transparent bg-gradient-to-r from-pink-500 to-rose-600 text-white shadow-md shadow-pink-500/30 hover:shadow-lg hover:shadow-pink-500/40",outline:" border-2 border-primary/50 bg-primary/10 text-primary shadow-sm shadow-primary/10 hover:bg-primary/20"}},defaultVariants:{variant:"default"}});function ie({className:t,variant:s,...r}){return e.jsx("div",{className:C(um({variant:s}),t),...r})}function mm({query:t,filters:s,isOpen:r,onClose:a,onResultClick:n,browseMode:i=!1}){const c=!!(s?.genre||s?.status||s?.type),d=!!t?.trim()||c||i,{results:u,total:h,isLoading:m,error:f,isEmpty:p}=wo(t,s,r&&d,i),x=o.useRef(null),y=o.useCallback(b=>{x.current&&!x.current.contains(b.target)&&a()},[a]);return o.useEffect(()=>{if(r)return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[r,y]),!r||!d?null:e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 z-50",children:[e.jsxs("div",{"aria-live":"polite","aria-atomic":"false",className:"sr-only",children:[m&&e.jsxs("span",{children:["Searching for ",t,"..."]}),!m&&u.length>0&&e.jsxs("span",{children:["Found ",h," results for ",t]}),!m&&p&&e.jsxs("span",{children:["No results found for ",t]})]}),e.jsx(Xe,{ref:x,className:"bg-card/95 backdrop-blur-md border-card-border/50 shadow-xl overflow-hidden flex flex-col",role:"region","aria-label":"Search results",children:e.jsxs(sr,{className:"p-0 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-card-border/30",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(st,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium",children:m?"Searching...":t?.trim()?`${h} results for "${t}"`:`${h} results`})]}),e.jsx(S,{variant:"ghost",size:"icon",onClick:a,className:"h-6 w-6 hover:bg-muted/50","aria-label":"Close search results",children:e.jsx(Ge,{className:"w-4 h-4"})})]}),m&&e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(vs,{className:"w-6 h-6 animate-spin text-primary"}),e.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:"Searching..."})]}),f&&e.jsx("div",{className:"p-4 text-center text-destructive",children:e.jsx("p",{children:"Search failed. Please try again."})}),p&&!m&&e.jsxs("div",{className:"p-4 text-center text-muted-foreground",children:[e.jsx(_e,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:t?.trim()?`No manga found for "${t}"`:"No manga found with selected filters"}),e.jsxs("p",{className:"text-xs mt-1",children:["Try different ",t?.trim()?"keywords":"filters"," or check spelling"]})]}),u.length>0&&!m&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"max-h-80 overflow-y-auto flex-1",children:u.map(b=>e.jsx(hm,{result:b,onResultClick:n,onClose:a},b.id))}),e.jsx("div",{className:"border-t border-card-border/30 p-3 flex-shrink-0",children:e.jsx(X,{href:`/browse${t?.trim()?`?q=${encodeURIComponent(t)}`:""}${s?.genre?`${t?.trim()?"&":"?"}genre=${encodeURIComponent(s.genre)}`:""}${s?.status?`${t?.trim()||s?.genre?"&":"?"}status=${encodeURIComponent(s.status)}`:""}`,children:e.jsxs(S,{variant:"ghost",className:"w-full text-sm hover:bg-primary/10",onClick:()=>{n(),a()},children:["View all ",h," results"]})})})]})]})})]})}const hm=o.memo(function({result:s,onResultClick:r,onClose:a}){const n=o.useCallback(()=>{r(),a()},[r,a]);return e.jsx(X,{href:`/manga/${s.id}`,children:e.jsx("div",{className:"p-3 hover:bg-muted/30 cursor-pointer transition-colors border-b border-card-border/20 last:border-b-0",onClick:n,children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-12 h-16 bg-muted rounded overflow-hidden",children:s.coverImageUrl?e.jsx("img",{src:s.coverImageUrl,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(_e,{className:"w-6 h-6 text-muted-foreground/50"})})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-sm truncate",children:s.title}),s.author&&e.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:["by ",s.author]}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsx(ie,{variant:"secondary",className:"text-xs",children:s.type}),s.status&&e.jsx(ie,{variant:s.status==="completed"?"default":"outline",className:"text-xs",children:s.status}),s.rating&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ze,{className:"w-3 h-3 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.rating})]}),s.totalChapters&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(qt,{className:"w-3 h-3 text-muted-foreground"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.totalChapters," ch"]})]})]}),s.genres.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.genres.slice(0,3).map(i=>e.jsx(ie,{variant:"outline",className:"text-xs",children:i},i)),s.genres.length>3&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",s.genres.length-3]})]})]})]})})})});function fm(t,s){return o.useReducer((r,a)=>s[r][a]??r,t)}var ba="ScrollArea",[jo]=Jt(ba),[pm,rt]=jo(ba),No=o.forwardRef((t,s)=>{const{__scopeScrollArea:r,type:a="hover",dir:n,scrollHideDelay:i=600,...c}=t,[d,u]=o.useState(null),[h,m]=o.useState(null),[f,p]=o.useState(null),[x,y]=o.useState(null),[b,w]=o.useState(null),[k,T]=o.useState(0),[N,M]=o.useState(0),[O,G]=o.useState(!1),[v,E]=o.useState(!1),_=De(s,I=>u(I)),q=ri(n);return e.jsx(pm,{scope:r,type:a,dir:q,scrollHideDelay:i,scrollArea:d,viewport:h,onViewportChange:m,content:f,onContentChange:p,scrollbarX:x,onScrollbarXChange:y,scrollbarXEnabled:O,onScrollbarXEnabledChange:G,scrollbarY:b,onScrollbarYChange:w,scrollbarYEnabled:v,onScrollbarYEnabledChange:E,onCornerWidthChange:T,onCornerHeightChange:M,children:e.jsx(ke.div,{dir:q,...c,ref:_,style:{position:"relative","--radix-scroll-area-corner-width":k+"px","--radix-scroll-area-corner-height":N+"px",...t.style}})})});No.displayName=ba;var So="ScrollAreaViewport",_o=o.forwardRef((t,s)=>{const{__scopeScrollArea:r,children:a,nonce:n,...i}=t,c=rt(So,r),d=o.useRef(null),u=De(s,d,c.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),e.jsx(ke.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:a})})]})});_o.displayName=So;var ht="ScrollAreaScrollbar",ya=o.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=rt(ht,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:c}=n,d=t.orientation==="horizontal";return o.useEffect(()=>(d?i(!0):c(!0),()=>{d?i(!1):c(!1)}),[d,i,c]),n.type==="hover"?e.jsx(xm,{...a,ref:s,forceMount:r}):n.type==="scroll"?e.jsx(gm,{...a,ref:s,forceMount:r}):n.type==="auto"?e.jsx(ko,{...a,ref:s,forceMount:r}):n.type==="always"?e.jsx(va,{...a,ref:s}):null});ya.displayName=ht;var xm=o.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=rt(ht,t.__scopeScrollArea),[i,c]=o.useState(!1);return o.useEffect(()=>{const d=n.scrollArea;let u=0;if(d){const h=()=>{window.clearTimeout(u),c(!0)},m=()=>{u=window.setTimeout(()=>c(!1),n.scrollHideDelay)};return d.addEventListener("pointerenter",h),d.addEventListener("pointerleave",m),()=>{window.clearTimeout(u),d.removeEventListener("pointerenter",h),d.removeEventListener("pointerleave",m)}}},[n.scrollArea,n.scrollHideDelay]),e.jsx(Zt,{present:r||i,children:e.jsx(ko,{"data-state":i?"visible":"hidden",...a,ref:s})})}),gm=o.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=rt(ht,t.__scopeScrollArea),i=t.orientation==="horizontal",c=ir(()=>u("SCROLL_END"),100),[d,u]=fm("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return o.useEffect(()=>{if(d==="idle"){const h=window.setTimeout(()=>u("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(h)}},[d,n.scrollHideDelay,u]),o.useEffect(()=>{const h=n.viewport,m=i?"scrollLeft":"scrollTop";if(h){let f=h[m];const p=()=>{const x=h[m];f!==x&&(u("SCROLL"),c()),f=x};return h.addEventListener("scroll",p),()=>h.removeEventListener("scroll",p)}},[n.viewport,i,u,c]),e.jsx(Zt,{present:r||d!=="hidden",children:e.jsx(va,{"data-state":d==="hidden"?"hidden":"visible",...a,ref:s,onPointerEnter:ve(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:ve(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),ko=o.forwardRef((t,s)=>{const r=rt(ht,t.__scopeScrollArea),{forceMount:a,...n}=t,[i,c]=o.useState(!1),d=t.orientation==="horizontal",u=ir(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,m=r.viewport.offsetHeight<r.viewport.scrollHeight;c(d?h:m)}},10);return Yt(r.viewport,u),Yt(r.content,u),e.jsx(Zt,{present:a||i,children:e.jsx(va,{"data-state":i?"visible":"hidden",...n,ref:s})})}),va=o.forwardRef((t,s)=>{const{orientation:r="vertical",...a}=t,n=rt(ht,t.__scopeScrollArea),i=o.useRef(null),c=o.useRef(0),[d,u]=o.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=To(d.viewport,d.content),m={...a,sizes:d,onSizesChange:u,hasThumb:h>0&&h<1,onThumbChange:p=>i.current=p,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:p=>c.current=p};function f(p,x){return Nm(p,c.current,d,x)}return r==="horizontal"?e.jsx(bm,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const p=n.viewport.scrollLeft,x=_n(p,d,n.dir);i.current.style.transform=`translate3d(${x}px, 0, 0)`}},onWheelScroll:p=>{n.viewport&&(n.viewport.scrollLeft=p)},onDragScroll:p=>{n.viewport&&(n.viewport.scrollLeft=f(p,n.dir))}}):r==="vertical"?e.jsx(ym,{...m,ref:s,onThumbPositionChange:()=>{if(n.viewport&&i.current){const p=n.viewport.scrollTop,x=_n(p,d);i.current.style.transform=`translate3d(0, ${x}px, 0)`}},onWheelScroll:p=>{n.viewport&&(n.viewport.scrollTop=p)},onDragScroll:p=>{n.viewport&&(n.viewport.scrollTop=f(p))}}):null}),bm=o.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,i=rt(ht,t.__scopeScrollArea),[c,d]=o.useState(),u=o.useRef(null),h=De(s,u,i.onScrollbarXChange);return o.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),e.jsx(Io,{"data-orientation":"horizontal",...n,ref:h,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nr(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.x),onDragScroll:m=>t.onDragScroll(m.x),onWheelScroll:(m,f)=>{if(i.viewport){const p=i.viewport.scrollLeft+m.deltaX;t.onWheelScroll(p),Ro(p,f)&&m.preventDefault()}},onResize:()=>{u.current&&i.viewport&&c&&a({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:Vs(c.paddingLeft),paddingEnd:Vs(c.paddingRight)}})}})}),ym=o.forwardRef((t,s)=>{const{sizes:r,onSizesChange:a,...n}=t,i=rt(ht,t.__scopeScrollArea),[c,d]=o.useState(),u=o.useRef(null),h=De(s,u,i.onScrollbarYChange);return o.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),e.jsx(Io,{"data-orientation":"vertical",...n,ref:h,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nr(r)+"px",...t.style},onThumbPointerDown:m=>t.onThumbPointerDown(m.y),onDragScroll:m=>t.onDragScroll(m.y),onWheelScroll:(m,f)=>{if(i.viewport){const p=i.viewport.scrollTop+m.deltaY;t.onWheelScroll(p),Ro(p,f)&&m.preventDefault()}},onResize:()=>{u.current&&i.viewport&&c&&a({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:Vs(c.paddingTop),paddingEnd:Vs(c.paddingBottom)}})}})}),[vm,Co]=jo(ht),Io=o.forwardRef((t,s)=>{const{__scopeScrollArea:r,sizes:a,hasThumb:n,onThumbChange:i,onThumbPointerUp:c,onThumbPointerDown:d,onThumbPositionChange:u,onDragScroll:h,onWheelScroll:m,onResize:f,...p}=t,x=rt(ht,r),[y,b]=o.useState(null),w=De(s,_=>b(_)),k=o.useRef(null),T=o.useRef(""),N=x.viewport,M=a.content-a.viewport,O=Nt(m),G=Nt(u),v=ir(f,10);function E(_){if(k.current){const q=_.clientX-k.current.left,I=_.clientY-k.current.top;h({x:q,y:I})}}return o.useEffect(()=>{const _=q=>{const I=q.target;y?.contains(I)&&O(q,M)};return document.addEventListener("wheel",_,{passive:!1}),()=>document.removeEventListener("wheel",_,{passive:!1})},[N,y,M,O]),o.useEffect(G,[a,G]),Yt(y,v),Yt(x.content,v),e.jsx(vm,{scope:r,scrollbar:y,hasThumb:n,onThumbChange:Nt(i),onThumbPointerUp:Nt(c),onThumbPositionChange:G,onThumbPointerDown:Nt(d),children:e.jsx(ke.div,{...p,ref:w,style:{position:"absolute",...p.style},onPointerDown:ve(t.onPointerDown,_=>{_.button===0&&(_.target.setPointerCapture(_.pointerId),k.current=y.getBoundingClientRect(),T.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",x.viewport&&(x.viewport.style.scrollBehavior="auto"),E(_))}),onPointerMove:ve(t.onPointerMove,E),onPointerUp:ve(t.onPointerUp,_=>{const q=_.target;q.hasPointerCapture(_.pointerId)&&q.releasePointerCapture(_.pointerId),document.body.style.webkitUserSelect=T.current,x.viewport&&(x.viewport.style.scrollBehavior=""),k.current=null})})})}),Ks="ScrollAreaThumb",Ao=o.forwardRef((t,s)=>{const{forceMount:r,...a}=t,n=Co(Ks,t.__scopeScrollArea);return e.jsx(Zt,{present:r||n.hasThumb,children:e.jsx(wm,{ref:s,...a})})}),wm=o.forwardRef((t,s)=>{const{__scopeScrollArea:r,style:a,...n}=t,i=rt(Ks,r),c=Co(Ks,r),{onThumbPositionChange:d}=c,u=De(s,f=>c.onThumbChange(f)),h=o.useRef(void 0),m=ir(()=>{h.current&&(h.current(),h.current=void 0)},100);return o.useEffect(()=>{const f=i.viewport;if(f){const p=()=>{if(m(),!h.current){const x=Sm(f,d);h.current=x,d()}};return d(),f.addEventListener("scroll",p),()=>f.removeEventListener("scroll",p)}},[i.viewport,m,d]),e.jsx(ke.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...a},onPointerDownCapture:ve(t.onPointerDownCapture,f=>{const x=f.target.getBoundingClientRect(),y=f.clientX-x.left,b=f.clientY-x.top;c.onThumbPointerDown({x:y,y:b})}),onPointerUp:ve(t.onPointerUp,c.onThumbPointerUp)})});Ao.displayName=Ks;var wa="ScrollAreaCorner",Po=o.forwardRef((t,s)=>{const r=rt(wa,t.__scopeScrollArea),a=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&a?e.jsx(jm,{...t,ref:s}):null});Po.displayName=wa;var jm=o.forwardRef((t,s)=>{const{__scopeScrollArea:r,...a}=t,n=rt(wa,r),[i,c]=o.useState(0),[d,u]=o.useState(0),h=!!(i&&d);return Yt(n.scrollbarX,()=>{const m=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(m),u(m)}),Yt(n.scrollbarY,()=>{const m=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(m),c(m)}),h?e.jsx(ke.div,{...a,ref:s,style:{width:i,height:d,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Vs(t){return t?parseInt(t,10):0}function To(t,s){const r=t/s;return isNaN(r)?0:r}function nr(t){const s=To(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=(t.scrollbar.size-r)*s;return Math.max(a,18)}function Nm(t,s,r,a="ltr"){const n=nr(r),i=n/2,c=s||i,d=n-c,u=r.scrollbar.paddingStart+c,h=r.scrollbar.size-r.scrollbar.paddingEnd-d,m=r.content-r.viewport,f=a==="ltr"?[0,m]:[m*-1,0];return Eo([u,h],f)(t)}function _n(t,s,r="ltr"){const a=nr(s),n=s.scrollbar.paddingStart+s.scrollbar.paddingEnd,i=s.scrollbar.size-n,c=s.content-s.viewport,d=i-a,u=r==="ltr"?[0,c]:[c*-1,0],h=sa(t,u);return Eo([0,c],[0,d])(h)}function Eo(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(r-t[0])}}function Ro(t,s){return t>0&&t<s}var Sm=(t,s=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},a=0;return(function n(){const i={left:t.scrollLeft,top:t.scrollTop},c=r.left!==i.left,d=r.top!==i.top;(c||d)&&s(),r=i,a=window.requestAnimationFrame(n)})(),()=>window.cancelAnimationFrame(a)};function ir(t,s){const r=Nt(t),a=o.useRef(0);return o.useEffect(()=>()=>window.clearTimeout(a.current),[]),o.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(r,s)},[r,s])}function Yt(t,s){const r=Nt(s);Os(()=>{let a=0;if(t){const n=new ResizeObserver(()=>{cancelAnimationFrame(a),a=window.requestAnimationFrame(r)});return n.observe(t),()=>{window.cancelAnimationFrame(a),n.unobserve(t)}}},[t,r])}var Do=No,_m=_o,km=Po;const Hs=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(Do,{ref:a,className:C("relative overflow-hidden",t),...r,children:[e.jsx(_m,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(Lo,{}),e.jsx(km,{})]}));Hs.displayName=Do.displayName;const Lo=o.forwardRef(({className:t,orientation:s="vertical",...r},a)=>e.jsx(ya,{ref:a,orientation:s,className:C("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(Ao,{className:"relative flex-1 rounded-full bg-gradient-to-b from-[#707ff5] to-[#a195f9] hover:from-[#4b4bc3] hover:to-[#707ff5] transition-colors"})}));Lo.displayName=ya.displayName;const Ir="mangaverse_recent_searches",Cm=5,Im=["Action","Romance","Fantasy","Drama","Comedy","Adventure"],Am=[{label:"All",value:""},{label:"Ongoing",value:"ongoing"},{label:"Completed",value:"completed"},{label:"Hiatus",value:"hiatus"}];function Pm({isOpen:t,onClose:s,initialQuery:r="",filters:a,onFilterChange:n}){const[i,c]=o.useState(r),[d,u]=o.useState([]),h=o.useRef(null),m=o.useRef(),[f,p]=o.useState(i),{data:x}=be({queryKey:["trending-search"],queryFn:async()=>{const I=await fetch("/api/sections/trending");if(!I.ok)throw new Error("Failed to fetch trending");return I.json()},enabled:t,staleTime:300*1e3}),{results:y,isLoading:b}=wo(f,a,t&&!!f.trim());o.useEffect(()=>{if(t){const I=localStorage.getItem(Ir);if(I)try{u(JSON.parse(I))}catch{}setTimeout(()=>h.current?.focus(),100)}},[t]),o.useEffect(()=>(m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{p(i)},300),()=>{m.current&&clearTimeout(m.current)}),[i]);const w=o.useCallback(I=>{const J=I.trim();J&&u(D=>{const de=[J,...D.filter(te=>te!==J)].slice(0,Cm);return localStorage.setItem(Ir,JSON.stringify(de)),de})},[]),k=I=>{c(I.target.value)},T=I=>{c(I),p(I)},N=()=>{u([]),localStorage.removeItem(Ir)},M=I=>{w(I),s()},O=()=>{i.trim()&&w(i),s()},G=I=>{n("genre",a.genre===I?"":I)},v=I=>{n("status",I)};if(!t)return null;const E=f.trim().length>0,_=!E&&x&&x.length>0,q=!E&&d.length>0;return e.jsxs("div",{className:"fixed inset-0 z-[100] bg-background md:hidden",children:[e.jsxs("div",{className:"sticky top-0 bg-background/95 backdrop-blur-xl border-b border-border/40 px-4 py-3 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{variant:"ghost",size:"icon",onClick:O,className:"h-11 w-11 rounded-xl shrink-0 active:scale-95 transition-transform","aria-label":"Close search",children:e.jsx(Ge,{className:"w-5 h-5"})}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx(st,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground w-5 h-5 pointer-events-none"}),e.jsx(Qe,{ref:h,type:"search",placeholder:"Search manga, manhwa...",value:i,onChange:k,className:"h-12 pl-12 pr-4 text-base bg-card/50 border-border/40 focus:border-primary focus:ring-2 focus:ring-primary/40 rounded-xl",autoComplete:"off"})]})]}),e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx(Hs,{className:"w-full whitespace-nowrap",children:e.jsx("div",{className:"flex gap-2 pb-2",children:Im.map(I=>e.jsx(ie,{variant:a.genre===I?"default":"outline",className:`cursor-pointer px-3 py-1.5 text-xs font-semibold rounded-full shrink-0 active:scale-95 transition-all ${a.genre===I?"bg-primary text-primary-foreground shadow-md":"hover:bg-primary/10"}`,onClick:()=>G(I),children:I},I))})}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:Am.map(I=>e.jsx(ie,{variant:a.status===I.value?"default":"outline",className:`cursor-pointer px-3 py-1.5 text-xs font-semibold rounded-full active:scale-95 transition-all ${a.status===I.value?"bg-primary text-primary-foreground shadow-md":"hover:bg-primary/10"}`,onClick:()=>v(I.value),children:I.label},I.value))})]})]}),e.jsx(Hs,{className:"h-[calc(100vh-180px)]",children:e.jsxs("div",{className:"px-4 py-4",children:[E&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h3",{className:"text-sm font-bold text-muted-foreground",children:b?"Searching...":`${y.length} Results`})}),b?e.jsx("div",{className:"space-y-3",children:[...Array(3)].map((I,J)=>e.jsxs("div",{className:"flex gap-3 animate-pulse",children:[e.jsx("div",{className:"w-16 h-24 bg-muted rounded-lg shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})]},J))}):y.length>0?e.jsx("div",{className:"space-y-3",children:y.map(I=>e.jsx(X,{href:`/manga/${I.id}`,onClick:()=>M(i),children:e.jsxs("div",{className:"flex gap-3 p-3 rounded-xl hover:bg-card/50 active:bg-card/70 transition-colors active:scale-[0.98] cursor-pointer",children:[e.jsx("img",{src:I.coverImageUrl||"/placeholder.png",alt:I.title,className:"w-16 h-24 object-cover rounded-lg shadow-md shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-sm line-clamp-2 mb-1",children:I.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:I.description}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Array.isArray(I.genres)&&I.genres.slice(0,2).map(J=>e.jsx(ie,{variant:"secondary",className:"text-[10px] px-1.5 py-0.5",children:J},J))})]})]})},I.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(st,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No results found"}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Try different keywords or filters"})]})]}),q&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"text-sm font-bold text-muted-foreground flex items-center gap-2",children:[e.jsx(qt,{className:"w-4 h-4"}),"Recent Searches"]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:N,className:"text-xs h-7 px-2 hover:bg-destructive/10 hover:text-destructive",children:"Clear"})]}),e.jsx("div",{className:"space-y-2",children:d.map((I,J)=>e.jsxs("button",{onClick:()=>T(I),className:"w-full flex items-center gap-3 p-3 rounded-xl hover:bg-card/50 active:bg-card/70 transition-colors text-left active:scale-[0.98]",children:[e.jsx(qt,{className:"w-4 h-4 text-muted-foreground shrink-0"}),e.jsx("span",{className:"text-sm flex-1 truncate",children:I}),e.jsx(st,{className:"w-4 h-4 text-muted-foreground shrink-0"})]},J))})]}),_&&e.jsxs("div",{className:"space-y-3 mt-6",children:[e.jsxs("h3",{className:"text-sm font-bold text-muted-foreground flex items-center gap-2",children:[e.jsx(_t,{className:"w-4 h-4"}),"Trending Now"]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:x.slice(0,6).map(I=>e.jsx(X,{href:`/manga/${I.id}`,onClick:s,children:e.jsxs("div",{className:"group cursor-pointer active:scale-[0.97] transition-transform",children:[e.jsxs("div",{className:"relative aspect-[2/3] rounded-xl overflow-hidden shadow-lg mb-2",children:[e.jsx("img",{src:I.coverImageUrl||"/placeholder.png",alt:I.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsxs(ie,{className:"bg-primary/90 text-primary-foreground text-[10px] px-2 py-0.5",children:[e.jsx(zt,{className:"w-3 h-3 mr-1 inline"}),"Hot"]})})]}),e.jsx("h4",{className:"font-bold text-xs line-clamp-2 leading-tight",children:I.title})]})},I.id))})]}),!E&&!q&&!_&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(st,{className:"w-16 h-16 mx-auto text-muted-foreground/30 mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Start typing to search"}),e.jsx("p",{className:"text-xs text-muted-foreground/70 mt-1",children:"Find your favorite manga and manhwa"})]})]})})]})}function Mo(){return be({queryKey:["/api/currency/balance"],queryFn:async()=>{const t=await fetch("/api/currency/balance",{credentials:"include"});if(t.status===401)return{balance:0};if(!t.ok)throw new Error("Failed to fetch currency balance");return t.json()},retry:!1,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0})}function ag(t=!0){return be({queryKey:["/api/currency/packages",{activeOnly:t}],queryFn:async()=>{const s=await fetch(`/api/currency/packages?activeOnly=${t}`,{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch currency packages");return s.json()}})}function ng(t=50,s=0){return be({queryKey:["/api/currency/transactions",{limit:t,offset:s}],queryFn:async()=>{const r=await fetch(`/api/currency/transactions?limit=${t}&offset=${s}`,{credentials:"include"});if(r.status===401)return[];if(!r.ok)throw new Error("Failed to fetch transactions");return r.json()},retry:!1})}function ig(){return be({queryKey:["/api/currency/purchases"],queryFn:async()=>{const t=await fetch("/api/currency/purchases",{credentials:"include"});if(t.status===401)return[];if(!t.ok)throw new Error("Failed to fetch purchases");return t.json()},retry:!1})}let Ls=null,Qr=0;const Tm=300*1e3;async function Ws(){if(Ls&&Date.now()<Qr)return Ls;try{const t=await fetch("/api/csrf-token",{credentials:"include"});if(!t.ok)throw new Error(`Failed to fetch CSRF token: ${t.status} ${t.statusText}`);const s=await t.json();if(!s.csrfToken)throw new Error("CSRF token missing in response");return Ls=s.csrfToken,Qr=Date.now()+Tm,s.csrfToken}catch(t){throw new Error(t instanceof Error?t.message:"Failed to fetch CSRF token. Please refresh the page and try again.")}}function Fo(){Ls=null,Qr=0}async function Oo(t,s={}){const r=await Ws(),a=new Headers(s.headers);s.body&&a.set("Content-Type","application/json"),a.set("X-Requested-With","XMLHttpRequest"),a.set("x-csrf-token",r);const n=await fetch(t,{...s,credentials:"include",headers:a});if(n.status===403&&(await n.clone().json().catch(()=>({}))).message?.toLowerCase().includes("csrf")){Fo();const c=await Ws();return a.set("x-csrf-token",c),fetch(t,{...s,credentials:"include",headers:a})}return n}async function og(t,s,r={}){const a=await Ws(),n=new Headers(r.headers);n.set("X-Requested-With","XMLHttpRequest"),n.set("x-csrf-token",a);const i=await fetch(t,{...r,method:r.method||"POST",credentials:"include",headers:n,body:s});if(i.status===403&&(await i.clone().json().catch(()=>({}))).message?.toLowerCase().includes("csrf")){Fo();const d=await Ws();return n.set("x-csrf-token",d),fetch(t,{...r,method:r.method||"POST",credentials:"include",headers:n,body:s})}return i}function Em(){return be({queryKey:["/api/auth/test-mode"],queryFn:async()=>{const t=await fetch("/api/auth/test-mode",{credentials:"include"});if(t.status===401)return{testMode:!1};if(!t.ok)throw new Error("Failed to fetch test mode status");return t.json()},retry:!1})}function Rm(){const t=Ut();return Ie({mutationFn:async s=>{const a=await Oo(s?"/api/auth/test-mode/enable":"/api/auth/test-mode/disable",{method:"POST"});if(!a.ok){const n=await a.json();throw new Error(n.message||"Failed to toggle test mode")}return a.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["/api/auth/test-mode"]}),t.invalidateQueries({queryKey:["/api/chapters"]})}})}function Dm(t){return be({queryKey:["/api/settings/system",...t],queryFn:async()=>{const s=new URLSearchParams;t.forEach(a=>s.append("keys",a));const r=await fetch(`/api/settings/system?${s.toString()}`,{credentials:"include"});if(!r.ok)throw new Error("Failed to fetch system settings");return r.json()},staleTime:300*1e3})}function Lm(){return Dm(["battle_pass_enabled","battle_pass_mode"])}function at(){const{user:t,isAuthenticated:s,isAdmin:r,isLoading:a}=ar(),{logout:n,isLoggingOut:i}=cm(),[c,d]=Ce(),{data:u}=Mo(),{data:h}=Em(),{mutate:m}=Rm(),{data:f}=Lm(),p=f?.battle_pass_enabled?.value==="true",{query:x,setQuery:y,filters:b,updateFilter:w,setIsSearchActive:k}=dm(),[T,N]=o.useState(!1),[M,O]=o.useState(!1),[G,v]=o.useState(!1),[E,_]=o.useState(!1),[q,I]=o.useState(!1),[J,D]=o.useState(!0),de=o.useRef(null),te=o.useRef(0),[me,Ae]=o.useState(x),xe=o.useRef(),Ne=["Action","Romance","Fantasy","Drama","Comedy","Adventure","Supernatural","Slice of Life"];o.useEffect(()=>(xe.current&&clearTimeout(xe.current),xe.current=setTimeout(()=>{y(me),v(!!me.trim()),k(!!me.trim())},300),()=>{xe.current&&clearTimeout(xe.current)}),[me,y,k]),o.useEffect(()=>{const re=()=>{const Le=window.scrollY;Le<10?D(!0):Le>te.current&&Le>100?D(!1):Le<te.current&&D(!0),te.current=Le};return window.addEventListener("scroll",re,{passive:!0}),()=>window.removeEventListener("scroll",re)},[]);const nt=o.useCallback(re=>{const Le=re.target.value;Ae(Le)},[]),ft=o.useCallback(()=>{x.trim()&&v(!0)},[x]),Ye=o.useCallback(()=>{v(!1),O(!1)},[]),ge=o.useCallback(()=>{v(!1),O(!1)},[]),Ue=o.useCallback(()=>{const re=!M;O(re);const Le=!!(b.genre||b.status||b.type);!re&&Le&&v(!0)},[M,b]),ee=o.useCallback(re=>{w("genre",re),N(!0),v(!0),O(!1)},[w]),Pe=o.useCallback(re=>{w("status",re),N(!0),v(!0),O(!1)},[w]),Ve=o.useCallback((re,Le)=>{w(re,Le)},[w]),A=o.useCallback(()=>{I(!0)},[]),Q=o.useCallback(()=>{I(!1)},[]),se=re=>c===re||c.startsWith(re);return e.jsxs(e.Fragment,{children:[e.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[100] focus:px-4 focus:py-2 focus:bg-primary focus:text-primary-foreground focus:rounded-md focus:shadow-lg","aria-label":"Skip to main content",children:"Skip to main content"}),e.jsx("nav",{className:`bg-background/85 border-b border-border/30 backdrop-blur-2xl sticky top-0 z-50 w-full shadow-lg transition-transform duration-300 ${J?"translate-y-0":"-translate-y-full"}`,role:"navigation","aria-label":"Main navigation",children:e.jsx("div",{className:"w-full mx-auto px-4 sm:px-5 lg:px-8 max-w-none",children:e.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[e.jsx(X,{href:"/",children:e.jsxs("div",{className:"flex items-center space-x-2 min-w-0 cursor-pointer group",children:[e.jsx("img",{src:"/amourscans-icon.png",alt:"AmourScans",className:"w-7 h-7 sm:w-8 sm:h-8 object-contain drop-shadow-lg transition-all duration-300 group-hover:scale-110 group-active:scale-95"}),e.jsx("span",{className:"text-base sm:text-lg lg:text-xl font-bold bg-gradient-to-r from-[#a195f9] via-[#f2a1f2] to-[#f2a1f2] bg-clip-text text-transparent truncate",children:"AmourScans"})]})}),e.jsx("div",{className:"flex-1 max-w-2xl mx-4 sm:mx-6 lg:mx-10 hidden md:block",children:e.jsxs("div",{className:"relative",ref:de,role:"search","aria-label":"Search manga",children:[e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(st,{strokeWidth:3,className:"absolute left-4 top-1/2 -translate-y-1/2 text-muted-foreground w-5 h-5 z-10 pointer-events-none"}),e.jsx(Qe,{type:"search",placeholder:"Search manga, manhwa, characters...",className:"h-12 pl-12 pr-4 w-full bg-card/70 backdrop-blur-xl border border-border/40 focus:border-primary focus:ring-2 focus:ring-primary/40 focus:bg-card/90 transition-all duration-300 placeholder:text-muted-foreground/70 rounded-2xl text-base shadow-md hover:shadow-lg hover:bg-card/80 focus:shadow-xl",value:me,onChange:nt,onFocus:ft,"data-testid":"search-input","aria-label":"Search for manga, manhwa, or characters"})]}),e.jsx(S,{variant:"ghost",size:"icon",onClick:Ue,className:`h-12 w-12 rounded-2xl hover:bg-primary/15 active:scale-95 transition-all duration-300 shadow-md hover:shadow-lg ${M?"bg-primary/20 text-primary shadow-lg":"bg-card/70 border border-border/40"}`,"data-testid":"advanced-search-toggle","aria-label":"Toggle advanced search filters","aria-expanded":M,children:e.jsx(ua,{strokeWidth:3,className:"w-5 h-5"})})]}),e.jsx(mm,{query:x,filters:b,isOpen:G,onClose:Ye,onResultClick:ge,browseMode:T}),M&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-3 bg-card/97 backdrop-blur-2xl border border-border/40 rounded-2xl p-6 shadow-2xl z-50 animate-in fade-in slide-in-from-top-2 duration-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block text-foreground",children:"Genre"}),e.jsxs(kr,{children:[e.jsx(Cr,{asChild:!0,children:e.jsxs(S,{variant:"outline",className:"w-full justify-between h-12 bg-background/60 rounded-xl border-border/40 hover:border-primary/60 hover:bg-background/80 transition-all active:scale-98",children:[b.genre||"Select Genre"," ",e.jsx(gs,{strokeWidth:3,className:"w-4 h-4 ml-2"})]})}),e.jsxs(Rs,{className:"w-48",children:[e.jsx(He,{onClick:()=>ee(""),className:"hover:bg-primary/15 cursor-pointer",children:"All Genres"}),Ne.map(re=>e.jsx(He,{onClick:()=>ee(re),className:"hover:bg-primary/15 cursor-pointer",children:re},re))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-semibold mb-3 block text-foreground",children:"Status"}),e.jsxs(kr,{children:[e.jsx(Cr,{asChild:!0,children:e.jsxs(S,{variant:"outline",className:"w-full justify-between h-12 bg-background/60 rounded-xl border-border/40 hover:border-primary/60 hover:bg-background/80 transition-all active:scale-98",children:[b.status||"Any Status"," ",e.jsx(gs,{strokeWidth:3,className:"w-4 h-4 ml-2"})]})}),e.jsxs(Rs,{children:[e.jsx(He,{onClick:()=>Pe(""),className:"hover:bg-primary/15 cursor-pointer",children:"Any Status"}),e.jsx(He,{onClick:()=>Pe("ongoing"),className:"hover:bg-primary/15 cursor-pointer",children:"Ongoing"}),e.jsx(He,{onClick:()=>Pe("completed"),className:"hover:bg-primary/15 cursor-pointer",children:"Completed"}),e.jsx(He,{onClick:()=>Pe("hiatus"),className:"hover:bg-primary/15 cursor-pointer",children:"Hiatus"})]})]})]})]})})]})}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-2.5",children:[e.jsx(S,{variant:"ghost",size:"icon",className:"md:hidden h-11 w-11 hover:bg-primary/10 hover:text-primary active:scale-95 transition-all duration-200 rounded-xl",onClick:A,"aria-label":"Search manga",children:e.jsx(st,{className:"w-5 h-5"})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-1.5 mr-2",children:[e.jsx(X,{href:"/shop",children:e.jsxs(S,{variant:"ghost",size:"sm",className:`h-10 hover:bg-primary/10 hover:text-primary active:scale-95 transition-all duration-200 font-semibold rounded-xl px-3 ${se("/shop")?"bg-primary/10 text-primary":""}`,children:[e.jsx(tu,{strokeWidth:2.5,className:"w-4 h-4 mr-1.5"}),"Shop"]})}),s&&e.jsxs(e.Fragment,{children:[e.jsx(X,{href:"/library",children:e.jsxs(S,{variant:"ghost",size:"sm",className:`h-10 hover:bg-primary/10 hover:text-primary active:scale-95 transition-all duration-200 font-semibold rounded-xl px-3 ${se("/library")?"bg-primary/10 text-primary":""}`,children:[e.jsx(Is,{strokeWidth:2.5,className:"w-4 h-4 mr-1.5"}),"Library"]})}),e.jsx(X,{href:"/history",children:e.jsxs(S,{variant:"ghost",size:"sm",className:`h-10 hover:bg-primary/10 hover:text-primary active:scale-95 transition-all duration-200 font-semibold rounded-xl px-3 ${se("/history")?"bg-primary/10 text-primary":""}`,children:[e.jsx(Nr,{strokeWidth:2.5,className:"w-4 h-4 mr-1.5"}),"History"]})})]})]}),e.jsx("div",{className:"hidden md:flex items-center space-x-2.5",children:a?e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("div",{className:"w-10 h-10 bg-muted/50 animate-pulse rounded-full"})}):s?e.jsxs(e.Fragment,{children:[e.jsx(X,{href:"/shop",children:e.jsxs(S,{variant:"outline",size:"sm",className:"h-10 hover:bg-primary/10 hover:text-primary active:scale-95 transition-all duration-200 font-semibold rounded-xl px-3 border-primary/30",children:[e.jsx(Qt,{strokeWidth:2.5,className:"w-4 h-4 mr-1.5 text-primary"}),e.jsx("span",{className:"text-primary font-bold",children:u?.balance??0})]})}),e.jsxs(kr,{children:[e.jsx(Cr,{asChild:!0,children:e.jsx(S,{variant:"ghost",className:"relative h-10 w-10 rounded-full hover:bg-primary/15 active:scale-95 transition-all duration-300 ring-2 ring-transparent hover:ring-primary/30 hover:shadow-lg","data-testid":"profile-dropdown",children:e.jsxs(ms,{className:"h-10 w-10",children:[e.jsx(hs,{src:t?.profileImageUrl||t?.profilePicture||void 0,alt:t?.username||"Profile"}),e.jsx(fs,{className:"bg-gradient-to-br from-primary/25 to-accent/25 text-primary text-sm font-bold",children:t?.username?.charAt(0)?.toUpperCase()||t?.firstName?.charAt(0)?.toUpperCase()||"U"})]})})}),e.jsxs(Rs,{align:"end",className:"w-64 bg-card/97 backdrop-blur-2xl border-border/40 rounded-2xl shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4",children:[e.jsxs(ms,{className:"h-11 w-11 ring-2 ring-primary/20",children:[e.jsx(hs,{src:t?.profileImageUrl||t?.profilePicture||void 0,alt:t?.username||"Profile"}),e.jsx(fs,{className:"bg-gradient-to-br from-primary/25 to-accent/25 text-primary text-sm font-bold",children:t?.username?.charAt(0)?.toUpperCase()||t?.firstName?.charAt(0)?.toUpperCase()||"U"})]}),e.jsxs("div",{className:"flex flex-col space-y-1 flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold leading-none truncate",children:t?.username||`${t?.firstName||""} ${t?.lastName||""}`.trim()||"User"}),e.jsx("p",{className:"text-xs leading-none text-muted-foreground truncate",children:t?.email||""})]})]}),e.jsx(Ds,{}),e.jsxs(He,{onSelect:()=>d("/daily-rewards"),className:"hover:bg-primary/15 cursor-pointer py-3 active:scale-98",children:[e.jsx(ze,{strokeWidth:3,className:"w-4 h-4 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Daily Rewards"})]}),e.jsxs(He,{onSelect:()=>d("/achievements"),className:"hover:bg-primary/15 cursor-pointer py-3 active:scale-98",children:[e.jsx(ze,{strokeWidth:3,className:"w-4 h-4 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Achievements"})]}),e.jsx(Ds,{}),e.jsxs(He,{onSelect:()=>d("/library"),className:"hover:bg-primary/15 cursor-pointer py-3 active:scale-98",children:[e.jsx(Is,{strokeWidth:3,className:"w-4 h-4 mr-3"}),e.jsx("span",{className:"font-semibold",children:"My Library"})]}),e.jsxs(He,{onSelect:()=>d("/settings"),className:"hover:bg-primary/15 cursor-pointer py-3 active:scale-98",children:[e.jsx(Li,{strokeWidth:3,className:"w-4 h-4 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Profile Settings"})]}),r&&e.jsxs(e.Fragment,{children:[e.jsxs(He,{onSelect:()=>d("/admin"),className:"hover:bg-primary/15 cursor-pointer py-3 active:scale-98",children:[e.jsx(Sr,{strokeWidth:3,className:"w-4 h-4 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Admin Panel"})]}),e.jsxs("div",{className:"px-2 py-3 hover:bg-primary/15 transition-colors",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(su,{strokeWidth:3,className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-semibold text-sm",children:"Test Mode"})]}),e.jsx(Qs,{checked:h?.testMode||!1,onCheckedChange:re=>m(re),className:"data-[state=checked]:bg-orange-500"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 ml-7",children:"Disable admin bypass for testing"})]})]}),e.jsx(Ds,{}),e.jsxs(He,{onSelect:()=>n(),disabled:i,className:"hover:bg-destructive/15 focus:bg-destructive/15 focus:text-destructive cursor-pointer py-3 active:scale-98","data-testid":"logout-button",children:[e.jsx(fn,{strokeWidth:3,className:"w-4 h-4 mr-3"}),e.jsx("span",{className:"font-semibold",children:i?"Signing out...":"Sign out"})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{href:"/login",children:e.jsxs(S,{variant:"ghost",size:"sm",className:"h-10 hover:bg-primary/15 hover:text-primary active:scale-95 transition-all duration-300 font-semibold rounded-xl px-4","data-testid":"nav-login",children:[e.jsx(cs,{strokeWidth:3,className:"w-4 h-4 mr-2"}),"Login"]})}),e.jsx(X,{href:"/signup",children:e.jsxs(S,{size:"sm",className:"h-10 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white shadow-lg hover:shadow-xl active:scale-95 transition-all duration-300 font-semibold rounded-xl px-5","data-testid":"nav-signup",children:[e.jsx(gn,{strokeWidth:3,className:"w-4 h-4 mr-2"}),"Sign Up"]})})]})}),e.jsx(S,{variant:"ghost",size:"icon",className:"md:hidden h-11 w-11 hover:bg-primary/10 hover:text-primary active:scale-95 transition-all duration-200 rounded-xl","data-testid":"mobile-menu",onClick:()=>_(!0),"aria-label":"Open mobile menu","aria-expanded":E,children:e.jsx(Di,{strokeWidth:1.5,className:"w-6 h-6"})})]})]})})}),e.jsx(Pm,{isOpen:q,onClose:Q,initialQuery:x,filters:b,onFilterChange:Ve}),e.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-background/85 backdrop-blur-2xl border-t border-border/30 shadow-[0_-4px_16px_rgba(0,0,0,0.12)] pb-safe",children:e.jsxs("div",{className:"flex items-center justify-around h-[68px] px-2",children:[e.jsx(X,{href:"/",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${c==="/"?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Bs,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${c==="/"?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Home"})]})}),e.jsx(X,{href:"/browse",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/browse")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Qd,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/browse")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Browse"})]})}),s?e.jsx(e.Fragment,{children:r?e.jsxs(e.Fragment,{children:[e.jsx(X,{href:"/library",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/library")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Is,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/library")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Library"})]})}),e.jsx(X,{href:"/history",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/history")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Nr,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/history")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"History"})]})}),e.jsx(X,{href:"/admin",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/admin")?"text-[#4b4bc3] bg-[#4b4bc3]/15":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Sr,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/admin")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Admin"})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(X,{href:"/library",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/library")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Is,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/library")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Library"})]})}),e.jsx(X,{href:"/history",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/history")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Nr,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/history")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"History"})]})}),e.jsx(X,{href:"/shop",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/shop")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(Qt,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/shop")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Shop"})]})})]})}):e.jsxs(e.Fragment,{children:[e.jsx(X,{href:"/featured",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/featured")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(zt,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/featured")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Featured"})]})}),e.jsx(X,{href:"/trending",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/trending")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(_t,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/trending")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Trending"})]})}),e.jsx(X,{href:"/login",children:e.jsxs("button",{className:`flex flex-col items-center justify-center min-w-[60px] h-[60px] transition-all duration-200 rounded-xl active:scale-95 ${se("/login")?"text-primary bg-primary/10":"text-muted-foreground active:bg-muted/10"}`,children:[e.jsx(cs,{strokeWidth:1.5,className:`w-6 h-6 mb-0.5 transition-transform duration-200 ${se("/login")?"scale-105":""}`}),e.jsx("span",{className:"text-[10px] font-semibold",children:"Login"})]})})]})]})}),e.jsx(co,{open:E,onOpenChange:_,children:e.jsxs(pa,{side:"left",className:"w-[340px] sm:w-[400px] bg-background/85 backdrop-blur-2xl border-border/30",children:[e.jsx(xa,{children:e.jsxs(ga,{className:"flex items-center space-x-3",children:[e.jsx("img",{src:"/amourscans-icon.png",alt:"AmourScans",className:"w-7 h-7 object-contain"}),e.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] via-[#f2a1f2] to-[#f2a1f2] bg-clip-text text-transparent font-bold text-xl",children:"AmourScans"})]})}),e.jsxs("div",{className:"mt-8 flex flex-col space-y-5",children:[a?e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-muted/30 rounded-2xl animate-pulse",children:[e.jsx("div",{className:"w-14 h-14 bg-muted rounded-full"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"w-28 h-4 bg-muted rounded mb-2"}),e.jsx("div",{className:"w-36 h-3 bg-muted rounded"})]})]}):s?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex items-center space-x-3 p-4 bg-card/50 border border-border/30 rounded-2xl backdrop-blur-xl shadow-lg",children:[e.jsxs(ms,{className:"h-14 w-14 ring-2 ring-primary/30",children:[e.jsx(hs,{src:t?.profileImageUrl||t?.profilePicture||void 0,alt:t?.username||"Profile"}),e.jsx(fs,{className:"bg-gradient-to-br from-primary/25 to-accent/25 text-primary text-base font-bold",children:t?.username?.charAt(0)?.toUpperCase()||t?.firstName?.charAt(0)?.toUpperCase()||"U"})]}),e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-bold truncate",children:t?.username||`${t?.firstName||""} ${t?.lastName||""}`.trim()||"User"}),e.jsx("p",{className:"text-xs text-muted-foreground truncate",children:t?.email||""}),e.jsxs("div",{className:"flex items-center gap-1.5 mt-1.5",children:[e.jsx(Qt,{strokeWidth:2,className:"w-3.5 h-3.5 text-amber-500"}),e.jsxs("span",{className:"text-xs font-bold text-amber-500",children:[u?.balance??0," Coins"]})]})]})]})}):e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx(X,{href:"/login",children:e.jsxs(S,{variant:"outline",className:"w-full justify-start h-12 rounded-xl hover:bg-primary/10 active:scale-98 transition-all",onClick:()=>_(!1),children:[e.jsx(cs,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Login"})]})}),e.jsx(X,{href:"/signup",children:e.jsxs(S,{className:"w-full justify-start h-12 rounded-xl bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 shadow-lg active:scale-98 transition-all",onClick:()=>_(!1),children:[e.jsx(gn,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Sign Up"})]})})]}),e.jsx(ds,{className:"bg-border/30"}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"text-[10px] font-extrabold text-muted-foreground px-3 mb-1 tracking-wider",children:"QUICK ACCESS"}),r&&e.jsxs(S,{variant:"ghost",className:"w-full justify-start h-12 rounded-xl bg-gradient-to-r from-primary/20 to-accent/20 hover:from-primary/30 hover:to-accent/30 border border-primary/30 transition-all active:scale-98 shadow-md",onClick:()=>{d("/admin"),_(!1)},children:[e.jsx(Sr,{strokeWidth:2,className:"w-5 h-5 mr-3 text-primary"}),e.jsx("span",{className:"flex-1 text-left font-bold text-primary",children:"Admin Panel"}),e.jsx("span",{className:"px-2 py-0.5 text-[10px] font-bold bg-primary/40 text-primary-foreground rounded-md",children:"ADMIN"})]}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl group transition-all active:scale-98",onClick:()=>{d("/settings"),_(!1)},children:[e.jsx(cs,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"flex-1 text-left font-semibold",children:"Profile"})]}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/shop"),_(!1)},children:[e.jsx(Qt,{strokeWidth:1.5,className:"w-5 h-5 mr-3 text-primary"}),e.jsx("span",{className:"flex-1 text-left font-semibold",children:"Shop"}),e.jsx("span",{className:"px-3 py-1.5 text-xs font-bold bg-primary/20 text-primary rounded-full group-hover:bg-primary/30 transition-colors",children:u?.balance||0})]})]}),e.jsx(ds,{className:"bg-border/30"}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"text-[10px] font-extrabold text-muted-foreground px-3 mb-1 tracking-wider",children:"FEATURES"}),p&&e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/battle-pass"),_(!1)},children:[e.jsx(_t,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Battle Pass"})]}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/daily-rewards"),_(!1)},children:[e.jsx(ze,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Daily Rewards"})]}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/achievements"),_(!1)},children:[e.jsx(ze,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Achievements"})]})]}),e.jsx(ds,{className:"bg-border/30"})]}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx("p",{className:"text-[10px] font-extrabold text-muted-foreground px-3 mb-1 tracking-wider",children:"AVAILABLE PAGES"}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/pinned"),_(!1)},children:[e.jsx($t,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Pinned"})]}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/popular"),_(!1)},children:[e.jsx(ze,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Popular"})]}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/latest-updates"),_(!1)},children:[e.jsx(qt,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Latest Updates"})]}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-primary/10 h-12 rounded-xl transition-all active:scale-98",onClick:()=>{d("/trending"),_(!1)},children:[e.jsx(_t,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:"Trending"})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx(ds,{className:"bg-border/30"}),e.jsxs(S,{variant:"ghost",className:"w-full justify-start hover:bg-destructive/10 hover:text-destructive h-12 rounded-xl transition-all active:scale-98",onClick:()=>{n(),_(!1)},disabled:i,children:[e.jsx(fn,{strokeWidth:1.5,className:"w-5 h-5 mr-3"}),e.jsx("span",{className:"font-semibold",children:i?"Signing out...":"Sign out"})]})]})]})]})})]})}function F({className:t,...s}){return e.jsx("div",{className:C("relative overflow-hidden rounded-md bg-gradient-to-r from-muted via-muted/80 to-muted",t),...s,children:e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-[#707ff5]/10 to-transparent"})})}function Mm(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();o.useEffect(()=>{(async()=>{try{const E=await fetch("/api/sections/featured");if(E.ok){const _=await E.json();s(_)}}catch{}finally{a(!1)}})()},[]);const[i,c]=o.useState(!1),[d,u]=o.useState(0),h=o.useRef(0),m=o.useRef(0),f=o.useRef(null),[p,x]=o.useState(310);o.useEffect(()=>{const v=()=>{window.innerWidth<640?x(210):x(310)};return v(),window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]);const y=p;o.useEffect(()=>{t.length>0&&u(-(y*t.length))},[t.length,y]);const b=t.length>0?[...t,...t,...t]:[];o.useEffect(()=>{if(i||t.length===0)return;let v;const E=.6,_=()=>{u(q=>{const I=q-E,J=y*t.length,D=-J*2;return I<=D?I+J:I}),v=requestAnimationFrame(_)};return v=requestAnimationFrame(_),()=>cancelAnimationFrame(v)},[t.length,i,y]);const w=o.useCallback(()=>{u(v=>{const E=v+y,_=-y*t.length;return E>=0?_:E})},[t.length,y]),k=o.useCallback(()=>{u(v=>{const E=v-y,_=-y*t.length*2,q=-y*t.length;return E<=_?q:E})},[t.length,y]),T=o.useCallback(v=>{h.current=v.touches[0].clientX,c(!0)},[]),N=o.useCallback(v=>{m.current=v.touches[0].clientX},[]),M=o.useCallback(()=>{const E=h.current-m.current;Math.abs(E)>50&&(E>0?k():w()),c(!1)},[k,w]),O=o.useCallback(()=>{c(!0)},[]),G=o.useCallback(()=>{c(!1)},[]);return r?e.jsx("div",{className:"relative min-h-[280px] h-[40vh] sm:h-[45vh] md:h-[48vh] lg:h-[50vh] w-full overflow-hidden bg-background",children:e.jsx("div",{className:"relative z-10 px-2 sm:px-4 lg:px-1 w-full h-full flex items-center",children:e.jsx("div",{className:"relative max-w-none lg:max-w-[95vw] mx-auto w-full",children:e.jsx("div",{className:"relative overflow-hidden h-full",children:e.jsx("div",{className:"flex h-full gap-5",children:[...Array(5)].map((v,E)=>e.jsx("div",{className:"flex-shrink-0 w-[200px] sm:w-[300px] px-2.5 h-full flex items-center",children:e.jsx(F,{className:"w-full rounded-lg bg-card/50",style:{aspectRatio:"3/4"}})},E))})})})})}):t.length===0?e.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-background",children:[e.jsx("div",{className:"relative z-10 text-center pt-16 sm:pt-20 lg:pt-24 pb-8 sm:pb-12 lg:pb-16",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold bg-gradient-to-r from-foreground via-primary to-primary bg-clip-text text-transparent mb-4 sm:mb-6 tracking-tight",children:"Featured Series"}),e.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-muted-foreground font-light leading-relaxed mb-8",children:"Discover amazing manga and manhwa series"})]})}),e.jsx("div",{className:"relative z-10 text-center py-12",children:e.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg mx-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No featured series assigned yet. Use the admin panel to assign series to this section."})})})]}):e.jsx("div",{className:"relative min-h-[280px] h-[40vh] sm:h-[45vh] md:h-[48vh] lg:h-[50vh] w-full overflow-hidden bg-background",children:e.jsx("div",{className:"relative z-10 px-2 sm:px-4 lg:px-1 w-full h-full flex items-center",children:e.jsx("div",{className:"relative max-w-none lg:max-w-[95vw] mx-auto w-full h-full",children:e.jsx("div",{ref:f,className:"relative overflow-hidden h-full",onMouseEnter:O,onMouseLeave:G,onTouchStart:T,onTouchMove:N,onTouchEnd:M,children:e.jsx("div",{className:"flex h-full",style:{transform:`translateX(${d}px)`,transition:i?"transform 0.3s ease-out":"none"},children:b.map((v,E)=>e.jsx(Fm,{item:v,navigate:n},`${v.id}-${E}`))})})})})})}const Fm=o.memo(function({item:s,navigate:r}){const a=o.useCallback(()=>{r(`/manga/${s.id}`)},[r,s.id]);return e.jsx("div",{className:"flex-shrink-0 w-[200px] sm:w-[300px] px-2.5 cursor-pointer h-full flex items-center bg-transparent",onClick:a,"data-testid":`hero-card-${s.id}`,children:e.jsx("div",{className:"relative w-full mx-auto transition-transform duration-150 hover:scale-105",style:{aspectRatio:"3/4"},children:e.jsx("img",{src:s.coverImageUrl||"/api/covers/placeholder",alt:s.title,loading:"lazy",decoding:"async",className:"w-full h-full object-cover object-center rounded-lg shadow-lg",onError:n=>{const i=n.target;i.src!=="/api/covers/placeholder"&&(i.src="/api/covers/placeholder")}})})})});function qo(){return e.jsxs("div",{className:"bg-card rounded-xl overflow-hidden border border-border/40 relative",children:[e.jsxs("div",{className:"relative w-full",style:{aspectRatio:"3/4"},children:[e.jsx(F,{className:"w-full h-full rounded-none"}),e.jsx("div",{className:"absolute top-2 left-2 flex flex-col gap-1.5",children:e.jsx(F,{className:"w-16 h-6 rounded-md"})}),e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(F,{className:"w-14 h-5 rounded-md"})})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(F,{className:"h-4 w-full"}),e.jsx(F,{className:"h-4 w-3/4"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(F,{className:"h-4 w-12"}),e.jsx(F,{className:"h-4 w-10"})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(F,{className:"h-5 w-16 rounded-full"}),e.jsx(F,{className:"h-3 w-20"})]})]}),e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}function Om(t){const s=new Date,r=new Date(t),a=s.getTime()-r.getTime(),n=Math.floor(a/6e4),i=Math.floor(a/36e5),c=Math.floor(a/864e5),d=Math.floor(a/6048e5),u=Math.floor(a/2592e6);return n<1?"Just now":n<60?`${n}m ago`:i<24?`${i}h ago`:c<7?`${c}d ago`:d<4?`${d}w ago`:`${u}mo ago`}function qm(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,i]=o.useState("hot"),[,c]=Ce(),d=async(u=!1)=>{a(!0);try{const h=u?`/api/sections/popular-today?t=${Date.now()}`:"/api/sections/popular-today",m=await fetch(h,{cache:u?"no-cache":"default"});if(m.ok){const f=await m.json();s(f)}}catch{}finally{a(!1)}};return o.useEffect(()=>{d()},[]),r?e.jsx("section",{className:"py-6 sm:py-8 w-full",children:e.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-10 sm:mb-8 lg:mb-10 gap-4",children:e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#707ff5] via-[#a195f9] to-[#f2a1f2] rounded-lg flex items-center justify-center shadow-lg shadow-[#a195f9]/30",children:e.jsx(Gt,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Latest ",e.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Releases"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-[4vw] sm:gap-6 w-full",children:[...Array(8)].map((u,h)=>e.jsx(qo,{},h))})]})}):e.jsx("section",{className:"py-6 sm:py-8 w-full",children:e.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-10 sm:mb-8 lg:mb-10 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#707ff5] via-[#a195f9] to-[#f2a1f2] rounded-lg flex items-center justify-center shadow-lg shadow-[#a195f9]/30 transition-transform hover:scale-105",children:e.jsx(Gt,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Latest ",e.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Releases"})]})]}),e.jsxs("div",{className:"flex items-center justify-between sm:justify-end gap-2 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(S,{variant:n==="hot"?"default":"outline",size:"sm",className:`px-5 py-2 rounded-xl text-sm font-bold transition-all duration-300 ${n==="hot"?"bg-gradient-to-r from-[#f2a1f2] via-[#a195f9] to-[#f2a1f2] hover:from-[#a195f9] hover:to-[#f2a1f2] text-white shadow-lg shadow-[#f2a1f2]/40 hover:shadow-xl hover:shadow-[#a195f9]/50 hover:scale-105":"bg-transparent border-2 border-[#f2a1f2]/30 text-[#f2a1f2] hover:text-white hover:bg-[#f2a1f2]/20 hover:border-[#f2a1f2]"}`,onClick:()=>i("hot"),"aria-pressed":n==="hot",children:[e.jsx("span",{className:"mr-1",children:""}),"HOT"]}),e.jsxs(S,{variant:n==="new"?"default":"outline",size:"sm",className:`px-5 py-2 rounded-xl text-sm font-bold transition-all duration-300 ${n==="new"?"bg-gradient-to-r from-[#707ff5] to-[#4b4bc3] hover:from-[#4b4bc3] hover:to-[#1e1e76] text-white shadow-lg shadow-[#707ff5]/40 hover:shadow-xl hover:shadow-[#4b4bc3]/50 hover:scale-105":"bg-transparent border-2 border-[#707ff5]/30 text-[#707ff5] hover:text-white hover:bg-[#707ff5]/20 hover:border-[#707ff5]"}`,onClick:()=>i("new"),"aria-pressed":n==="new",children:[e.jsx("span",{className:"mr-1",children:""}),"NEW"]})]}),e.jsxs(S,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground transition-colors duration-200 flex items-center space-x-1",onClick:()=>c("/browse"),children:[e.jsx("span",{className:"hidden sm:inline",children:"VIEW ALL"}),e.jsx("span",{className:"sm:hidden",children:"ALL"}),e.jsx(Tt,{className:"h-4 w-4"})]})]})]}),t.length===0?e.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-muted-foreground",children:"No recent series assigned yet. Use the admin panel to assign series to this section."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 2xl:grid-cols-4 gap-[4vw] sm:gap-6 w-full",children:t.slice(0,12).map((u,h)=>e.jsx($m,{item:u,navigate:c},u.id))})]})})}const $m=o.memo(function({item:s,navigate:r}){const[a,n]=o.useState(4),i=o.useRef(null),c=o.useRef(null),d=o.useRef(null),u=s.latestChapters||[];o.useEffect(()=>{const f=()=>{if(!i.current||!c.current||!d.current)return;const x=i.current.offsetHeight,y=d.current.offsetHeight,w=x-y-32,T=Math.floor(w/28),N=Math.max(1,Math.min(T,Math.min(4,u.length)));n(N)};f();const p=new ResizeObserver(f);return i.current&&p.observe(i.current),()=>{p.disconnect()}},[u.length]);const h=o.useCallback(()=>{r(`/manga/${s.id}`)},[r,s.id]),m=o.useCallback(f=>p=>{p.stopPropagation(),r(`/manga/${s.id}/chapter/${f}`)},[r,s.id]);return e.jsx("div",{ref:i,onClick:h,className:"group anime-card bg-gradient-to-br from-card/80 to-card/60 backdrop-blur-md rounded-2xl border border-border/40 p-0 transition-all duration-300 hover:border-primary/60 hover:from-card/90 hover:to-card/80 relative overflow-hidden hover:shadow-2xl hover:shadow-primary/20 hover:scale-[1.02] cursor-pointer",style:{aspectRatio:"4.5 / 2.5"},"data-testid":`popular-item-${s.id}`,children:e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"relative flex-shrink-0",style:{width:"42%"},children:e.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[s.coverImageUrl?e.jsx("img",{src:s.coverImageUrl,alt:s.title,loading:"lazy",decoding:"async",sizes:"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, (max-width: 1536px) 33vw, 25vw",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",onError:f=>{const p=f.target;p.src="/api/covers/placeholder"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/80 to-muted/60 flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-xs font-medium",children:"No cover"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-background/10"}),e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(ie,{className:"bg-gradient-to-r from-primary to-primary/80 text-primary-foreground text-[10px] px-2 py-1 rounded-full font-medium shadow-lg backdrop-blur-sm border border-primary/20",children:s.genres?.[0]||"Manhwa"})}),e.jsx("div",{className:"absolute bottom-2 left-2",children:e.jsx("div",{className:"bg-black/60 backdrop-blur-sm rounded-full p-1.5 shadow-lg",children:e.jsx($d,{className:"w-3 h-3 text-white",fill:"currentColor"})})})]})}),e.jsxs("div",{ref:c,className:"flex flex-col min-w-0 p-2 sm:p-3 lg:p-4",style:{width:"58%"},children:[e.jsx("div",{ref:d,className:"mb-2 sm:mb-3 flex-shrink-0",children:e.jsx("h3",{className:"text-foreground font-bold text-xs sm:text-sm lg:text-base line-clamp-2 mb-1 sm:mb-2 group-hover:text-primary transition-colors duration-300 leading-tight break-words",children:s.title})}),e.jsx("div",{className:"space-y-1 flex-1",children:u.length===0?e.jsx("div",{className:"text-muted-foreground text-xs text-center py-2",children:"No chapters yet"}):u.slice(0,a).map((f,p)=>e.jsxs("div",{onClick:m(f.chapterNumber),className:`group/chapter transition-all duration-300 cursor-pointer hover:shadow-md ${p===0?"bg-gradient-to-r from-primary/10 to-accent/10 border border-primary/30 hover:from-primary/20 hover:to-accent/20 hover:border-primary/50 relative overflow-hidden":p===1?"bg-card/40 border border-border/20 hover:bg-card/60 hover:border-border/40":"bg-card/30 border border-border/10 hover:bg-card/50 hover:border-border/30"} rounded-md px-2 py-1`,children:[p===0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 to-transparent opacity-0 group-hover/chapter:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"flex items-center justify-between relative z-10 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-1.5 min-w-0 flex-1",children:[f.hasLock?e.jsx(Es,{className:`w-2.5 h-2.5 ${p===0?"text-amber-500":"text-amber-500/80"} flex-shrink-0`}):e.jsx("div",{className:"w-2.5 h-2.5 flex items-center justify-center flex-shrink-0",children:e.jsx("div",{className:"w-1.5 h-1.5 bg-foreground/40 rounded-full"})}),e.jsxs("span",{className:`font-medium truncate text-[11px] sm:text-xs ${p===0?"text-foreground":p===1?"text-foreground/90":"text-foreground/80"}`,children:["Chapter ",f.chapterNumber]}),f.isNew&&e.jsx("div",{className:"bg-gradient-to-r from-red-500 to-red-600 text-white text-[8px] px-1 py-0.5 rounded-full font-medium shadow-sm hidden sm:inline-flex items-center",children:e.jsx(Gt,{className:"w-2 h-2"})})]}),e.jsx("span",{className:"text-muted-foreground text-[9px] sm:text-[10px] font-medium flex-shrink-0 ml-1",children:Om(f.createdAt)})]})]},f.id))})]})]})})});function zm(){return e.jsxs("div",{className:"relative overflow-hidden rounded-lg",children:[e.jsxs("div",{className:"hidden sm:block relative w-full h-56 sm:h-64 lg:h-72",children:[e.jsx(F,{className:"w-full h-full rounded-lg"}),e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx(F,{className:"w-20 h-6 rounded-full"})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 backdrop-blur-sm p-4 z-10",children:[e.jsx(F,{className:"h-5 w-3/4 mb-2"}),e.jsx(F,{className:"h-4 w-full"}),e.jsx(F,{className:"h-4 w-5/6 mt-1"})]})]}),e.jsxs("div",{className:"sm:hidden flex rounded-lg overflow-hidden mx-2",children:[e.jsx("div",{className:"relative w-28 flex-shrink-0",children:e.jsx(F,{className:"w-full h-full aspect-[3/4] rounded-none"})}),e.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center min-w-0 bg-black/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[e.jsx(F,{className:"h-4 flex-1"}),e.jsx(F,{className:"w-10 h-4 rounded-full flex-shrink-0"})]}),e.jsx(F,{className:"h-3 w-full mt-1"}),e.jsx(F,{className:"h-3 w-3/4 mt-1"})]})]}),e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}function Um(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();return o.useEffect(()=>{(async()=>{try{const c=await fetch("/api/sections/pinned");if(c.ok){const d=await c.json();s(d)}}catch{}finally{a(!1)}})()},[]),r?e.jsx("section",{className:"py-6 sm:py-8 w-full",children:e.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#f2a1f2] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30",children:e.jsx($t,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:e.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pinned"})})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:[...Array(6)].map((i,c)=>e.jsx(zm,{},c))})]})}):e.jsx("section",{className:"py-6 sm:py-8 w-full",children:e.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#f2a1f2] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30 transition-transform duration-300 ease-out hover:scale-105 transform-gpu",children:e.jsx($t,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),e.jsx("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:e.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pinned"})})]}),t.length===0?e.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg",children:e.jsx("p",{className:"text-muted-foreground",children:"No pinned series yet. Use the admin panel to pin series to this section."})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 w-full",children:t.slice(0,6).map(i=>e.jsx(Bm,{item:i,navigate:n},i.id))})]})})}const Bm=o.memo(function({item:s,navigate:r}){const a=o.useCallback(()=>{r(`/manga/${s.id}`)},[r,s.id]);return e.jsxs("div",{className:"group relative overflow-visible rounded-lg cursor-pointer transition-all duration-300 ease-out hover:shadow-[0_20px_60px_-15px_rgba(161,149,249,0.5)] hover:-translate-y-2 hover:scale-[1.02] will-change-transform transform-gpu",onClick:a,"data-testid":`pinned-item-${s.id}`,children:[e.jsx("div",{className:"absolute inset-0 rounded-lg opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out pointer-events-none z-30 ring-2 ring-[#a195f9]/60 shadow-[0_0_20px_rgba(161,149,249,0.4)]"}),e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out pointer-events-none z-20 overflow-hidden rounded-lg",children:e.jsx("div",{className:"absolute inset-0 -translate-x-full bg-gradient-to-r from-transparent via-white/30 to-transparent group-hover:animate-shimmer w-[200%] transform-gpu"})}),e.jsxs("div",{className:"hidden sm:block relative w-full h-56 sm:h-64 lg:h-72 rounded-lg overflow-hidden",children:[s.coverImageUrl?e.jsx("img",{src:s.coverImageUrl,alt:s.title,loading:"lazy",decoding:"async",className:"w-full h-full object-cover transition-transform duration-300 ease-out group-hover:scale-[1.1] transform-gpu",onError:n=>{const i=n.target;i.src="/api/covers/placeholder"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#a195f9]/30 to-[#707ff5]/20 flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-sm font-medium",children:"No cover"})}),e.jsx("div",{className:"absolute top-3 left-3 z-10 transition-transform duration-300 ease-out group-hover:scale-110 transform-gpu",children:e.jsxs(ie,{className:"bg-gradient-to-r from-[#a195f9] to-[#707ff5] text-white text-xs px-3 py-1 rounded-full font-semibold shadow-lg border-0",children:[e.jsx($t,{className:"w-3 h-3 mr-1 inline"}),"Pinned"]})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black/70 backdrop-blur-sm p-4 z-10 transition-all duration-300 ease-out group-hover:bg-black/80",children:[e.jsx("h3",{className:"text-white font-bold text-base sm:text-lg mb-1.5 line-clamp-2 sm:line-clamp-1 leading-tight transition-colors duration-300 ease-out group-hover:text-[#a195f9]",children:s.title}),e.jsx("p",{className:"text-white/90 text-xs sm:text-sm line-clamp-3 leading-relaxed",children:s.description||"No description available"})]})]}),e.jsxs("div",{className:"sm:hidden flex rounded-lg overflow-hidden mx-2",children:[e.jsx("div",{className:"relative w-28 flex-shrink-0",children:s.coverImageUrl?e.jsx("img",{src:s.coverImageUrl,alt:s.title,loading:"lazy",decoding:"async",className:"w-full h-full object-cover transition-transform duration-300 ease-out group-hover:scale-110 transform-gpu",onError:n=>{const i=n.target;i.src="/api/covers/placeholder"}}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-[#a195f9]/30 to-[#707ff5]/20 flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground text-xs",children:"No cover"})})}),e.jsxs("div",{className:"flex-1 p-3 flex flex-col justify-center min-w-0 bg-black/50 backdrop-blur-sm transition-all duration-300 ease-out group-hover:bg-black/60",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[e.jsx("h3",{className:"text-white font-bold text-sm line-clamp-2 leading-tight flex-1 transition-colors duration-300 ease-out group-hover:text-[#a195f9]",children:s.title}),e.jsx(ie,{className:"bg-gradient-to-r from-[#a195f9] to-[#707ff5] text-white text-[10px] px-2 py-0.5 rounded-full font-medium flex-shrink-0",children:e.jsx($t,{className:"w-2.5 h-2.5 inline"})})]}),e.jsx("p",{className:"text-white/80 text-xs line-clamp-2 leading-relaxed",children:s.description||"No description available"})]})]})]})});function Qm(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();o.useEffect(()=>{(async()=>{try{const _=await fetch("/api/sections/latest-updates");if(_.ok){const q=await _.json();s(q)}}catch{}finally{a(!1)}})()},[]);const[i,c]=o.useState(0),[d,u]=o.useState(0),[h,m]=o.useState(0),[f,p]=o.useState(!1),[x,y]=o.useState(new Set),[b,w]=o.useState(k());function k(){if(typeof window>"u")return"sm";const E=window.innerWidth;return E>=1280?"xl":E>=1024?"lg":E>=768?"md":"sm"}const T=E=>{switch(E){case"xl":return 8;case"lg":return 6;case"md":return 5;case"sm":return 4;default:return 3}},N=t.slice(0,T(b)),M=t[d];o.useRef(null),o.useRef([]),o.useEffect(()=>{const E=()=>{const _=k();_!==b&&(w(_),c(0),u(0))};return window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[b]),o.useEffect(()=>{t.length>0&&(i>=t.length||d>=t.length)&&(c(0),u(0))},[t.length,i,d]);const O=o.useCallback(()=>{N.length>0&&c(E=>(E+1)%N.length)},[N.length]);o.useEffect(()=>{if(!f&&N.length>0){const E=setInterval(O,3500);return()=>clearInterval(E)}},[f,O,N.length]),o.useEffect(()=>{(isNaN(i)||isNaN(d))&&(c(0),u(0))},[i,d]);const G=E=>{c(E),u(E)},v=(E,_)=>{y(_?q=>new Set(q).add(E):q=>{const I=new Set(q);return I.delete(E),I})};return o.useEffect(()=>{if(i!==d){m(d),u(i);const E=setTimeout(()=>{m(i)},500);return()=>clearTimeout(E)}},[i]),r?e.jsxs("div",{className:"mt-[4vh] sm:mt-[6vh] lg:mt-[8vh] w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#4b4bc3] via-[#707ff5] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#707ff5]/30",children:e.jsx(jr,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["EDITOR'S ",e.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pick !"})]})]}),e.jsx("div",{className:"px-[1%] sm:px-[2%] md:px-[3%] lg:px-[4%] xl:px-[6%] w-full",children:e.jsx("div",{className:"mb-[3vh] relative rounded-[8px] sm:rounded-[12px] lg:rounded-[16px] overflow-hidden shadow-2xl bg-gradient-to-br from-[#1e1e76]/95 via-[#4b4bc3]/90 to-[#1e1e76]/95",children:e.jsxs("div",{className:"flex flex-col-reverse lg:flex-row items-start min-h-[280px] sm:min-h-[320px] md:min-h-[361px] lg:min-h-[320px] xl:min-h-[350px]",children:[e.jsxs("div",{className:"w-full lg:w-[55%] p-4 sm:p-6 lg:p-8 xl:p-10 space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsx(F,{className:"h-8 sm:h-10 w-3/4"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(F,{className:"h-6 w-16 rounded-full"}),e.jsx(F,{className:"h-6 w-20 rounded-full"}),e.jsx(F,{className:"h-6 w-[4.5rem] rounded-full"})]}),e.jsx(F,{className:"h-16 sm:h-20 w-full"}),e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsx(F,{className:"h-24 sm:h-32 flex-1"}),e.jsx(F,{className:"h-24 sm:h-32 flex-1"}),e.jsx(F,{className:"h-24 sm:h-32 flex-1 hidden sm:block"}),e.jsx(F,{className:"h-24 sm:h-32 flex-1 hidden md:block"})]})]}),e.jsx("div",{className:"w-full lg:w-[45%] lg:absolute lg:right-0 lg:top-0 lg:h-full",children:e.jsx(F,{className:"w-full h-48 lg:h-full"})})]})})}),e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]}):t.length===0?e.jsxs("div",{className:"mt-[4vh] sm:mt-[6vh] lg:mt-[8vh] w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#4b4bc3] via-[#707ff5] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#707ff5]/30 transition-transform hover:scale-105",children:e.jsx(jr,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["EDITOR'S ",e.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pick !"})]})]}),e.jsx("div",{className:"text-center py-8 bg-muted/30 rounded-lg mx-[2%] sm:mx-[3%] lg:mx-[4%]",children:e.jsx("p",{className:"text-muted-foreground",children:"No latest updates assigned yet. Use the admin panel to assign series to this section."})})]}):e.jsxs("div",{className:"mt-[4vh] sm:mt-[6vh] lg:mt-[8vh] w-full",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10 px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#4b4bc3] via-[#707ff5] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#707ff5]/30 transition-transform hover:scale-105",children:e.jsx(jr,{className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white"})}),e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["EDITOR'S ",e.jsx("span",{className:"bg-gradient-to-r from-[#a195f9] to-[#f2a1f2] bg-clip-text text-transparent",children:"Pick !"})]})]}),e.jsx("div",{className:"px-[1%] sm:px-[2%] md:px-[3%] lg:px-[4%] xl:px-[6%] w-full",children:e.jsx("div",{className:"mb-[3vh] relative rounded-[8px] sm:rounded-[12px] lg:rounded-[16px] overflow-visible transition-all duration-500 shadow-2xl bg-gradient-to-br from-[#1e1e76]/95 via-[#4b4bc3]/90 to-[#1e1e76]/95",style:{backgroundImage:`linear-gradient(135deg, rgba(30,30,118,0.92), rgba(75,75,195,0.88), rgba(30,30,118,0.92)), url(${M?.coverImageUrl||""})`,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"},children:e.jsxs("div",{className:"rounded-[8px] sm:rounded-[12px] lg:rounded-[16px] overflow-visible",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-[#1e1e76]/90 via-[#4b4bc3]/85 to-[#1e1e76]/90 z-10"}),e.jsxs("div",{className:"relative z-20 flex flex-col-reverse lg:flex-row items-start min-h-[280px] sm:min-h-[320px] md:min-h-[361px] lg:min-h-[320px] xl:min-h-[350px]",children:[e.jsxs("div",{className:"w-full lg:w-[55%] p-4 sm:p-6 lg:p-8 xl:p-10 space-y-3 sm:space-y-4 lg:space-y-6",children:[e.jsx("h3",{className:"text-base sm:text-lg md:text-xl lg:text-2xl xl:text-3xl 2xl:text-4xl font-bold bg-gradient-to-r from-white via-gray-100 to-white bg-clip-text text-transparent leading-tight line-clamp-1",children:M?.title||"Loading..."}),e.jsx("div",{className:"flex flex-wrap items-center gap-[0.8vw]",children:M?.genres?M.genres.slice(0,5).map((E,_)=>e.jsx(ie,{className:`backdrop-blur-sm text-xs sm:text-sm px-[1.5vw] py-[0.5vh] border border-opacity-30 rounded-full transition-all duration-300 hover:scale-105 ${_===0?"bg-gradient-to-r from-[#f2a1f2]/25 to-[#a195f9]/25 text-[#f2a1f2] border-[#f2a1f2]/40 hover:from-[#f2a1f2]/35 hover:to-[#a195f9]/35 hover:border-[#f2a1f2]/60":_===1?"bg-gradient-to-r from-[#a195f9]/25 to-[#707ff5]/25 text-[#c7bfff] border-[#a195f9]/40 hover:from-[#a195f9]/35 hover:to-[#707ff5]/35 hover:border-[#a195f9]/60":_===2?"bg-gradient-to-r from-[#707ff5]/25 to-[#4b4bc3]/25 text-[#a195f9] border-[#707ff5]/40 hover:from-[#707ff5]/35 hover:to-[#4b4bc3]/35 hover:border-[#707ff5]/60":_===3?"bg-gradient-to-r from-[#f2a1f2]/25 to-[#707ff5]/25 text-[#f2a1f2] border-[#f2a1f2]/40 hover:from-[#f2a1f2]/35 hover:to-[#707ff5]/35 hover:border-[#f2a1f2]/60":"bg-gradient-to-r from-[#a195f9]/25 to-[#f2a1f2]/25 text-[#c7bfff] border-[#a195f9]/40 hover:from-[#a195f9]/35 hover:to-[#f2a1f2]/35 hover:border-[#a195f9]/60"}`,children:E},E)):e.jsxs(e.Fragment,{children:[e.jsx(ie,{className:"bg-gradient-to-r from-[#f2a1f2]/25 to-[#a195f9]/25 backdrop-blur-sm text-[#f2a1f2] text-xs sm:text-sm px-[1.5vw] py-[0.5vh] border border-[#f2a1f2]/40 rounded-full hover:from-[#f2a1f2]/35 hover:to-[#a195f9]/35 hover:border-[#f2a1f2]/60 transition-all duration-300 hover:scale-105",children:"shoujo"}),e.jsx(ie,{className:"bg-gradient-to-r from-[#a195f9]/25 to-[#707ff5]/25 backdrop-blur-sm text-[#c7bfff] text-xs sm:text-sm px-[1.5vw] py-[0.5vh] border border-[#a195f9]/40 rounded-full hover:from-[#a195f9]/35 hover:to-[#707ff5]/35 hover:border-[#a195f9]/60 transition-all duration-300 hover:scale-105",children:"Drama"})]})}),e.jsx("div",{className:"w-full h-[0.15vh] bg-gradient-to-r from-transparent via-white/30 to-transparent"}),e.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-base xl:text-lg text-gray-300 leading-relaxed line-clamp-2 max-w-lg",children:M?.description||"No description available"}),e.jsx("div",{className:"relative py-4",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:e.jsx("div",{className:"flex flex-nowrap gap-2 sm:gap-3 md:gap-4 lg:gap-2 xl:gap-3 w-[78.7%] md:w-[58.6%] lg:w-[90.5%] mx-auto",children:N.map((E,_)=>e.jsx("div",{className:`cursor-pointer group flex-shrink min-w-0 flex-1 max-w-[86%] transition-all ease-out duration-300 ${_===i?"scale-105 opacity-100":"opacity-60 hover:opacity-100 hover:scale-[1.03] hover:-translate-y-1"}`,onClick:()=>G(_),onMouseEnter:()=>v(_,!0),onMouseLeave:()=>v(_,!1),"data-testid":`carousel-card-${E.id}`,children:e.jsxs("div",{className:"relative w-full aspect-[3/4] rounded-xl overflow-hidden transition-all ease-out duration-300 group-hover:shadow-[0_12px_40px_-10px_rgba(161,149,249,0.6)] ring-1 ring-white/10 backdrop-blur-sm",children:[e.jsx("div",{className:"absolute inset-0 rounded-xl opacity-0 group-hover:opacity-100 transition-all duration-300 pointer-events-none z-10 ring-2 ring-[#a195f9]/70 shadow-lg shadow-[#a195f9]/40"}),e.jsx("img",{src:E.coverImageUrl,alt:E.title,width:240,height:320,className:"w-full h-full object-cover transition-transform duration-300 ease-out group-hover:scale-110",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent transform -skew-x-12 -translate-x-full opacity-0 group-hover:opacity-100 group-hover:translate-x-full transition-all duration-500 ease-out"})}),_===i&&e.jsx("div",{className:"absolute inset-0 rounded-xl ring-2 ring-[#a195f9] shadow-xl shadow-[#a195f9]/60 ring-opacity-100 animate-pulse z-20"})]})},E.id))})})]}),e.jsxs("div",{className:"relative w-full lg:w-[45%] flex justify-center lg:justify-center p-2 sm:p-4 md:pt-4 lg:pt-0 lg:pr-4 lg:pb-4 lg:pl-4 xl:pr-6 xl:pb-6 xl:pl-6 overflow-visible md:items-start lg:items-start lg:-mt-16 xl:-mt-20",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:[e.jsx("div",{className:"hidden lg:block relative overflow-visible group z-40",children:e.jsx("div",{className:"w-72 md:w-[240px] lg:w-[319px] xl:w-[357px] 2xl:w-[391px] aspect-[3/4] rounded-xl overflow-visible cursor-pointer relative z-30",children:e.jsxs("div",{className:"relative w-full h-full rounded-xl overflow-hidden shadow-2xl transition-all duration-300 ease-out group-hover:scale-105 group-hover:-translate-y-4 group-hover:-translate-x-2 group-hover:-rotate-2 group-hover:shadow-[0_40px_80px_-20px_rgba(0,0,0,0.8)] transform-gpu z-50 ring-2 ring-white/5 backdrop-blur-sm",children:[e.jsxs("div",{className:"relative w-full h-full",children:[t[h]?.coverImageUrl&&e.jsx("img",{src:t[h]?.coverImageUrl,alt:t[h]?.title,width:357,height:476,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ease-in-out ${d!==h?"opacity-0":"opacity-100"}`,loading:"lazy"}),M?.coverImageUrl?e.jsx("img",{src:M.coverImageUrl,alt:M.title,width:357,height:476,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ease-in-out ${d!==h?"opacity-100":"opacity-0"}`,loading:"lazy"}):e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground",children:"No cover"})})]}),e.jsx("div",{className:"absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out",children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent transform -skew-x-12 -translate-x-full group-hover:translate-x-full transition-transform duration-1200 ease-out"})}),e.jsx("div",{className:"absolute bottom-4 right-4 z-30 opacity-0 group-hover:opacity-100 transition-all duration-300 ease-out",children:e.jsx(S,{onClick:()=>n(`/manga/${M?.id}`),className:"bg-gradient-to-r from-[#707ff5] to-[#a195f9] hover:from-[#4b4bc3] hover:to-[#707ff5] text-white px-3 py-1.5 md:px-4 md:py-2 lg:px-4 lg:py-2 xl:px-5 xl:py-3 rounded-lg text-xs sm:text-sm md:text-sm lg:text-sm xl:text-base font-medium transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 backdrop-blur-sm border border-[#a195f9]/30","data-testid":"read-featured",children:"Read it now"})})]})})}),e.jsx("div",{className:"lg:hidden relative flex justify-center -mt-8 sm:-mt-12 md:-mt-16",children:e.jsxs("div",{className:"w-[55vw] max-w-[240px] h-[73vw] max-h-[320px] sm:w-[45vw] sm:max-w-[300px] sm:h-[60vw] sm:max-h-[400px] md:w-[31.8vw] md:max-w-[302px] md:h-[42.7vw] md:max-h-[403px] rounded-2xl overflow-hidden shadow-2xl relative group cursor-pointer ring-2 ring-white/10 transition-all duration-300",children:[e.jsxs("div",{className:"relative w-full h-full",children:[t[h]?.coverImageUrl&&e.jsx("img",{src:t[h]?.coverImageUrl,alt:t[h]?.title,width:302,height:403,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ease-in-out ${d!==h?"opacity-0":"opacity-100"}`,loading:"lazy"}),M?.coverImageUrl?e.jsx("img",{src:M.coverImageUrl,alt:M.title,width:302,height:403,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-300 ease-in-out ${d!==h?"opacity-100":"opacity-0"}`,loading:"lazy"}):e.jsx("div",{className:"absolute inset-0 w-full h-full bg-muted flex items-center justify-center",children:e.jsx("span",{className:"text-muted-foreground",children:"No cover"})})]}),e.jsx("div",{className:"absolute bottom-4 right-4 z-30 opacity-100 lg:opacity-0 lg:group-hover:opacity-100 transition-opacity duration-500",children:e.jsx(S,{onClick:()=>n(`/manga/${M?.id}`),className:"bg-gradient-to-r from-[#707ff5] to-[#a195f9] hover:from-[#4b4bc3] hover:to-[#707ff5] text-white px-2 py-1.5 sm:px-3 sm:py-2 md:px-3 md:py-2 rounded-lg text-[10px] sm:text-xs md:text-sm font-medium transition-all duration-300 shadow-lg hover:shadow-xl hover:scale-105 backdrop-blur-sm border border-[#a195f9]/30","data-testid":"read-featured",children:"Read it now"})})]})})]})]})]})})})]})}function os({variant:t="default"}){const s=t==="trending"?"bg-gradient-to-br from-muted/40 to-muted/20":"bg-card";return e.jsxs("div",{className:`flex items-center w-full rounded-xl relative overflow-hidden ${s}`,children:[e.jsxs("div",{className:"relative w-[90px] lg:w-[102px] flex-shrink-0",children:[e.jsx("div",{className:"aspect-[3/4] overflow-hidden rounded-l-xl",children:e.jsx(F,{className:"w-full h-full rounded-none"})}),t==="trending"&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsx(F,{className:"w-8 h-8 lg:w-10 lg:h-10 rounded-full"})})]}),e.jsxs("div",{className:"flex-1 p-3 lg:p-4 min-w-0",children:[e.jsxs("div",{className:"mb-3 lg:mb-4",children:[e.jsx(F,{className:"h-4 lg:h-5 w-full mb-1.5"}),e.jsx(F,{className:"h-4 lg:h-5 w-2/3"})]}),e.jsxs("div",{className:"flex gap-1.5 flex-wrap",children:[e.jsx(F,{className:"h-5 w-16 rounded-full"}),e.jsx(F,{className:"h-5 w-20 rounded-full"}),e.jsx(F,{className:"h-5 w-14 rounded-full"})]})]}),e.jsx("div",{className:"absolute inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}function Km(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();o.useEffect(()=>{(async()=>{try{const h=await fetch("/api/sections/trending");if(h.ok){const m=await h.json();s(m)}}catch{}finally{a(!1)}})()},[]);const i=u=>{switch(u){case 1:return{cardBg:"bg-gradient-to-br from-[#f2a1f2] via-[#a195f9] to-[#f2a1f2]",badgeBg:"bg-gradient-to-br from-[#1e1e76] to-[#4b4bc3]",badgeText:"text-[#f2a1f2]",genreBg:"rgba(242, 161, 242, 0.3)",genreBorder:"rgba(242, 161, 242, 0.6)"};case 2:return{cardBg:"bg-gradient-to-br from-[#707ff5] via-[#4b4bc3] to-[#707ff5]",badgeBg:"bg-gradient-to-br from-[#f2a1f2] to-[#a195f9]",badgeText:"text-[#1e1e76]",genreBg:"rgba(112, 127, 245, 0.3)",genreBorder:"rgba(112, 127, 245, 0.6)"};case 3:return{cardBg:"bg-gradient-to-br from-[#a195f9] via-[#707ff5] to-[#a195f9]",badgeBg:"bg-gradient-to-br from-[#4b4bc3] to-[#1e1e76]",badgeText:"text-[#f2a1f2]",genreBg:"rgba(161, 149, 249, 0.3)",genreBorder:"rgba(161, 149, 249, 0.6)"};default:return{cardBg:"bg-gradient-to-br from-[#1e1e76] via-[#4b4bc3] to-[#1e1e76]",badgeBg:"bg-gradient-to-br from-[#707ff5] to-[#a195f9]",badgeText:"text-[#1e1e76]",genreBg:"rgba(75, 75, 195, 0.25)",genreBorder:"rgba(75, 75, 195, 0.5)"}}};if(r)return e.jsx("section",{className:"py-7 sm:py-10 w-full",children:e.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#a195f9] to-[#707ff5] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white",children:e.jsx("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"})})}),e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Most ",e.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#a195f9] bg-clip-text text-transparent",children:"Popular"})]})]}),e.jsxs("div",{className:"flex flex-col gap-12 px-6",children:[e.jsx("div",{className:"w-full md:w-[38%] md:mx-auto",children:e.jsx(os,{variant:"trending"})}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-6 md:gap-12",children:[e.jsx("div",{className:"w-full md:w-[38%]",children:e.jsx(os,{variant:"trending"})}),e.jsx("div",{className:"w-full md:w-[38%]",children:e.jsx(os,{variant:"trending"})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[e.jsx("div",{className:"w-full md:w-[46%]",children:e.jsx(os,{variant:"trending"})}),e.jsx("div",{className:"w-full md:w-[46%]",children:e.jsx(os,{variant:"trending"})})]})]})]})});const c=t.slice(0,5).map((u,h)=>({...u,rank:h+1,thumbnail:u.coverImageUrl||"/placeholder-cover.jpg"})),d=u=>{const h=i(u.rank);return e.jsxs("div",{onClick:()=>n(`/manga/${u.id}`),className:`group flex items-center w-full rounded-xl transition-all duration-300 hover:shadow-[0_0_20px_rgba(255,255,255,0.15)] relative overflow-hidden cursor-pointer ${h.cardBg}`,"data-testid":`trending-manga-${u.id}`,children:[e.jsx("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 pointer-events-none transition-opacity duration-700",children:e.jsx("div",{className:"absolute inset-0 translate-x-[-100%] group-hover:translate-x-[100%] bg-gradient-to-r from-transparent via-white/10 to-transparent transition-transform duration-1000"})}),e.jsxs("div",{className:"relative w-[90px] lg:w-[102px] flex-shrink-0",children:[e.jsx("div",{className:"aspect-[3/4] overflow-hidden rounded-l-xl",children:e.jsx("img",{alt:u.title,width:102,height:136,loading:"lazy",decoding:"async",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105",src:u.thumbnail,onError:m=>{const f=m.target;f.src="/api/covers/placeholder"}})}),e.jsx("div",{className:`absolute top-2 left-2 w-8 h-8 lg:w-10 lg:h-10 ${h.badgeBg} rounded-full flex items-center justify-center shadow-lg ring-2 ring-white/20`,children:e.jsx("span",{className:`text-sm lg:text-base font-bold ${h.badgeText}`,children:u.rank})})]}),e.jsxs("div",{className:"flex-1 p-3 lg:p-4 min-w-0",children:[e.jsx("div",{className:"font-bold text-sm lg:text-lg line-clamp-2 transition-colors duration-300 group-hover:text-white mb-4 lg:mb-3",children:u.title}),u.genres&&u.genres.length>0&&e.jsx("div",{className:"flex gap-1.5 flex-wrap",children:u.genres.slice(0,3).map((m,f)=>e.jsx("div",{className:"rounded-full px-2 py-0.5 text-xs border transition-transform duration-300 group-hover:scale-105",style:{backgroundColor:h.genreBg,borderColor:h.genreBorder},children:m},f))})]})]},u.rank)};return e.jsx("section",{className:"py-7 sm:py-10 w-full",children:e.jsxs("div",{className:"max-w-none mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex items-center gap-3 sm:gap-4 mb-10 sm:mb-8 lg:mb-10",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 lg:w-14 lg:h-14 bg-gradient-to-br from-[#f2a1f2] via-[#a195f9] to-[#707ff5] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30 transition-transform hover:scale-105",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",className:"w-5 h-5 sm:w-6 sm:h-6 lg:w-7 lg:h-7 text-white",children:e.jsx("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 0 0-1.071-.136 9.742 9.742 0 0 0-3.539 6.176 7.547 7.547 0 0 1-1.705-1.715.75.75 0 0 0-1.152-.082A9 9 0 1 0 15.68 4.534a7.46 7.46 0 0 1-2.717-2.248ZM15.75 14.25a3.75 3.75 0 1 1-7.313-1.172c.628.465 1.35.81 2.133 1a5.99 5.99 0 0 1 1.925-3.546 3.75 3.75 0 0 1 3.255 3.718Z",clipRule:"evenodd"})})}),e.jsxs("h2",{className:"text-xl sm:text-2xl lg:text-3xl xl:text-4xl font-bold text-white",children:["Most ",e.jsx("span",{className:"bg-gradient-to-r from-[#f2a1f2] to-[#a195f9] bg-clip-text text-transparent",children:"Popular"})]})]}),t.length===0?e.jsx("div",{className:"text-center text-gray-400 py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No popular items to display"})}):e.jsxs("div",{className:"flex flex-col gap-12 px-6",children:[c[0]&&e.jsx("div",{className:"w-full md:w-[38%] md:mx-auto",children:d(c[0])}),(c[1]||c[2])&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-6 md:gap-12",children:[c[1]&&e.jsx("div",{className:"w-full md:w-[38%]",children:d(c[1])}),c[2]&&e.jsx("div",{className:"w-full md:w-[38%]",children:d(c[2])})]}),(c[3]||c[4])&&e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-6",children:[c[3]&&e.jsx("div",{className:"w-full md:w-[46%]",children:d(c[3])}),c[4]&&e.jsx("div",{className:"w-full md:w-[46%]",children:d(c[4])})]})]})]})})}var $o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},kn=Dt.createContext&&Dt.createContext($o),Vm=["attr","size","title"];function Hm(t,s){if(t==null)return{};var r=Wm(t,s),a,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)a=i[n],!(s.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(t,a)&&(r[a]=t[a])}return r}function Wm(t,s){if(t==null)return{};var r={};for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){if(s.indexOf(a)>=0)continue;r[a]=t[a]}return r}function Gs(){return Gs=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var r=arguments[s];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Gs.apply(this,arguments)}function Cn(t,s){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);s&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,a)}return r}function Xs(t){for(var s=1;s<arguments.length;s++){var r=arguments[s]!=null?arguments[s]:{};s%2?Cn(Object(r),!0).forEach(function(a){Gm(t,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach(function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(r,a))})}return t}function Gm(t,s,r){return s=Xm(s),s in t?Object.defineProperty(t,s,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[s]=r,t}function Xm(t){var s=Ym(t,"string");return typeof s=="symbol"?s:s+""}function Ym(t,s){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var a=r.call(t,s);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(t)}function zo(t){return t&&t.map((s,r)=>Dt.createElement(s.tag,Xs({key:r},s.attr),zo(s.child)))}function ja(t){return s=>Dt.createElement(Jm,Gs({attr:Xs({},t.attr)},s),zo(t.child))}function Jm(t){var s=r=>{var{attr:a,size:n,title:i}=t,c=Hm(t,Vm),d=n||r.size||"1em",u;return r.className&&(u=r.className),t.className&&(u=(u?u+" ":"")+t.className),Dt.createElement("svg",Gs({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,c,{className:u,style:Xs(Xs({color:t.color||r.color},r.style),t.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&Dt.createElement("title",null,i),t.children)};return kn!==void 0?Dt.createElement(kn.Consumer,null,r=>s(r)):s($o)}function Zm(t){return ja({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M524.531,69.836a1.5,1.5,0,0,0-.764-.7A485.065,485.065,0,0,0,404.081,32.03a1.816,1.816,0,0,0-1.923.91,337.461,337.461,0,0,0-14.9,30.6,447.848,447.848,0,0,0-134.426,0,309.541,309.541,0,0,0-15.135-30.6,1.89,1.89,0,0,0-1.924-.91A483.689,483.689,0,0,0,116.085,69.137a1.712,1.712,0,0,0-.788.676C39.068,183.651,18.186,294.69,28.43,404.354a2.016,2.016,0,0,0,.765,1.375A487.666,487.666,0,0,0,176.02,479.918a1.9,1.9,0,0,0,2.063-.676A348.2,348.2,0,0,0,208.12,430.4a1.86,1.86,0,0,0-1.019-2.588,321.173,321.173,0,0,1-45.868-21.853,1.885,1.885,0,0,1-.185-3.126c3.082-2.309,6.166-4.711,9.109-7.137a1.819,1.819,0,0,1,1.9-.256c96.229,43.917,200.41,43.917,295.5,0a1.812,1.812,0,0,1,1.924.233c2.944,2.426,6.027,4.851,9.132,7.16a1.884,1.884,0,0,1-.162,3.126,301.407,301.407,0,0,1-45.89,21.83,1.875,1.875,0,0,0-1,2.611,391.055,391.055,0,0,0,30.014,48.815,1.864,1.864,0,0,0,2.063.7A486.048,486.048,0,0,0,610.7,405.729a1.882,1.882,0,0,0,.765-1.352C623.729,277.594,590.933,167.465,524.531,69.836ZM222.491,337.58c-28.972,0-52.844-26.587-52.844-59.239S193.056,219.1,222.491,219.1c29.665,0,53.306,26.82,52.843,59.239C275.334,310.993,251.924,337.58,222.491,337.58Zm195.38,0c-28.971,0-52.843-26.587-52.843-59.239S388.437,219.1,417.871,219.1c29.667,0,53.307,26.82,52.844,59.239C470.715,310.993,447.538,337.58,417.871,337.58Z"},child:[]}]})(t)}function eh(t){return ja({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function th(t){return ja({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"},child:[]}]})(t)}function ss(){return e.jsx("footer",{className:"w-full bg-gradient-to-b from-background to-[#1e1e76] border-t border-border/40 mt-16 sm:mt-20 lg:mt-24",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20",children:e.jsxs("div",{className:"flex flex-col items-center space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-3 group",children:[e.jsx("img",{src:"/amourscans-icon.png",alt:"AmourScans",className:"w-10 h-10 sm:w-12 sm:h-12 object-contain will-change-transform transition-transform duration-150 ease-out group-hover:scale-110"}),e.jsx("span",{className:"text-xl sm:text-2xl lg:text-3xl font-bold bg-gradient-to-r from-[#a195f9] via-[#f2a1f2] to-[#f2a1f2] bg-clip-text text-transparent",children:"AmourScans"})]}),e.jsxs("div",{className:"text-center space-y-3 sm:space-y-4 max-w-2xl",children:[e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground",children:"All rights reserved"}),e.jsx("p",{className:"text-sm sm:text-base lg:text-lg text-[#a195f9]/80 leading-relaxed px-4",children:"Find Your Love Story - Your destination for exploring, reading, and enjoying romantic manga, manhwa and manhua."})]}),e.jsxs("div",{className:"flex items-center gap-6 sm:gap-8",children:[e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"group relative","aria-label":"Twitter",children:e.jsx("div",{className:"w-11 h-11 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-[#707ff5]/20 to-[#a195f9]/20 border border-[#707ff5]/30 flex items-center justify-center will-change-transform transition-all duration-150 ease-out group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-[#707ff5]/40 group-hover:border-[#707ff5]/60",children:e.jsx(th,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#a195f9] group-hover:text-[#707ff5] transition-colors duration-150"})})}),e.jsx("a",{href:"https://discord.com",target:"_blank",rel:"noopener noreferrer",className:"group relative","aria-label":"Discord",children:e.jsx("div",{className:"w-11 h-11 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-[#a195f9]/20 to-[#f2a1f2]/20 border border-[#a195f9]/30 flex items-center justify-center will-change-transform transition-all duration-150 ease-out group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-[#a195f9]/40 group-hover:border-[#a195f9]/60",children:e.jsx(Zm,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#f2a1f2] group-hover:text-[#a195f9] transition-colors duration-150"})})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"group relative","aria-label":"Instagram",children:e.jsx("div",{className:"w-11 h-11 sm:w-12 sm:h-12 rounded-full bg-gradient-to-br from-[#f2a1f2]/20 to-[#a195f9]/20 border border-[#f2a1f2]/30 flex items-center justify-center will-change-transform transition-all duration-150 ease-out group-hover:scale-110 group-hover:shadow-lg group-hover:shadow-[#f2a1f2]/40 group-hover:border-[#f2a1f2]/60",children:e.jsx(eh,{className:"w-5 h-5 sm:w-6 sm:h-6 text-[#f2a1f2] group-hover:text-[#a195f9] transition-colors duration-150"})})})]}),e.jsx("div",{className:"w-full max-w-xs h-px bg-gradient-to-r from-transparent via-border to-transparent"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-2 sm:gap-4 text-xs sm:text-sm text-muted-foreground/60",children:[e.jsxs("p",{children:[" ",new Date().getFullYear()," AmourScans. Made with love for manga fans."]}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("a",{href:"/dmca",className:"text-muted-foreground/60 hover:text-[#a195f9] transition-colors duration-150",children:"DMCA"}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("a",{href:"/privacy",className:"text-muted-foreground/60 hover:text-[#a195f9] transition-colors duration-150",children:"Privacy Policy"}),e.jsx("span",{className:"hidden sm:inline",children:""}),e.jsx("a",{href:"/terms",className:"text-muted-foreground/60 hover:text-[#a195f9] transition-colors duration-150",children:"Terms of Service"})]})]})})})}function sh(t,s){const{data:r,isLoading:a,error:n}=be({queryKey:["ads",t,s],queryFn:async()=>{const i=new URLSearchParams({page:t});s&&i.append("location",s);const c=await fetch(`/api/ads/placement/${t}?${i.toString()}`);if(!c.ok)throw new Error("Failed to fetch ads");return c.json()},staleTime:3e5,refetchOnWindowFocus:!1});return{ads:r||[],isLoading:a,error:n}}function rh(){const t=o.useRef(new Set),s=Ie({mutationFn:async a=>{const n=await fetch(`/api/ads/${a}/impression`,{method:"POST"});if(!n.ok)throw new Error("Failed to track impression");return n.json()},onSuccess:(a,n)=>{t.current.add(n)}});return{trackImpression:a=>{t.current.has(a)||s.mutate(a)}}}function ah(){const t=Ie({mutationFn:async r=>{const a=await fetch(`/api/ads/${r}/click`,{method:"POST"});if(!a.ok)throw new Error("Failed to track click");return a.json()}});return{trackClick:r=>{t.mutate(r)}}}function nh(t,s=!0){const{trackImpression:r}=rh(),a=o.useRef(!1);o.useEffect(()=>{if(s&&!a.current){const n=setTimeout(()=>{r(t),a.current=!0},1e3);return()=>clearTimeout(n)}},[t,s,r])}async function ih(){const t=await fetch("/api/settings/public/ad-intensity");return t.ok?t.json():{level:3,description:"Standard",enabled:!0}}function oh(){const{data:t,isLoading:s,error:r}=be({queryKey:["ad-intensity"],queryFn:ih,staleTime:3e5,refetchInterval:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0,retry:1});return{level:t?.level??3,description:t?.description??"Standard",enabled:t?.enabled??!0,isLoading:s,error:r}}function Na({page:t,location:s,type:r,className:a,maxAds:n=1}){const{ads:i,isLoading:c}=sh(t,s),{trackClick:d}=ah(),{level:u,enabled:h}=oh(),{data:m}=be({queryKey:["/api/subscriptions/current"],queryFn:async()=>{const y=await fetch("/api/subscriptions/current",{credentials:"include"});if(y.status===404)return null;if(!y.ok)throw new Error("Failed to fetch subscription");return y.json()},staleTime:6e4,retry:1});if(!h||m?.status==="active"&&(m?.isAdFree==="true"||m?.isAdFree===!0))return null;const p=Math.min(n,(()=>{const y=t==="homepage"||t==="search_results";switch(u){case 1:return 2;case 2:return y?4:2;case 3:return y?6:3;case 4:return y?8:4;case 5:return y?15:8;default:return y?6:3}})()),x=i.filter(y=>{if(r&&y.type!==r||u<=2&&y.type==="popup")return!1;const b=new Date;return y.startDate&&new Date(y.startDate)>b||y.endDate&&new Date(y.endDate)<b?!1:y.isActive==="true"}).sort((y,b)=>b.displayOrder-y.displayOrder).slice(0,p);return c||x.length===0?null:e.jsx("div",{className:C("ad-container",a),children:x.map(y=>e.jsx(lh,{ad:y,trackClick:d},y.id))})}function lh({ad:t,trackClick:s}){const[r,a]=o.useState(!1),n=o.useRef(null);nh(t.id,r),o.useEffect(()=>{const d=new IntersectionObserver(([u])=>{u.isIntersecting&&a(!0)},{threshold:.5});return n.current&&d.observe(n.current),()=>{n.current&&d.unobserve(n.current)}},[]);const i=()=>{s(t.id),window.open(t.linkUrl,"_blank","noopener,noreferrer")},c=()=>{switch(t.type){case"banner":return"w-full aspect-[6/1] sm:aspect-[8/1]";case"sidebar":return"w-full aspect-[2/3]";case"inline":return"w-full aspect-[4/1] sm:aspect-[5/1]";case"popup":return"w-full aspect-[3/2]";default:return"w-full aspect-[4/1]"}};return e.jsx("div",{ref:n,className:"mb-4",children:e.jsxs(Xe,{className:C("overflow-hidden cursor-pointer transition-all duration-300 hover:shadow-lg hover:scale-[1.02] group relative",c()),onClick:i,children:[e.jsx("div",{className:"absolute top-2 right-2 z-10 bg-black/50 text-white text-xs px-2 py-1 rounded backdrop-blur-sm",children:"Advertisement"}),e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("img",{src:t.imageUrl,alt:t.title,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-sm sm:text-base line-clamp-1",children:t.title}),t.description&&e.jsx("p",{className:"text-xs sm:text-sm text-gray-200 line-clamp-2 mt-1",children:t.description})]}),e.jsx(Kd,{className:"w-5 h-5 ml-2 flex-shrink-0"})]})})})]})]})})}function Uo({page:t,location:s,className:r}){return e.jsx(Na,{page:t,location:s,type:"banner",className:r,maxAds:1})}function ch({page:t,location:s,className:r}){return e.jsx(Na,{page:t,location:s,type:"inline",className:r,maxAds:1})}function dh(){return e.jsxs("div",{className:"min-h-screen bg-background w-full overflow-x-hidden optimized-scroll",children:[e.jsx(Ke,{description:"Explore thousands of manga and manhwa series with ratings, latest updates, and trending recommendations. Read your favorite manga online at AmourScans.",keywords:"manga, manhwa, webtoon, read manga online, manga reader, latest manga updates, trending manga"}),e.jsx(at,{}),e.jsx(Mm,{}),e.jsx("main",{id:"main-content",role:"main","aria-label":"Main content",children:e.jsx("div",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:e.jsxs("div",{className:"space-y-8 card-grid",children:[e.jsx(Uo,{page:"homepage",location:"top_banner",className:"mb-6"}),e.jsx(Um,{}),e.jsx(qm,{}),e.jsx(Qm,{}),e.jsx(Km,{})]})})}),e.jsx(ss,{})]})}const In=(t,s,r)=>{if(t&&"reportValidity"in t){const a=Dr(r,s);t.setCustomValidity(a&&a.message||""),t.reportValidity()}},Bo=(t,s)=>{for(const r in s.fields){const a=s.fields[r];a&&a.ref&&"reportValidity"in a.ref?In(a.ref,r,t):a.refs&&a.refs.forEach(n=>In(n,r,t))}},uh=(t,s)=>{s.shouldUseNativeValidation&&Bo(t,s);const r={};for(const a in t){const n=Dr(s.fields,a),i=Object.assign(t[a]||{},{ref:n&&n.ref});if(mh(s.names||Object.keys(t),a)){const c=Object.assign({},Dr(r,a));yr(c,"root",i),yr(r,a,c)}else yr(r,a,i)}return r},mh=(t,s)=>t.some(r=>r.startsWith(s+"."));var hh=function(t,s){for(var r={};t.length;){var a=t[0],n=a.code,i=a.message,c=a.path.join(".");if(!r[c])if("unionErrors"in a){var d=a.unionErrors[0].errors[0];r[c]={message:d.message,type:d.code}}else r[c]={message:i,type:n};if("unionErrors"in a&&a.unionErrors.forEach(function(m){return m.errors.forEach(function(f){return t.push(f)})}),s){var u=r[c].types,h=u&&u[a.code];r[c]=Dc(c,s,r,n,h?[].concat(h,a.message):a.message)}t.shift()}return r},or=function(t,s,r){return r===void 0&&(r={}),function(a,n,i){try{return Promise.resolve((function(c,d){try{var u=Promise.resolve(t[r.mode==="sync"?"parse":"parseAsync"](a,s)).then(function(h){return i.shouldUseNativeValidation&&Bo({},i),{errors:{},values:r.raw?a:h}})}catch(h){return d(h)}return u&&u.then?u.then(void 0,d):u})(0,function(c){if((function(d){return Array.isArray(d?.errors)})(c))return{values:{},errors:uh(hh(c.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw c}))}catch(c){return Promise.reject(c)}}},fh="Label",Qo=o.forwardRef((t,s)=>e.jsx(ke.label,{...t,ref:s,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(t.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));Qo.displayName=fh;var Ko=Qo;const ph=ts("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Et=o.forwardRef(({className:t,...s},r)=>e.jsx(Ko,{ref:r,className:C(ph(),t),...s}));Et.displayName=Ko.displayName;const lr=Mc,Vo=o.createContext({}),gt=({...t})=>e.jsx(Vo.Provider,{value:{name:t.name},children:e.jsx(Fc,{...t})}),cr=()=>{const t=o.useContext(Vo),s=o.useContext(Ho),{getFieldState:r,formState:a}=Lc(),n=r(t.name,a);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:i}=s;return{id:i,name:t.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...n}},Ho=o.createContext({}),ct=o.forwardRef(({className:t,...s},r)=>{const a=o.useId();return e.jsx(Ho.Provider,{value:{id:a},children:e.jsx("div",{ref:r,className:C("space-y-2",t),...s})})});ct.displayName="FormItem";const dt=o.forwardRef(({className:t,...s},r)=>{const{error:a,formItemId:n}=cr();return e.jsx(Et,{ref:r,className:C(a&&"text-destructive",t),htmlFor:n,...s})});dt.displayName="FormLabel";const ut=o.forwardRef(({...t},s)=>{const{error:r,formItemId:a,formDescriptionId:n,formMessageId:i}=cr();return e.jsx(Bn,{ref:s,id:a,"aria-describedby":r?`${n} ${i}`:`${n}`,"aria-invalid":!!r,...t})});ut.displayName="FormControl";const xh=o.forwardRef(({className:t,...s},r)=>{const{formDescriptionId:a}=cr();return e.jsx("p",{ref:r,id:a,className:C("text-sm text-muted-foreground",t),...s})});xh.displayName="FormDescription";const mt=o.forwardRef(({className:t,children:s,...r},a)=>{const{error:n,formMessageId:i}=cr(),c=n?String(n?.message??""):s;return c?e.jsx("p",{ref:a,id:i,className:C("text-sm font-medium text-destructive",t),...r,children:c}):null});mt.displayName="FormMessage";const Z=Symbol.for("drizzle:entityKind");function Me(t,s){if(!t||typeof t!="object")return!1;if(t instanceof s)return!0;if(!Object.prototype.hasOwnProperty.call(s,Z))throw new Error(`Class "${s.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(t).constructor;if(r)for(;r;){if(Z in r&&r[Z]===s[Z])return!0;r=Object.getPrototypeOf(r)}return!1}class bs{constructor(s,r){this.table=s,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}static[Z]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(s){return s}mapToDriverValue(s){return s}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}class gh{static[Z]="ColumnBuilder";config;constructor(s,r,a){this.config={name:s,keyAsName:s==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:a,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(s){return this.config.default=s,this.config.hasDefault=!0,this}$defaultFn(s){return this.config.defaultFn=s,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(s){return this.config.onUpdateFn=s,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(s){this.config.name===""&&(this.config.name=s)}}const Kt=Symbol.for("drizzle:Name"),An=Symbol.for("drizzle:isPgEnum");function bh(t){return!!t&&typeof t=="function"&&An in t&&t[An]===!0}class Wo{static[Z]="Subquery";constructor(s,r,a,n=!1){this._={brand:"Subquery",sql:s,selectedFields:r,alias:a,isWith:n}}}const yh={startActiveSpan(t,s){return s()}},Vt=Symbol.for("drizzle:ViewBaseConfig"),Ar=Symbol.for("drizzle:Schema"),Pn=Symbol.for("drizzle:Columns"),Tn=Symbol.for("drizzle:ExtraConfigColumns"),Pr=Symbol.for("drizzle:OriginalName"),Tr=Symbol.for("drizzle:BaseName"),Ys=Symbol.for("drizzle:IsAlias"),En=Symbol.for("drizzle:ExtraConfigBuilder"),Go=Symbol.for("drizzle:IsDrizzleTable");class Be{static[Z]="Table";static Symbol={Name:Kt,Schema:Ar,OriginalName:Pr,Columns:Pn,ExtraConfigColumns:Tn,BaseName:Tr,IsAlias:Ys,ExtraConfigBuilder:En};[Kt];[Pr];[Ar];[Pn];[Tn];[Tr];[Ys]=!1;[Go]=!0;[En]=void 0;constructor(s,r,a){this[Kt]=this[Pr]=s,this[Ar]=r,this[Tr]=a}}function Xo(t){return typeof t=="object"&&t!==null&&Go in t}function vh(t){return t!=null&&typeof t.getSQL=="function"}function wh(t){const s={sql:"",params:[]};for(const r of t)s.sql+=r.sql,s.params.push(...r.params),r.typings?.length&&(s.typings||(s.typings=[]),s.typings.push(...r.typings));return s}class it{static[Z]="StringChunk";value;constructor(s){this.value=Array.isArray(s)?s:[s]}getSQL(){return new we([this])}}class we{constructor(s){this.queryChunks=s}static[Z]="SQL";decoder=Yo;shouldInlineParams=!1;append(s){return this.queryChunks.push(...s.queryChunks),this}toQuery(s){return yh.startActiveSpan("drizzle.buildSQL",r=>{const a=this.buildQueryFromSourceParams(this.queryChunks,s);return r?.setAttributes({"drizzle.query.text":a.sql,"drizzle.query.params":JSON.stringify(a.params)}),a})}buildQueryFromSourceParams(s,r){const a=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:n,escapeName:i,escapeParam:c,prepareTyping:d,inlineParams:u,paramStartIndex:h}=a;return wh(s.map(m=>{if(Me(m,it))return{sql:m.value.join(""),params:[]};if(Me(m,Kr))return{sql:i(m.value),params:[]};if(m===void 0)return{sql:"",params:[]};if(Array.isArray(m)){const f=[new it("(")];for(const[p,x]of m.entries())f.push(x),p<m.length-1&&f.push(new it(", "));return f.push(new it(")")),this.buildQueryFromSourceParams(f,a)}if(Me(m,we))return this.buildQueryFromSourceParams(m.queryChunks,{...a,inlineParams:u||m.shouldInlineParams});if(Me(m,Be)){const f=m[Be.Symbol.Schema],p=m[Be.Symbol.Name];return{sql:f===void 0||m[Ys]?i(p):i(f)+"."+i(p),params:[]}}if(Me(m,bs)){const f=n.getColumnCasing(m);if(r.invokeSource==="indexes")return{sql:i(f),params:[]};const p=m.table[Be.Symbol.Schema];return{sql:m.table[Ys]||p===void 0?i(m.table[Be.Symbol.Name])+"."+i(f):i(p)+"."+i(m.table[Be.Symbol.Name])+"."+i(f),params:[]}}if(Me(m,jh)){const f=m[Vt].schema,p=m[Vt].name;return{sql:f===void 0||m[Vt].isAlias?i(p):i(f)+"."+i(p),params:[]}}if(Me(m,Zo)){if(Me(m.value,Vr))return{sql:c(h.value++,m),params:[m],typings:["none"]};const f=m.value===null?null:m.encoder.mapToDriverValue(m.value);if(Me(f,we))return this.buildQueryFromSourceParams([f],a);if(u)return{sql:this.mapInlineParam(f,a),params:[]};let p=["none"];return d&&(p=[d(m.encoder)]),{sql:c(h.value++,f),params:[f],typings:p}}return Me(m,Vr)?{sql:c(h.value++,m),params:[m],typings:["none"]}:Me(m,we.Aliased)&&m.fieldAlias!==void 0?{sql:i(m.fieldAlias),params:[]}:Me(m,Wo)?m._.isWith?{sql:i(m._.alias),params:[]}:this.buildQueryFromSourceParams([new it("("),m._.sql,new it(") "),new Kr(m._.alias)],a):bh(m)?m.schema?{sql:i(m.schema)+"."+i(m.enumName),params:[]}:{sql:i(m.enumName),params:[]}:vh(m)?m.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([m.getSQL()],a):this.buildQueryFromSourceParams([new it("("),m.getSQL(),new it(")")],a):u?{sql:this.mapInlineParam(m,a),params:[]}:{sql:c(h.value++,m),params:[m],typings:["none"]}}))}mapInlineParam(s,{escapeString:r}){if(s===null)return"null";if(typeof s=="number"||typeof s=="boolean")return s.toString();if(typeof s=="string")return r(s);if(typeof s=="object"){const a=s.toString();return r(a==="[object Object]"?JSON.stringify(s):a)}throw new Error("Unexpected param value: "+s)}getSQL(){return this}as(s){return s===void 0?this:new we.Aliased(this,s)}mapWith(s){return this.decoder=typeof s=="function"?{mapFromDriverValue:s}:s,this}inlineParams(){return this.shouldInlineParams=!0,this}if(s){return s?this:void 0}}class Kr{constructor(s){this.value=s}static[Z]="Name";brand;getSQL(){return new we([this])}}const Yo={mapFromDriverValue:t=>t},Jo={mapToDriverValue:t=>t};({...Yo,...Jo});class Zo{constructor(s,r=Jo){this.value=s,this.encoder=r}static[Z]="Param";brand;getSQL(){return new we([this])}}function L(t,...s){const r=[];(s.length>0||t.length>0&&t[0]!=="")&&r.push(new it(t[0]));for(const[a,n]of s.entries())r.push(n,new it(t[a+1]));return new we(r)}(t=>{function s(){return new we([])}t.empty=s;function r(u){return new we(u)}t.fromList=r;function a(u){return new we([new it(u)])}t.raw=a;function n(u,h){const m=[];for(const[f,p]of u.entries())f>0&&h!==void 0&&m.push(h),m.push(p);return new we(m)}t.join=n;function i(u){return new Kr(u)}t.identifier=i;function c(u){return new Vr(u)}t.placeholder=c;function d(u,h){return new Zo(u,h)}t.param=d})(L||(L={}));(t=>{class s{constructor(a,n){this.sql=a,this.fieldAlias=n}static[Z]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new s(this.sql,this.fieldAlias)}}t.Aliased=s})(we||(we={}));class Vr{constructor(s){this.name=s}static[Z]="Placeholder";getSQL(){return new we([this])}}const el=Symbol.for("drizzle:IsDrizzleView");class jh{static[Z]="View";[Vt];[el]=!0;constructor({name:s,schema:r,selectedFields:a,query:n}){this[Vt]={name:s,originalName:s,schema:r,selectedFields:a,query:n,isExisting:!n,isAlias:!1}}getSQL(){return new we([this])}}function Nh(t){return typeof t=="object"&&t!==null&&el in t}bs.prototype.getSQL=function(){return new we([this])};Be.prototype.getSQL=function(){return new we([this])};Wo.prototype.getSQL=function(){return new we([this])};function Sh(t){return t[Be.Symbol.Columns]}function _h(t){return t[Vt].selectedFields}function dr(t,s){return{name:typeof t=="string"&&t.length>0?t:"",config:typeof t=="object"?t:s}}class kh{static[Z]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(s,r){this.reference=()=>{const{name:a,columns:n,foreignColumns:i}=s();return{name:a,columns:n,foreignTable:i[0].table,foreignColumns:i}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(s){return this._onUpdate=s,this}onDelete(s){return this._onDelete=s,this}build(s){return new Ch(s,this)}}class Ch{constructor(s,r){this.table=s,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}static[Z]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){const{name:s,columns:r,foreignColumns:a}=this.reference(),n=r.map(d=>d.name),i=a.map(d=>d.name),c=[this.table[Kt],...n,a[0].table[Kt],...i];return s??`${c.join("_")}_fk`}}function Ih(t,s){return`${t[Kt]}_${s.join("_")}_unique`}class bt extends gh{static[Z]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(s,r={}){return this.foreignKeyConfigs.push({ref:s,actions:r}),this}unique(s){return this.config.isUnique=!0,this.config.uniqueName=s,this}generatedAlwaysAs(s,r){return this.config.generated={as:s,type:"always",mode:r?.mode??"virtual"},this}buildForeignKeys(s,r){return this.foreignKeyConfigs.map(({ref:a,actions:n})=>((i,c)=>{const d=new kh(()=>{const u=i();return{columns:[s],foreignColumns:[u]}});return c.onUpdate&&d.onUpdate(c.onUpdate),c.onDelete&&d.onDelete(c.onDelete),d.build(r)})(a,n))}}class yt extends bs{constructor(s,r){r.uniqueName||(r.uniqueName=Ih(s,[r.name])),super(s,r),this.table=s}static[Z]="SQLiteColumn"}class Ah extends bt{static[Z]="SQLiteBigIntBuilder";constructor(s){super(s,"bigint","SQLiteBigInt")}build(s){return new Ph(s,this.config)}}class Ph extends yt{static[Z]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(s){if(Buffer.isBuffer(s))return BigInt(s.toString());if(s instanceof ArrayBuffer){const r=new TextDecoder;return BigInt(r.decode(s))}return BigInt(String.fromCodePoint(...s))}mapToDriverValue(s){return Buffer.from(s.toString())}}class Th extends bt{static[Z]="SQLiteBlobJsonBuilder";constructor(s){super(s,"json","SQLiteBlobJson")}build(s){return new Eh(s,this.config)}}class Eh extends yt{static[Z]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(s){if(Buffer.isBuffer(s))return JSON.parse(s.toString());if(s instanceof ArrayBuffer){const r=new TextDecoder;return JSON.parse(r.decode(s))}return JSON.parse(String.fromCodePoint(...s))}mapToDriverValue(s){return Buffer.from(JSON.stringify(s))}}class Rh extends bt{static[Z]="SQLiteBlobBufferBuilder";constructor(s){super(s,"buffer","SQLiteBlobBuffer")}build(s){return new Dh(s,this.config)}}class Dh extends yt{static[Z]="SQLiteBlobBuffer";getSQLType(){return"blob"}}function Lh(t,s){const{name:r,config:a}=dr(t,s);return a?.mode==="json"?new Th(r):a?.mode==="bigint"?new Ah(r):new Rh(r)}class Mh extends bt{static[Z]="SQLiteCustomColumnBuilder";constructor(s,r,a){super(s,"custom","SQLiteCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=a}build(s){return new Fh(s,this.config)}}class Fh extends yt{static[Z]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(s,r){super(s,r),this.sqlName=r.customTypeParams.dataType(r.fieldConfig),this.mapTo=r.customTypeParams.toDriver,this.mapFrom=r.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(s){return typeof this.mapFrom=="function"?this.mapFrom(s):s}mapToDriverValue(s){return typeof this.mapTo=="function"?this.mapTo(s):s}}function Oh(t){return(s,r)=>{const{name:a,config:n}=dr(s,r);return new Mh(a,n,t)}}class Sa extends bt{static[Z]="SQLiteBaseIntegerBuilder";constructor(s,r,a){super(s,r,a),this.config.autoIncrement=!1}primaryKey(s){return s?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class _a extends yt{static[Z]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class qh extends Sa{static[Z]="SQLiteIntegerBuilder";constructor(s){super(s,"number","SQLiteInteger")}build(s){return new $h(s,this.config)}}class $h extends _a{static[Z]="SQLiteInteger"}class zh extends Sa{static[Z]="SQLiteTimestampBuilder";constructor(s,r){super(s,"date","SQLiteTimestamp"),this.config.mode=r}defaultNow(){return this.default(L`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(s){return new Uh(s,this.config)}}class Uh extends _a{static[Z]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(s){return this.config.mode==="timestamp"?new Date(s*1e3):new Date(s)}mapToDriverValue(s){const r=s.getTime();return this.config.mode==="timestamp"?Math.floor(r/1e3):r}}class Bh extends Sa{static[Z]="SQLiteBooleanBuilder";constructor(s,r){super(s,"boolean","SQLiteBoolean"),this.config.mode=r}build(s){return new Qh(s,this.config)}}class Qh extends _a{static[Z]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(s){return Number(s)===1}mapToDriverValue(s){return s?1:0}}function $(t,s){const{name:r,config:a}=dr(t,s);return a?.mode==="timestamp"||a?.mode==="timestamp_ms"?new zh(r,a.mode):a?.mode==="boolean"?new Bh(r,a.mode):new qh(r)}class Kh extends bt{static[Z]="SQLiteNumericBuilder";constructor(s){super(s,"string","SQLiteNumeric")}build(s){return new Vh(s,this.config)}}class Vh extends yt{static[Z]="SQLiteNumeric";getSQLType(){return"numeric"}}function Hh(t){return new Kh(t??"")}class Wh extends bt{static[Z]="SQLiteRealBuilder";constructor(s){super(s,"number","SQLiteReal")}build(s){return new Gh(s,this.config)}}class Gh extends yt{static[Z]="SQLiteReal";getSQLType(){return"real"}}function Xh(t){return new Wh(t??"")}class Yh extends bt{static[Z]="SQLiteTextBuilder";constructor(s,r){super(s,"string","SQLiteText"),this.config.enumValues=r.enum,this.config.length=r.length}build(s){return new Jh(s,this.config)}}class Jh extends yt{static[Z]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(s,r){super(s,r)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class Zh extends bt{static[Z]="SQLiteTextJsonBuilder";constructor(s){super(s,"json","SQLiteTextJson")}build(s){return new ef(s,this.config)}}class ef extends yt{static[Z]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(s){return JSON.parse(s)}mapToDriverValue(s){return JSON.stringify(s)}}function l(t,s={}){const{name:r,config:a}=dr(t,s);return a.mode==="json"?new Zh(r):new Yh(r,a)}function tf(){return{blob:Lh,customType:Oh,integer:$,numeric:Hh,real:Xh,text:l}}const Hr=Symbol.for("drizzle:SQLiteInlineForeignKeys");class Rn extends Be{static[Z]="SQLiteTable";static Symbol=Object.assign({},Be.Symbol,{InlineForeignKeys:Hr});[Be.Symbol.Columns];[Hr]=[];[Be.Symbol.ExtraConfigBuilder]=void 0}function sf(t,s,r,a,n=t){const i=new Rn(t,a,n),c=typeof s=="function"?s(tf()):s,d=Object.fromEntries(Object.entries(c).map(([h,m])=>{const f=m;f.setName(h);const p=f.build(i);return i[Hr].push(...f.buildForeignKeys(p,i)),[h,p]})),u=Object.assign(i,d);return u[Be.Symbol.Columns]=d,u[Be.Symbol.ExtraConfigColumns]=d,r&&(u[Rn.Symbol.ExtraConfigBuilder]=r),u}const H=(t,s,r)=>sf(t,s,r);class tl{constructor(s,r){this.name=s,this.unique=r}static[Z]="SQLiteIndexBuilderOn";on(...s){return new rf(this.name,s,this.unique)}}class rf{static[Z]="SQLiteIndexBuilder";config;constructor(s,r,a){this.config={name:s,columns:r,unique:a,where:void 0}}where(s){return this.config.where=s,this}build(s){return new af(this.config,s)}}class af{static[Z]="SQLiteIndex";config;constructor(s,r){this.config={...s,table:r}}}function R(t){return new tl(t,!1)}function pe(t){return new tl(t,!0)}const ye={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function Se(t,s){return s.includes(t.columnType)}function sl(t){return"enumValues"in t&&Array.isArray(t.enumValues)&&t.enumValues.length>0}const nf=sl,of=gi([g(),bi(),ra(),$c()]),lf=gi([of,zc(qs()),Zs(qs())]),cf=Uc(t=>t instanceof Buffer);function rl(t,s){const r=s?.zodInstance??yi,a=s?.coerce??{};let n;return sl(t)&&(n=t.enumValues.length?r.enum(t.enumValues):r.string()),n||(Se(t,["PgGeometry","PgPointTuple"])?n=r.tuple([r.number(),r.number()]):Se(t,["PgGeometryObject","PgPointObject"])?n=r.object({x:r.number(),y:r.number()}):Se(t,["PgHalfVector","PgVector"])?(n=r.array(r.number()),n=t.dimensions?n.length(t.dimensions):n):Se(t,["PgLine"])?n=r.tuple([r.number(),r.number(),r.number()]):Se(t,["PgLineABC"])?n=r.object({a:r.number(),b:r.number(),c:r.number()}):Se(t,["PgArray"])?(n=r.array(rl(t.baseColumn,r)),n=t.size?n.length(t.size):n):t.dataType==="array"?n=r.array(r.any()):t.dataType==="number"?n=df(t,r,a):t.dataType==="bigint"?n=uf(t,r,a):t.dataType==="boolean"?n=a===!0||a.boolean?r.coerce.boolean():r.boolean():t.dataType==="date"?n=a===!0||a.date?r.coerce.date():r.date():t.dataType==="string"?n=mf(t,r,a):t.dataType==="json"?n=lf:t.dataType==="custom"?n=r.any():t.dataType==="buffer"&&(n=cf)),n||(n=r.any()),n}function df(t,s,r){let a=t.getSQLType().includes("unsigned"),n,i,c=!1;Se(t,["MySqlTinyInt","SingleStoreTinyInt"])?(n=a?0:ye.INT8_MIN,i=a?ye.INT8_UNSIGNED_MAX:ye.INT8_MAX,c=!0):Se(t,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(n=a?0:ye.INT16_MIN,i=a?ye.INT16_UNSIGNED_MAX:ye.INT16_MAX,c=!0):Se(t,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(n=a?0:ye.INT24_MIN,i=a?ye.INT24_UNSIGNED_MAX:ye.INT24_MAX,c=Se(t,["MySqlMediumInt","SingleStoreMediumInt"])):Se(t,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(n=a?0:ye.INT32_MIN,i=a?ye.INT32_UNSIGNED_MAX:ye.INT32_MAX,c=!0):Se(t,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(n=a?0:ye.INT48_MIN,i=a?ye.INT48_UNSIGNED_MAX:ye.INT48_MAX):Se(t,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(a=a||Se(t,["MySqlSerial","SingleStoreSerial"]),n=a?0:Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER,c=!0):Se(t,["MySqlYear","SingleStoreYear"])?(n=1901,i=2155,c=!0):(n=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER);let d=r===!0||r?.number?s.coerce.number():s.number();return d=d.min(n).max(i),c?d.int():d}function uf(t,s,r){const a=t.getSQLType().includes("unsigned"),n=a?0n:ye.INT64_MIN,i=a?ye.INT64_UNSIGNED_MAX:ye.INT64_MAX;return(r===!0||r?.bigint?s.coerce.bigint():s.bigint()).min(n).max(i)}function mf(t,s,r){if(Se(t,["PgUUID"]))return s.string().uuid();let a,n,i=!1;Se(t,["PgVarchar","SQLiteText"])?a=t.length:Se(t,["MySqlVarChar","SingleStoreVarChar"])?a=t.length??ye.INT16_UNSIGNED_MAX:Se(t,["MySqlText","SingleStoreText"])&&(t.textType==="longtext"?a=ye.INT32_UNSIGNED_MAX:t.textType==="mediumtext"?a=ye.INT24_UNSIGNED_MAX:t.textType==="text"?a=ye.INT16_UNSIGNED_MAX:a=ye.INT8_UNSIGNED_MAX),Se(t,["PgChar","MySqlChar","SingleStoreChar"])&&(a=t.length,i=!0),Se(t,["PgBinaryVector"])&&(n=/^[01]+$/,a=t.dimensions);let c=r===!0||r?.string?s.coerce.string():s.string();return c=n?c.regex(n):c,a&&i?c.length(a):a?c.max(a):c}function ka(t){return Xo(t)?Sh(t):_h(t)}function Ca(t,s,r,a){const n={};for(const[i,c]of Object.entries(t)){if(!Me(c,bs)&&!Me(c,we)&&!Me(c,we.Aliased)&&typeof c=="object"){const f=Xo(c)||Nh(c)?ka(c):c;n[i]=Ca(f,s[i]??{},r,a);continue}const d=s[i];if(d!==void 0&&typeof d!="function"){n[i]=d;continue}const u=Me(c,bs)?c:void 0,h=u?rl(u,a):qs(),m=typeof d=="function"?d(h):h;r.never(u)||(n[i]=m,u&&(r.nullable(u)&&(n[i]=n[i].nullable()),r.optional(u)&&(n[i]=n[i].optional())))}return ue(n)}function hf(t,s){return yi.enum(t.enumValues)}const ff={never:()=>!1,optional:()=>!1,nullable:t=>!t.notNull},pf={never:t=>t?.generated?.type==="always"||t?.generatedIdentity?.type==="always",optional:t=>!t.notNull||t.notNull&&t.hasDefault,nullable:t=>!t.notNull},Ct=(t,s)=>{if(nf(t))return hf(t);const r=ka(t);return Ca(r,{},ff)},je=(t,s)=>{const r=ka(t);return Ca(r,s??{},pf)};function W(){return crypto.randomUUID()}const ae=H("users",{id:l("id").primaryKey().$defaultFn(()=>W()),username:l("username").unique(),email:l("email").unique(),password:l("password"),profilePicture:l("profile_picture"),country:l("country"),isAdmin:l("is_admin").notNull().default("false"),role:l("role").notNull().default("user"),firstName:l("first_name"),lastName:l("last_name"),profileImageUrl:l("profile_image_url"),emailVerified:l("email_verified").notNull().default("false"),emailVerifiedAt:l("email_verified_at"),currencyBalance:$("currency_balance").default(0),stripeCustomerId:l("stripe_customer_id"),isBanned:l("is_banned").notNull().default("false"),banReason:l("ban_reason"),bannedBy:l("banned_by"),bannedAt:l("banned_at"),banExpiresAt:l("ban_expires_at"),lastLoginAt:l("last_login_at"),loginCount:$("login_count").default(0),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({roleIdx:R("users_role_idx").on(t.role),isBannedIdx:R("users_is_banned_idx").on(t.isBanned),stripeCustomerIdx:R("users_stripe_customer_idx").on(t.stripeCustomerId)})),vt=H("series",{id:l("id").primaryKey().$defaultFn(()=>W()),title:l("title").notNull(),description:l("description"),author:l("author"),artist:l("artist"),status:l("status").notNull().default("ongoing"),type:l("type").notNull().default("manga"),genres:l("genres"),coverImageUrl:l("cover_image_url"),rating:l("rating"),totalChapters:$("total_chapters"),publishedYear:$("published_year"),isAdult:l("is_adult").notNull().default("false"),isFeatured:l("is_featured").notNull().default("false"),isTrending:l("is_trending").notNull().default("false"),isPopularToday:l("is_popular_today").notNull().default("false"),isLatestUpdate:l("is_latest_update").notNull().default("false"),isPinned:l("is_pinned").notNull().default("false"),metaTitle:l("meta_title"),metaDescription:l("meta_description"),canonicalUrl:l("canonical_url"),robotsNoindex:l("robots_noindex").notNull().default("false"),seoKeywords:l("seo_keywords"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({statusIdx:R("series_status_idx").on(t.status),typeIdx:R("series_type_idx").on(t.type),isFeaturedIdx:R("series_is_featured_idx").on(t.isFeatured),isTrendingIdx:R("series_is_trending_idx").on(t.isTrending),isPopularTodayIdx:R("series_is_popular_today_idx").on(t.isPopularToday),isLatestUpdateIdx:R("series_is_latest_update_idx").on(t.isLatestUpdate),isPinnedIdx:R("series_is_pinned_idx").on(t.isPinned),robotsNoindexIdx:R("series_robots_noindex_idx").on(t.robotsNoindex)})),al=H("languages",{id:l("id").primaryKey().$defaultFn(()=>W()),code:l("code").notNull().unique(),name:l("name").notNull(),nativeName:l("native_name").notNull(),isActive:l("is_active").notNull().default("true"),isDefault:l("is_default").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({codeIdx:pe("language_code_idx").on(t.code)})),xf=H("series_translations",{id:l("id").primaryKey().$defaultFn(()=>W()),seriesId:l("series_id").notNull().references(()=>vt.id,{onDelete:"cascade"}),languageId:l("language_id").notNull().references(()=>al.id,{onDelete:"cascade"}),title:l("title"),description:l("description"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({seriesLanguageIdx:R("series_language_idx").on(t.seriesId,t.languageId),uniqueSeriesLanguage:pe("unique_series_language").on(t.seriesId,t.languageId)})),ws=H("chapters",{id:l("id").primaryKey().$defaultFn(()=>W()),seriesId:l("series_id").notNull().references(()=>vt.id,{onDelete:"cascade"}),chapterNumber:l("chapter_number").notNull(),title:l("title"),pages:l("pages").notNull(),totalPages:$("total_pages").notNull().default(0),coverImageUrl:l("cover_image_url"),isPublished:l("is_published").notNull().default("true"),uploadedBy:l("uploaded_by").references(()=>ae.id),requiresManualReorder:l("requires_manual_reorder").notNull().default("false"),naturalSortConfidence:l("natural_sort_confidence").default("1.0"),metaTitle:l("meta_title"),metaDescription:l("meta_description"),canonicalUrl:l("canonical_url"),robotsNoindex:l("robots_noindex").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({seriesChapterIdx:R("series_chapter_idx").on(t.seriesId,t.chapterNumber),uniqueSeriesChapter:pe("unique_series_chapter").on(t.seriesId,t.chapterNumber),uploadedByIdx:R("chapters_uploaded_by_idx").on(t.uploadedBy),isPublishedIdx:R("chapters_is_published_idx").on(t.isPublished),seriesPublishedIdx:R("chapters_series_published_idx").on(t.seriesId,t.isPublished)})),gf=H("settings",{id:l("id").primaryKey().$defaultFn(()=>W()),category:l("category").notNull(),key:l("key").notNull(),value:l("value").notNull(),type:l("type").notNull().default("string"),description:l("description"),isPublic:l("is_public").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({categoryKeyIdx:pe("settings_category_key_idx").on(t.category,t.key),categoryIdx:R("settings_category_idx").on(t.category)})),bf=H("user_library",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),seriesId:l("series_id").notNull().references(()=>vt.id,{onDelete:"cascade"}),status:l("status").notNull().default("reading"),addedAt:l("added_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({userSeriesIdx:R("user_series_idx").on(t.userId,t.seriesId),uniqueUserSeries:pe("unique_user_series").on(t.userId,t.seriesId)}));H("user_follows",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),seriesId:l("series_id").notNull().references(()=>vt.id,{onDelete:"cascade"}),followedAt:l("followed_at").default(L`(datetime('now'))`),notificationsEnabled:l("notifications_enabled").notNull().default("true")},t=>({userSeriesFollowIdx:R("user_series_follow_idx").on(t.userId,t.seriesId),uniqueUserSeriesFollow:pe("unique_user_series_follow").on(t.userId,t.seriesId)}));const yf=H("comments",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),seriesId:l("series_id").references(()=>vt.id,{onDelete:"cascade"}),chapterId:l("chapter_id").references(()=>ws.id,{onDelete:"cascade"}),content:l("content").notNull(),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({userIdx:R("comments_user_idx").on(t.userId),seriesIdx:R("comments_series_idx").on(t.seriesId),chapterIdx:R("comments_chapter_idx").on(t.chapterId)})),vf=H("reading_progress",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),seriesId:l("series_id").notNull().references(()=>vt.id,{onDelete:"cascade"}),chapterId:l("chapter_id").references(()=>ws.id,{onDelete:"set null"}),lastReadPage:$("last_read_page").notNull().default(0),lastReadAt:l("last_read_at").default(L`(datetime('now'))`),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({userSeriesProgressIdx:R("user_series_progress_idx").on(t.userId,t.seriesId),uniqueUserSeriesProgress:pe("unique_user_series_progress").on(t.userId,t.seriesId)}));H("email_verification_tokens",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),token:l("token").notNull().unique(),expiresAt:l("expires_at").notNull(),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userIdx:R("email_verification_user_idx").on(t.userId),tokenIdx:pe("email_verification_token_idx").on(t.token)}));H("password_reset_tokens",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),token:l("token").notNull().unique(),expiresAt:l("expires_at").notNull(),used:l("used").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userIdx:R("password_reset_user_idx").on(t.userId),tokenIdx:pe("password_reset_token_idx").on(t.token)}));const wf=H("user_ratings",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),seriesId:l("series_id").notNull().references(()=>vt.id,{onDelete:"cascade"}),rating:$("rating").notNull(),review:l("review"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({userSeriesIdx:R("user_ratings_user_series_idx").on(t.userId,t.seriesId),uniqueUserSeriesRating:pe("unique_user_series_rating").on(t.userId,t.seriesId),seriesIdx:R("user_ratings_series_idx").on(t.seriesId)}));H("user_follows_users",{id:l("id").primaryKey().$defaultFn(()=>W()),followerId:l("follower_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),followingId:l("following_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),followedAt:l("followed_at").default(L`(datetime('now'))`)},t=>({followerIdx:R("user_follows_follower_idx").on(t.followerId),followingIdx:R("user_follows_following_idx").on(t.followingId),uniqueUserFollow:pe("unique_user_follow").on(t.followerId,t.followingId)}));const Ia=H("reading_lists",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),name:l("name").notNull(),description:l("description"),visibility:l("visibility").notNull().default("private"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({userIdx:R("reading_lists_user_idx").on(t.userId)})),nl=H("reading_list_items",{id:l("id").primaryKey().$defaultFn(()=>W()),listId:l("list_id").notNull().references(()=>Ia.id,{onDelete:"cascade"}),seriesId:l("series_id").notNull().references(()=>vt.id,{onDelete:"cascade"}),addedAt:l("added_at").default(L`(datetime('now'))`)},t=>({listSeriesIdx:R("reading_list_items_list_series_idx").on(t.listId,t.seriesId),uniqueListSeries:pe("unique_list_series").on(t.listId,t.seriesId)})),il=H("currency_transactions",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),amount:$("amount").notNull(),type:l("type").notNull(),description:l("description").notNull(),relatedEntityId:l("related_entity_id"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userCreatedIdx:R("currency_transactions_user_created_idx").on(t.userId,t.createdAt),userIdx:R("currency_transactions_user_idx").on(t.userId)})),Aa=H("currency_packages",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),currencyAmount:$("currency_amount").notNull(),priceUSD:l("price_usd").notNull(),bonusPercentage:$("bonus_percentage").notNull().default(0),isActive:l("is_active").notNull().default("true"),displayOrder:$("display_order").notNull().default(0),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({activeDisplayIdx:R("currency_packages_active_display_idx").on(t.isActive,t.displayOrder)})),ur=H("user_purchases",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),packageId:l("package_id").references(()=>Aa.id,{onDelete:"set null"}),amountPaid:l("amount_paid").notNull(),currencyReceived:$("currency_received").notNull(),paymentProvider:l("payment_provider").notNull(),transactionId:l("transaction_id"),status:l("status").notNull().default("pending"),couponId:l("coupon_id"),trialEndsAt:l("trial_ends_at"),isOffline:l("is_offline").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userStatusIdx:R("user_purchases_user_status_idx").on(t.userId,t.status),userIdx:R("user_purchases_user_idx").on(t.userId),transactionIdIdx:R("user_purchases_transaction_id_idx").on(t.transactionId)})),ol=H("chapter_access_control",{id:l("id").primaryKey().$defaultFn(()=>W()),chapterId:l("chapter_id").notNull().references(()=>ws.id,{onDelete:"cascade"}),accessType:l("access_type").notNull(),unlockCost:$("unlock_cost").notNull().default(0),isActive:l("is_active").notNull().default("true"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({uniqueChapter:pe("unique_chapter_access").on(t.chapterId)})),ll=H("user_chapter_unlocks",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),chapterId:l("chapter_id").notNull().references(()=>ws.id,{onDelete:"cascade"}),unlockedAt:l("unlocked_at").default(L`(datetime('now'))`),costPaid:$("cost_paid").notNull(),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({uniqueUserChapter:pe("unique_user_chapter_unlock").on(t.userId,t.chapterId),userIdx:R("user_chapter_unlocks_user_idx").on(t.userId)})),jf=H("subscription_packages",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),description:l("description"),priceUSD:l("price_usd").notNull(),billingCycle:l("billing_cycle").notNull().default("monthly"),stripePriceId:l("stripe_price_id"),features:l("features"),coinBonus:$("coin_bonus").default(0),discountPercentage:$("discount_percentage").default(0),isAdFree:l("is_ad_free").notNull().default("false"),earlyAccess:l("early_access").notNull().default("false"),exclusiveContent:l("exclusive_content").notNull().default("false"),trialDays:$("trial_days").notNull().default(0),isActive:l("is_active").notNull().default("true"),displayOrder:$("display_order").notNull().default(0),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({activeDisplayIdx:R("subscription_packages_active_display_idx").on(t.isActive,t.displayOrder)}));H("user_subscriptions",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),packageId:l("package_id").references(()=>jf.id,{onDelete:"set null"}),stripeCustomerId:l("stripe_customer_id"),stripeSubscriptionId:l("stripe_subscription_id"),status:l("status").notNull().default("active"),currentPeriodStart:l("current_period_start"),currentPeriodEnd:l("current_period_end"),cancelAtPeriodEnd:l("cancel_at_period_end").notNull().default("false"),trialStartDate:l("trial_start_date"),trialEndDate:l("trial_end_date"),isTrialActive:l("is_trial_active").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({userStatusIdx:R("user_subscriptions_user_status_idx").on(t.userId,t.status),stripeSubscriptionIdx:pe("stripe_subscription_idx").on(t.stripeSubscriptionId)}));H("daily_rewards",{id:l("id").primaryKey().$defaultFn(()=>W()),day:$("day").notNull().unique(),coinReward:$("coin_reward").notNull(),bonusMultiplier:l("bonus_multiplier").default("1"),isSpecial:l("is_special").notNull().default("false"),specialDescription:l("special_description"),createdAt:l("created_at").default(L`(datetime('now'))`)});H("user_daily_claims",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),claimDate:l("claim_date").notNull(),day:$("day").notNull(),coinsEarned:$("coins_earned").notNull(),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userDateIdx:pe("user_daily_claims_user_date_idx").on(t.userId,t.claimDate),userIdx:R("user_daily_claims_user_idx").on(t.userId)}));const Nf=H("achievements",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),description:l("description").notNull(),category:l("category").notNull(),requirement:l("requirement").notNull(),coinReward:$("coin_reward").default(0),badgeIcon:l("badge_icon"),isHidden:l("is_hidden").notNull().default("false"),displayOrder:$("display_order").notNull().default(0),createdAt:l("created_at").default(L`(datetime('now'))`)});H("user_achievements",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),achievementId:l("achievement_id").notNull().references(()=>Nf.id,{onDelete:"cascade"}),earnedAt:l("earned_at").default(L`(datetime('now'))`),progress:l("progress")},t=>({uniqueUserAchievement:pe("unique_user_achievement").on(t.userId,t.achievementId),userIdx:R("user_achievements_user_idx").on(t.userId)}));const Sf=H("referral_codes",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),code:l("code").notNull().unique(),uses:$("uses").notNull().default(0),maxUses:$("max_uses"),coinRewardReferrer:$("coin_reward_referrer").default(100),coinRewardReferred:$("coin_reward_referred").default(50),expiresAt:l("expires_at"),isActive:l("is_active").notNull().default("true"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userIdx:R("referral_codes_user_idx").on(t.userId),codeIdx:pe("referral_codes_code_idx").on(t.code)}));H("referrals",{id:l("id").primaryKey().$defaultFn(()=>W()),referrerId:l("referrer_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),referredId:l("referred_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),codeId:l("code_id").references(()=>Sf.id,{onDelete:"set null"}),referrerRewardAmount:$("referrer_reward_amount").default(0),referredRewardAmount:$("referred_reward_amount").default(0),status:l("status").notNull().default("completed"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({referrerIdx:R("referrals_referrer_idx").on(t.referrerId),referredIdx:R("referrals_referred_idx").on(t.referredId)}));H("flash_sales",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),description:l("description"),type:l("type").notNull(),targetId:l("target_id"),discountPercentage:$("discount_percentage").notNull(),originalPrice:l("original_price").notNull(),salePrice:l("sale_price").notNull(),startTime:l("start_time").notNull(),endTime:l("end_time").notNull(),maxPurchases:$("max_purchases"),currentPurchases:$("current_purchases").default(0),isActive:l("is_active").notNull().default("true"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({activeTimeIdx:R("flash_sales_active_time_idx").on(t.isActive,t.startTime,t.endTime)}));H("gift_transactions",{id:l("id").primaryKey().$defaultFn(()=>W()),senderId:l("sender_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),recipientId:l("recipient_id").references(()=>ae.id,{onDelete:"set null"}),recipientEmail:l("recipient_email"),giftType:l("gift_type").notNull(),giftAmount:$("gift_amount"),packageId:l("package_id"),message:l("message"),status:l("status").notNull().default("pending"),claimedAt:l("claimed_at"),expiresAt:l("expires_at"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({senderIdx:R("gift_transactions_sender_idx").on(t.senderId),recipientIdx:R("gift_transactions_recipient_idx").on(t.recipientId),statusIdx:R("gift_transactions_status_idx").on(t.status)}));const _f=H("loyalty_tiers",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),minPoints:$("min_points").notNull(),maxPoints:$("max_points"),coinBonusPercentage:$("coin_bonus_percentage").default(0),discountPercentage:$("discount_percentage").default(0),perks:l("perks"),badgeColor:l("badge_color").default("#gray"),displayOrder:$("display_order").notNull().default(0),createdAt:l("created_at").default(L`(datetime('now'))`)});H("user_loyalty",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),points:$("points").notNull().default(0),tierId:l("tier_id").references(()=>_f.id,{onDelete:"set null"}),lifetimePoints:$("lifetime_points").notNull().default(0),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({userIdx:pe("user_loyalty_user_idx").on(t.userId)}));const cl=H("battle_pass_seasons",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),description:l("description"),startDate:l("start_date").notNull(),endDate:l("end_date").notNull(),isPremium:l("is_premium").notNull().default("false"),priceUSD:l("price_usd"),isActive:l("is_active").notNull().default("true"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({isActiveIdx:R("battle_pass_seasons_is_active_idx").on(t.isActive),activeDatesIdx:R("battle_pass_seasons_active_dates_idx").on(t.isActive,t.startDate,t.endDate)}));H("battle_pass_rewards",{id:l("id").primaryKey().$defaultFn(()=>W()),seasonId:l("season_id").notNull().references(()=>cl.id,{onDelete:"cascade"}),tier:$("tier").notNull(),isPremium:l("is_premium").notNull().default("false"),rewardType:l("reward_type").notNull(),rewardValue:l("reward_value").notNull(),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({seasonTierIdx:R("battle_pass_rewards_season_tier_idx").on(t.seasonId,t.tier)}));H("user_battle_pass_progress",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),seasonId:l("season_id").notNull().references(()=>cl.id,{onDelete:"cascade"}),currentTier:$("current_tier").notNull().default(0),experience:$("experience").notNull().default(0),isPremium:l("is_premium").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({uniqueUserSeason:pe("unique_user_season").on(t.userId,t.seasonId)}));H("dmca_notices",{id:l("id").primaryKey().$defaultFn(()=>W()),fullName:l("full_name").notNull(),email:l("email").notNull(),phone:l("phone").notNull(),copyrightWork:l("copyright_work").notNull(),infringingUrl:l("infringing_url").notNull(),description:l("description"),signature:l("signature").notNull(),ipAddress:l("ip_address"),goodFaithDeclaration:l("good_faith_declaration").notNull(),accuracyDeclaration:l("accuracy_declaration").notNull(),status:l("status").notNull().default("pending"),reviewedBy:l("reviewed_by").references(()=>ae.id,{onDelete:"set null"}),reviewNotes:l("review_notes"),reviewedAt:l("reviewed_at"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({statusIdx:R("dmca_status_idx").on(t.status),emailIdx:R("dmca_email_idx").on(t.email),createdIdx:R("dmca_created_idx").on(t.createdAt)}));const kf=H("coupons",{id:l("id").primaryKey().$defaultFn(()=>W()),code:l("code").notNull().unique(),type:l("type").notNull(),value:l("value").notNull(),minPurchaseAmount:l("min_purchase_amount"),maxUses:$("max_uses"),currentUses:$("current_uses").notNull().default(0),expiresAt:l("expires_at"),isActive:l("is_active").notNull().default("true"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({codeIdx:pe("coupons_code_idx").on(t.code),activeIdx:R("coupons_active_idx").on(t.isActive)}));H("coupon_redemptions",{id:l("id").primaryKey().$defaultFn(()=>W()),couponId:l("coupon_id").notNull().references(()=>kf.id,{onDelete:"cascade"}),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),purchaseId:l("purchase_id").references(()=>ur.id,{onDelete:"set null"}),discountAmount:l("discount_amount").notNull(),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({couponUserIdx:R("coupon_redemptions_coupon_user_idx").on(t.couponId,t.userId),purchaseIdx:R("coupon_redemptions_purchase_idx").on(t.purchaseId)}));H("package_bundles",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),description:l("description"),bundleType:l("bundle_type").notNull(),priceUSD:l("price_usd").notNull(),items:l("items").notNull(),isActive:l("is_active").notNull().default("true"),displayOrder:$("display_order").notNull().default(0),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({activeDisplayIdx:R("package_bundles_active_display_idx").on(t.isActive,t.displayOrder)}));const Cf=H("invoices",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),purchaseId:l("purchase_id").references(()=>ur.id,{onDelete:"set null"}),invoiceNumber:l("invoice_number").notNull().unique(),totalAmount:l("total_amount").notNull(),taxAmount:l("tax_amount").notNull().default("0.00"),discountAmount:l("discount_amount").notNull().default("0.00"),finalAmount:l("final_amount").notNull(),status:l("status").notNull().default("draft"),pdfPath:l("pdf_path"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userIdx:R("invoices_user_idx").on(t.userId),invoiceNumberIdx:pe("invoices_number_idx").on(t.invoiceNumber),purchaseIdx:R("invoices_purchase_idx").on(t.purchaseId)}));H("invoice_items",{id:l("id").primaryKey().$defaultFn(()=>W()),invoiceId:l("invoice_id").notNull().references(()=>Cf.id,{onDelete:"cascade"}),itemType:l("item_type").notNull(),itemId:l("item_id"),description:l("description").notNull(),quantity:$("quantity").notNull().default(1),unitPrice:l("unit_price").notNull(),totalPrice:l("total_price").notNull()},t=>({invoiceIdx:R("invoice_items_invoice_idx").on(t.invoiceId)}));H("manual_assignments",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),packageId:l("package_id").notNull(),packageType:l("package_type").notNull(),assignedBy:l("assigned_by").notNull().references(()=>ae.id,{onDelete:"set null"}),reason:l("reason").notNull(),expiresAt:l("expires_at"),isActive:l("is_active").notNull().default("true"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userIdx:R("manual_assignments_user_idx").on(t.userId),assignedByIdx:R("manual_assignments_assigned_by_idx").on(t.assignedBy),activeIdx:R("manual_assignments_active_idx").on(t.isActive)}));const rs=H("advertisements",{id:l("id").primaryKey().$defaultFn(()=>W()),title:l("title").notNull(),description:l("description"),imageUrl:l("image_url").notNull(),linkUrl:l("link_url").notNull(),type:l("type").notNull(),placement:l("placement"),page:l("page").notNull(),location:l("location").notNull(),isActive:l("is_active").notNull().default("true"),startDate:l("start_date"),endDate:l("end_date"),displayOrder:$("display_order").notNull().default(0),clickCount:$("click_count").notNull().default(0),impressionCount:$("impression_count").notNull().default(0),variantGroup:l("variant_group"),variantName:l("variant_name"),targetCountries:l("target_countries"),targetDeviceTypes:l("target_device_types"),targetUserRoles:l("target_user_roles"),targetLanguages:l("target_languages"),budget:l("budget"),costPerClick:l("cost_per_click"),costPerImpression:l("cost_per_impression"),conversionGoal:l("conversion_goal"),conversionCount:$("conversion_count").notNull().default(0),frequencyCap:$("frequency_cap"),dailyBudget:l("daily_budget"),totalBudgetSpent:l("total_budget_spent").default("0.00"),tags:l("tags"),notes:l("notes"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({pageLocationActiveIdx:R("ads_page_location_active_idx").on(t.page,t.location,t.isActive),displayOrderIdx:R("ads_display_order_idx").on(t.displayOrder),activeIdx:R("ads_active_idx").on(t.isActive),variantGroupIdx:R("ads_variant_group_idx").on(t.variantGroup)})),dl=H("ad_campaigns",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),description:l("description"),status:l("status").notNull().default("draft"),budget:l("budget"),spentAmount:l("spent_amount").notNull().default("0.00"),startDate:l("start_date"),endDate:l("end_date"),createdBy:l("created_by").references(()=>ae.id,{onDelete:"set null"}),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({statusIdx:R("ad_campaigns_status_idx").on(t.status),createdByIdx:R("ad_campaigns_created_by_idx").on(t.createdBy)}));H("advertisements_v2",{id:l("id").primaryKey().$defaultFn(()=>W()),campaignId:l("campaign_id").references(()=>dl.id,{onDelete:"set null"}),title:l("title").notNull(),description:l("description"),imageUrl:l("image_url").notNull(),linkUrl:l("link_url").notNull(),type:l("type").notNull(),placement:l("placement"),isActive:l("is_active").notNull().default("true"),startDate:l("start_date"),endDate:l("end_date"),displayOrder:$("display_order").notNull().default(0),clickCount:$("click_count").notNull().default(0),impressionCount:$("impression_count").notNull().default(0),status:l("status").notNull().default("approved"),reviewedBy:l("reviewed_by").references(()=>ae.id,{onDelete:"set null"}),reviewNotes:l("review_notes"),reviewedAt:l("reviewed_at"),weight:$("weight").notNull().default(1),frequencyCap:$("frequency_cap"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({campaignIdx:R("ads_v2_campaign_idx").on(t.campaignId),placementActiveIdx:R("ads_v2_placement_active_idx").on(t.placement,t.isActive),statusIdx:R("ads_v2_status_idx").on(t.status)}));H("ad_performance_history",{id:l("id").primaryKey().$defaultFn(()=>W()),adId:l("ad_id").notNull().references(()=>rs.id,{onDelete:"cascade"}),date:l("date").notNull(),impressions:$("impressions").notNull().default(0),clicks:$("clicks").notNull().default(0),ctr:l("ctr"),conversionCount:$("conversion_count").notNull().default(0),spend:l("spend"),variantName:l("variant_name"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({adDateIdx:pe("ad_performance_ad_date_idx").on(t.adId,t.date),adIdx:R("ad_performance_ad_idx").on(t.adId),dateIdx:R("ad_performance_date_idx").on(t.date),variantNameIdx:R("ad_performance_variant_name_idx").on(t.variantName)}));H("ad_assets",{id:l("id").primaryKey().$defaultFn(()=>W()),adId:l("ad_id").notNull().references(()=>rs.id,{onDelete:"cascade"}),deviceType:l("device_type").notNull(),imageUrl:l("image_url").notNull(),width:$("width"),height:$("height"),fileSize:$("file_size"),isPrimary:l("is_primary").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({adDeviceIdx:R("ad_assets_ad_device_idx").on(t.adId,t.deviceType),adIdx:R("ad_assets_ad_idx").on(t.adId)}));H("ad_compliance",{id:l("id").primaryKey().$defaultFn(()=>W()),adId:l("ad_id").notNull().references(()=>rs.id,{onDelete:"cascade"}),checkType:l("check_type").notNull(),status:l("status").notNull().default("pending"),flagReason:l("flag_reason"),checkedBy:l("checked_by").references(()=>ae.id,{onDelete:"set null"}),autoCheckResult:l("auto_check_result"),checkedAt:l("checked_at").default(L`(datetime('now'))`),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({adStatusIdx:R("ad_compliance_ad_status_idx").on(t.adId,t.status),adIdx:R("ad_compliance_ad_idx").on(t.adId)}));H("ad_user_impressions",{id:l("id").primaryKey().$defaultFn(()=>W()),adId:l("ad_id").notNull().references(()=>rs.id,{onDelete:"cascade"}),userId:l("user_id").references(()=>ae.id,{onDelete:"cascade"}),sessionId:l("session_id"),impressionDate:l("impression_date").notNull(),impressionCount:$("impression_count").notNull().default(1),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({adUserDateIdx:pe("ad_user_impressions_ad_user_date_idx").on(t.adId,t.userId,t.impressionDate),adSessionDateIdx:R("ad_user_impressions_ad_session_date_idx").on(t.adId,t.sessionId,t.impressionDate)}));H("ad_alerts",{id:l("id").primaryKey().$defaultFn(()=>W()),adId:l("ad_id").references(()=>rs.id,{onDelete:"cascade"}),campaignId:l("campaign_id").references(()=>dl.id,{onDelete:"cascade"}),alertType:l("alert_type").notNull(),severity:l("severity").notNull().default("info"),message:l("message").notNull(),isRead:l("is_read").notNull().default("false"),isResolved:l("is_resolved").notNull().default("false"),resolvedBy:l("resolved_by").references(()=>ae.id,{onDelete:"set null"}),resolvedAt:l("resolved_at"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({adIdx:R("ad_alerts_ad_idx").on(t.adId),campaignIdx:R("ad_alerts_campaign_idx").on(t.campaignId),severityIdx:R("ad_alerts_severity_idx").on(t.severity),isResolvedIdx:R("ad_alerts_is_resolved_idx").on(t.isResolved)}));H("ad_templates",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull(),description:l("description"),type:l("type").notNull(),category:l("category").notNull(),thumbnailUrl:l("thumbnail_url"),defaultConfig:l("default_config"),isActive:l("is_active").notNull().default("true"),usageCount:$("usage_count").notNull().default(0),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({typeIdx:R("ad_templates_type_idx").on(t.type),categoryIdx:R("ad_templates_category_idx").on(t.category)}));const If=je(ae).pick({username:!0,email:!0,password:!0,profilePicture:!0,country:!0,isAdmin:!0}),Af=je(ae).pick({username:!0,password:!0}),Pf=ue({username:g().min(3,"Username must be at least 3 characters").max(30,"Username must be less than 30 characters"),email:g().email("Please enter a valid email address"),password:g().min(8,"Password must be at least 8 characters").max(100,"Password too long"),confirmPassword:g().min(1,"Please confirm your password"),country:g().optional(),profilePicture:g().optional()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});If.pick({username:!0,email:!0,profilePicture:!0,country:!0}).extend({id:g(),firstName:g().optional(),lastName:g().optional(),profileImageUrl:g().optional(),role:B(["user","premium","staff","admin","owner"]).default("user"),createdAt:g().optional(),updatedAt:g().optional()});ue({role:B(["user","premium","staff","admin","owner"])});const Tf=je(vt,{title:g().min(1,"Title is required").max(200,"Title too long"),description:g().max(2e3,"Description too long").optional(),author:g().max(100,"Author name too long").optional(),artist:g().max(100,"Artist name too long").optional(),status:B(["ongoing","completed","hiatus","cancelled"]).default("ongoing"),type:B(["manga","manhwa","manhua","webtoon"]).default("manga"),genres:Zs(g()).optional().transform(t=>t?JSON.stringify(t):void 0),coverImageUrl:g().refine(t=>t===void 0||t.startsWith("/uploads/")||t.startsWith("/api/chapters/image/")||/^https?:\/\//.test(t),"Cover image must be a valid URL or upload path").optional(),rating:oe.number().min(0,"Rating must be at least 0").max(10,"Rating cannot exceed 10").optional(),totalChapters:oe.number().int().min(0).optional(),publishedYear:oe.number().int().min(1900).max(new Date().getFullYear()+5).optional(),isAdult:B(["true","false"]).default("false"),isFeatured:B(["true","false"]).default("false"),isTrending:B(["true","false"]).default("false"),isPopularToday:B(["true","false"]).default("false"),isLatestUpdate:B(["true","false"]).default("false"),isPinned:B(["true","false"]).default("false")});Tf.omit({genres:!0}).partial().extend({genres:Zs(g()).optional()});const Ef=je(al,{code:g().min(2,"Language code must be at least 2 characters").max(5,"Language code too long").regex(/^[a-z]{2}(-[A-Z]{2})?$/,"Invalid language code format (e.g., en, es, ja, en-US)"),name:g().min(1,"Language name is required").max(100,"Language name too long"),nativeName:g().min(1,"Native name is required").max(100,"Native name too long"),isActive:B(["true","false"]).default("true"),isDefault:B(["true","false"]).default("false")});Ef.partial();const Rf=je(xf,{seriesId:g().min(1,"Series ID is required"),languageId:g().min(1,"Language ID is required"),title:g().min(1,"Translated title is required").max(200,"Title too long").optional(),description:g().max(2e3,"Description too long").optional()});Rf.partial().omit({seriesId:!0,languageId:!0});const Df=je(ws,{seriesId:g().min(1,"Series ID is required"),chapterNumber:g().min(1,"Chapter number is required").max(20,"Chapter number too long"),title:g().max(200,"Chapter title too long").optional(),pages:Zs(g()).min(1,"At least one page is required").transform(t=>JSON.stringify(t)),totalPages:oe.number().int().min(1,"Must have at least 1 page").optional(),coverImageUrl:g().refine(t=>t===void 0||t.startsWith("/uploads/")||t.startsWith("/api/chapters/image/")||/^https?:\/\//.test(t),"Cover image must be a valid URL or upload path").optional(),isPublished:B(["true","false"]).default("true"),uploadedBy:g().optional(),requiresManualReorder:B(["true","false"]).default("false"),naturalSortConfidence:g().refine(t=>t===void 0||/^\d*\.?\d+$/.test(t)&&parseFloat(t)>=0&&parseFloat(t)<=1,{message:"Natural sort confidence must be a number between 0.0 and 1.0"}).default("1.0")});Df.partial();const Lf=je(gf,{category:B(["site","users","content","system"]),key:g().min(1,"Key is required").max(100,"Key too long"),value:g().min(0,"Value is required"),type:B(["string","number","boolean","json"]).default("string"),description:g().max(500,"Description too long").optional(),isPublic:ra().default(!1).transform(t=>t?"true":"false")});Lf.partial();ue({category:B(["site","users","content","system"]),key:g().min(1),value:qs(),type:B(["string","number","boolean","json"]).default("string"),description:g().optional(),isPublic:ra().default(!1).transform(t=>t?"true":"false")});je(bf,{userId:g().min(1,"User ID is required"),seriesId:g().min(1,"Series ID is required"),status:B(["reading","completed","plan_to_read","on_hold","dropped"]).default("reading")});ue({status:B(["reading","completed","plan_to_read","on_hold","dropped"])});je(yf,{userId:g().min(1,"User ID is required"),seriesId:g().optional(),chapterId:g().optional(),content:g().min(1,"Comment cannot be empty").max(1e3,"Comment cannot exceed 1000 characters")}).refine(t=>t.seriesId||t.chapterId,{message:"Comment must be for either a series or a chapter",path:["seriesId"]}).refine(t=>!(t.seriesId&&t.chapterId),{message:"Comment cannot be for both a series and a chapter",path:["seriesId"]});ue({content:g().min(1,"Comment cannot be empty").max(1e3,"Comment cannot exceed 1000 characters")});je(vf,{userId:g().min(1,"User ID is required"),seriesId:g().min(1,"Series ID is required"),chapterId:g().optional(),lastReadPage:oe.number().int().min(0,"Page number must be at least 0").default(0)});ue({chapterId:g().optional(),lastReadPage:oe.number().int().min(0,"Page number must be at least 0")});je(wf,{userId:g().min(1,"User ID is required"),seriesId:g().min(1,"Series ID is required"),rating:oe.number().int().min(1,"Rating must be at least 1").max(10,"Rating cannot exceed 10"),review:g().max(2e3,"Review cannot exceed 2000 characters").optional()});ue({rating:oe.number().int().min(1,"Rating must be at least 1").max(10,"Rating cannot exceed 10").optional(),review:g().max(2e3,"Review cannot exceed 2000 characters").optional()});je(il,{userId:g().min(1,"User ID is required"),amount:oe.number().int().refine(t=>t!==0,"Amount cannot be zero"),type:B(["purchase","admin_grant","unlock_chapter","refund","bonus"]),description:g().min(1,"Description is required").max(500,"Description too long"),relatedEntityId:g().optional()});Ct(il);const Mf=je(Aa,{name:g().min(1,"Package name is required").max(100,"Package name too long"),currencyAmount:oe.number().int().min(1,"Currency amount must be at least 1"),priceUSD:g().regex(/^\d+(\.\d{1,2})?$/,"Price must be a valid USD amount (e.g., 4.99)"),bonusPercentage:oe.number().int().min(0,"Bonus percentage cannot be negative").max(100,"Bonus percentage cannot exceed 100").default(0),isActive:B(["true","false"]).default("true"),displayOrder:oe.number().int().min(0,"Display order must be at least 0").default(0)});Ct(Aa);Mf.partial();je(ur,{userId:g().min(1,"User ID is required"),packageId:g().optional(),amountPaid:g().regex(/^\d+(\.\d{1,2})?$/,"Amount must be a valid USD amount (e.g., 4.99)"),currencyReceived:oe.number().int().min(0,"Currency received must be at least 0"),paymentProvider:g().min(1,"Payment provider is required"),transactionId:g().optional(),status:B(["completed","pending","failed","refunded"]).default("pending")});Ct(ur);ue({status:B(["completed","pending","failed","refunded"])});const Ff=je(ol,{chapterId:g().min(1,"Chapter ID is required"),accessType:B(["free","premium","locked"]),unlockCost:oe.number().int().min(0,"Unlock cost cannot be negative").default(0),isActive:B(["true","false"]).default("true")});Ct(ol);Ff.partial().omit({chapterId:!0});je(ll,{userId:g().min(1,"User ID is required"),chapterId:g().min(1,"Chapter ID is required"),costPaid:oe.number().int().min(0,"Cost paid cannot be negative")});Ct(ll);ue({userId:g().min(1,"User ID is required"),amount:oe.number().int().min(1,"Amount must be at least 1"),description:g().min(1,"Description is required").max(500,"Description too long"),relatedEntityId:g().optional()});ue({userId:g().min(1,"User ID is required"),amount:oe.number().int().min(1,"Amount must be at least 1"),description:g().min(1,"Description is required").max(500,"Description too long"),relatedEntityId:g().optional()});const Of=je(Ia,{name:g().min(1,"List name is required").max(100,"Name too long"),description:g().max(500,"Description too long").optional(),visibility:B(["private","public"]).default("private")});Ct(Ia);Of.partial().omit({userId:!0});je(nl,{listId:g().min(1,"List ID is required"),seriesId:g().min(1,"Series ID is required")});Ct(nl);const ul=["homepage","manga_detail","reader","search_results"],ml=["top_banner","bottom_banner","sidebar","in_content_1","in_content_2"],hl=["banner","sidebar","popup","inline"];ue({title:g().min(1,"Title is required").max(200,"Title too long"),description:g().max(1e3,"Description too long").optional(),imageUrl:g().url("Invalid image URL").or(g().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})),linkUrl:g().url("Invalid link URL"),type:B(hl,{errorMap:()=>({message:"Invalid ad type"})}),placement:g().optional(),page:B(ul,{errorMap:()=>({message:"Invalid page"})}).optional(),location:B(ml,{errorMap:()=>({message:"Invalid location"})}).optional(),isActive:B(["true","false"]).default("true"),startDate:g().datetime().optional().nullable(),endDate:g().datetime().optional().nullable(),displayOrder:oe.number().int().min(0,"Display order must be at least 0").default(0),targetCountries:g().optional().nullable(),targetDeviceTypes:g().optional().nullable(),targetUserRoles:g().optional().nullable(),targetLanguages:g().optional().nullable(),budget:g().optional().nullable(),costPerClick:g().optional().nullable(),costPerImpression:g().optional().nullable(),conversionGoal:B(["click","signup","purchase","download"]).optional().nullable(),frequencyCap:oe.number().int().min(1).optional().nullable(),dailyBudget:g().optional().nullable(),tags:g().optional().nullable(),notes:g().max(5e3).optional().nullable()}).refine(t=>t.startDate&&t.endDate?new Date(t.startDate)<new Date(t.endDate):!0,{message:"Start date must be before end date",path:["endDate"]}).refine(t=>{const s=t.page&&t.location,r=t.placement;return s||r},{message:"Must provide either (page and location) or placement",path:["page"]});Ct(rs);ue({title:g().min(1,"Title is required").max(200,"Title too long").optional(),description:g().max(1e3,"Description too long").optional(),imageUrl:g().url("Invalid image URL").or(g().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})).optional(),linkUrl:g().url("Invalid link URL").optional(),type:B(hl,{errorMap:()=>({message:"Invalid ad type"})}).optional(),placement:g().optional(),page:B(ul,{errorMap:()=>({message:"Invalid page"})}).optional(),location:B(ml,{errorMap:()=>({message:"Invalid location"})}).optional(),isActive:B(["true","false"]).optional(),startDate:g().datetime().optional().nullable(),endDate:g().datetime().optional().nullable(),displayOrder:oe.number().int().min(0,"Display order must be at least 0").optional(),targetCountries:g().optional().nullable(),targetDeviceTypes:g().optional().nullable(),targetUserRoles:g().optional().nullable(),targetLanguages:g().optional().nullable(),budget:g().optional().nullable(),costPerClick:g().optional().nullable(),costPerImpression:g().optional().nullable(),conversionGoal:B(["click","signup","purchase","download"]).optional().nullable(),frequencyCap:oe.number().int().min(1).optional().nullable(),dailyBudget:g().optional().nullable(),tags:g().optional().nullable(),notes:g().max(5e3).optional().nullable()}).refine(t=>t.startDate&&t.endDate?new Date(t.startDate)<new Date(t.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});const fl=ue({name:g().min(1,"Campaign name is required").max(200,"Campaign name too long"),description:g().max(1e3,"Description too long").optional(),status:B(["draft","active","paused","completed","archived"]).default("draft"),budget:g().regex(/^\d+(\.\d{1,2})?$/,"Budget must be a valid USD amount").optional().nullable(),startDate:g().datetime().optional().nullable(),endDate:g().datetime().optional().nullable()});fl.refine(t=>t.startDate&&t.endDate?new Date(t.startDate)<new Date(t.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});fl.partial().refine(t=>t.startDate&&t.endDate?new Date(t.startDate)<new Date(t.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});ue({adId:g().min(1,"Ad ID is required"),date:g().regex(/^\d{4}-\d{2}-\d{2}$/,"Date must be in YYYY-MM-DD format"),impressions:oe.number().int().min(0).default(0),clicks:oe.number().int().min(0).default(0),conversionCount:oe.number().int().min(0).default(0),spend:g().regex(/^\d+(\.\d{1,2})?$/,"Spend must be a valid USD amount").optional().nullable()});ue({adId:g().min(1,"Ad ID is required"),deviceType:B(["mobile","tablet","desktop","all"]),imageUrl:g().url("Invalid image URL").or(g().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})),width:oe.number().int().min(1).optional().nullable(),height:oe.number().int().min(1).optional().nullable(),fileSize:oe.number().int().min(0).optional().nullable(),isPrimary:B(["true","false"]).default("false")});ue({adId:g().min(1,"Ad ID is required"),checkType:B(["content_policy","brand_safety","prohibited_content","manual_review"]),status:B(["pending","approved","flagged","rejected"]).default("pending"),flagReason:g().max(500,"Flag reason too long").optional(),autoCheckResult:g().optional()});ue({status:B(["pending","approved","flagged","rejected"]),flagReason:g().max(500,"Flag reason too long").optional()});const qf=ue({name:g().min(1,"Template name is required").max(200,"Template name too long"),description:g().max(1e3,"Description too long").optional(),type:B(["banner","sidebar","popup","inline"]),category:B(["manga_promotion","sponsor","announcement","partner"]),thumbnailUrl:g().url("Invalid thumbnail URL").or(g().startsWith("/uploads/")).optional(),defaultConfig:g().optional(),isActive:B(["true","false"]).default("true")});qf.partial();ue({title:g().min(1,"Title is required").max(200,"Title too long"),description:g().max(1e3,"Description too long").optional(),imageUrl:g().url("Invalid image URL").or(g().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})),linkUrl:g().url("Invalid link URL"),type:B(["banner","sidebar","popup","inline"],{errorMap:()=>({message:"Invalid ad type"})}),page:B(["homepage","manga_detail","reader","search_results"],{errorMap:()=>({message:"Invalid page"})}),location:B(["top_banner","bottom_banner","sidebar","in_content_1","in_content_2"],{errorMap:()=>({message:"Invalid location"})}),isActive:B(["true","false"]).default("true"),startDate:g().datetime().optional().nullable(),endDate:g().datetime().optional().nullable(),displayOrder:oe.number().int().min(0,"Display order must be at least 0").default(0),campaignId:g().optional().nullable(),status:B(["draft","pending","approved","rejected"]).default("draft"),weight:oe.number().int().min(1,"Weight must be at least 1").default(1),frequencyCap:oe.number().int().min(1).optional().nullable()}).refine(t=>t.startDate&&t.endDate?new Date(t.startDate)<new Date(t.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});ue({title:g().min(1,"Title is required").max(200,"Title too long").optional(),description:g().max(1e3,"Description too long").optional(),imageUrl:g().url("Invalid image URL").or(g().startsWith("/uploads/",{message:"Image URL must be a valid URL or upload path"})).optional(),linkUrl:g().url("Invalid link URL").optional(),type:B(["banner","sidebar","popup","inline"],{errorMap:()=>({message:"Invalid ad type"})}).optional(),placement:B(["homepage","manga-page","chapter-reader","browse","all"],{errorMap:()=>({message:"Invalid placement"})}).optional(),isActive:B(["true","false"]).optional(),startDate:g().datetime().optional().nullable(),endDate:g().datetime().optional().nullable(),displayOrder:oe.number().int().min(0,"Display order must be at least 0").optional(),campaignId:g().optional().nullable(),status:B(["draft","pending","approved","rejected"]).optional(),weight:oe.number().int().min(1,"Weight must be at least 1").optional(),frequencyCap:oe.number().int().min(1).optional().nullable()}).refine(t=>t.startDate&&t.endDate?new Date(t.startDate)<new Date(t.endDate):!0,{message:"Start date must be before end date",path:["endDate"]});ue({reviewNotes:g().max(1e3,"Review notes too long").optional()});ue({reviewNotes:g().min(1,"Rejection reason is required").max(1e3,"Review notes too long")});const $f=ue({code:g().min(1,"Coupon code is required").max(50,"Code too long").regex(/^[A-Z0-9_-]+$/i,"Code must contain only letters, numbers, dashes, and underscores"),type:B(["percentage","fixed"],{errorMap:()=>({message:"Type must be 'percentage' or 'fixed'"})}),value:g().regex(/^\d+(\.\d{1,2})?$/,"Value must be a valid number"),minPurchaseAmount:g().regex(/^\d+(\.\d{1,2})?$/,"Minimum purchase must be a valid amount").optional().nullable(),maxUses:oe.number().int().min(1).optional().nullable(),expiresAt:g().datetime().optional().nullable(),isActive:B(["true","false"]).default("true")});$f.partial();const zf=ue({name:g().min(1,"Bundle name is required").max(200,"Name too long"),description:g().max(1e3,"Description too long").optional(),bundleType:B(["currency","subscription","chapter","mixed"]),priceUSD:g().regex(/^\d+(\.\d{1,2})?$/,"Price must be a valid USD amount"),items:g(),isActive:B(["true","false"]).default("true"),displayOrder:oe.number().int().min(0).default(0)});zf.partial();const Uf=ue({userId:g().min(1,"User ID is required"),purchaseId:g().optional().nullable(),invoiceNumber:g().min(1,"Invoice number is required").regex(/^INV-\d{8}-\d{4}$/,"Invalid invoice number format"),totalAmount:g().regex(/^\d+(\.\d{1,2})?$/,"Total must be a valid USD amount"),taxAmount:g().regex(/^\d+(\.\d{1,2})?$/,"Tax must be a valid USD amount").default("0.00"),discountAmount:g().regex(/^\d+(\.\d{1,2})?$/,"Discount must be a valid USD amount").default("0.00"),finalAmount:g().regex(/^\d+(\.\d{1,2})?$/,"Final amount must be a valid USD amount"),status:B(["draft","issued","paid","voided"]).default("draft"),pdfPath:g().optional().nullable()});Uf.partial();ue({invoiceId:g().min(1,"Invoice ID is required"),itemType:B(["currency_package","subscription","bundle","chapter_unlock"]),itemId:g().optional().nullable(),description:g().min(1,"Description is required").max(500,"Description too long"),quantity:oe.number().int().min(1).default(1),unitPrice:g().regex(/^\d+(\.\d{1,2})?$/,"Unit price must be a valid USD amount"),totalPrice:g().regex(/^\d+(\.\d{1,2})?$/,"Total price must be a valid USD amount")});const Bf=ue({userId:g().min(1,"User ID is required"),packageId:g().min(1,"Package ID is required"),packageType:B(["currency","subscription","bundle"]),assignedBy:g().min(1,"Assigner ID is required"),reason:g().min(1,"Reason is required").max(500,"Reason too long"),expiresAt:g().datetime().optional().nullable(),isActive:B(["true","false"]).default("true")});Bf.partial();const Qf=H("user_warnings",{id:l("id").primaryKey().$defaultFn(()=>W()),userId:l("user_id").notNull().references(()=>ae.id,{onDelete:"cascade"}),issuedBy:l("issued_by").notNull().references(()=>ae.id,{onDelete:"cascade"}),reason:l("reason").notNull(),severity:l("severity").notNull().default("low"),notes:l("notes"),isActive:l("is_active").notNull().default("true"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({userIdx:R("user_warnings_user_idx").on(t.userId),issuedByIdx:R("user_warnings_issued_by_idx").on(t.issuedBy),severityIdx:R("user_warnings_severity_idx").on(t.severity)})),Kf=H("admin_activity_logs",{id:l("id").primaryKey().$defaultFn(()=>W()),adminId:l("admin_id").references(()=>ae.id,{onDelete:"cascade"}),action:l("action").notNull(),targetType:l("target_type").notNull(),targetId:l("target_id"),details:l("details"),ipAddress:l("ip_address"),userAgent:l("user_agent"),createdAt:l("created_at").default(L`(datetime('now'))`)},t=>({adminIdx:R("admin_activity_logs_admin_idx").on(t.adminId),actionIdx:R("admin_activity_logs_action_idx").on(t.action),targetIdx:R("admin_activity_logs_target_idx").on(t.targetType,t.targetId),createdIdx:R("admin_activity_logs_created_idx").on(t.createdAt)})),pl=H("roles",{id:l("id").primaryKey().$defaultFn(()=>W()),name:l("name").notNull().unique(),description:l("description"),hierarchyLevel:$("hierarchy_level").notNull().default(0),color:l("color").default("#6366f1"),isSystem:l("is_system").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({hierarchyIdx:R("roles_hierarchy_idx").on(t.hierarchyLevel),nameIdx:pe("roles_name_idx").on(t.name)})),Vf=H("role_permissions",{id:l("id").primaryKey().$defaultFn(()=>W()),roleId:l("role_id").notNull().references(()=>pl.id,{onDelete:"cascade"}),manageUsers:l("manage_users").notNull().default("false"),viewUsers:l("view_users").notNull().default("false"),banUsers:l("ban_users").notNull().default("false"),warnUsers:l("warn_users").notNull().default("false"),assignRoles:l("assign_roles").notNull().default("false"),manageSeries:l("manage_series").notNull().default("false"),manageChapters:l("manage_chapters").notNull().default("false"),moderateComments:l("moderate_comments").notNull().default("false"),manageAds:l("manage_ads").notNull().default("false"),viewAdAnalytics:l("view_ad_analytics").notNull().default("false"),viewAnalytics:l("view_analytics").notNull().default("false"),viewDetailedAnalytics:l("view_detailed_analytics").notNull().default("false"),configureRoles:l("configure_roles").notNull().default("false"),manageSettings:l("manage_settings").notNull().default("false"),viewLogs:l("view_logs").notNull().default("false"),handleDmca:l("handle_dmca").notNull().default("false"),manageSubscriptions:l("manage_subscriptions").notNull().default("false"),manageCurrency:l("manage_currency").notNull().default("false"),createdAt:l("created_at").default(L`(datetime('now'))`),updatedAt:l("updated_at").default(L`(datetime('now'))`)},t=>({roleIdx:R("role_permissions_role_idx").on(t.roleId),uniqueRolePermissions:pe("unique_role_permissions").on(t.roleId)}));je(Qf).omit({id:!0,createdAt:!0}).extend({reason:g().min(1,"Reason is required").max(500,"Reason too long"),severity:B(["low","medium","high","critical"]).default("low"),notes:g().max(1e3,"Notes too long").optional()});je(Kf).omit({id:!0,createdAt:!0}).extend({action:g().min(1,"Action is required"),targetType:g().min(1,"Target type is required"),details:g().optional()});const Hf=je(pl).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({name:g().min(1,"Role name is required").max(50,"Role name too long"),description:g().max(200,"Description too long").optional(),hierarchyLevel:bi().int().min(0).max(100),color:g().regex(/^#[0-9A-Fa-f]{6}$/,"Invalid color format").optional()});Hf.partial();const Wf=je(Vf).omit({id:!0,createdAt:!0,updatedAt:!0});Wf.partial().required({roleId:!0});function Gf(){const[,t]=Ce(),{toast:s}=Oe(),r=Ut(),{data:a}=be({queryKey:["enabled-oauth-providers"],queryFn:async()=>{const f=await fetch("/api/auth/oauth/enabled",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}});return f.ok?f.json():{providers:[]}}}),n=Js({resolver:or(Af),defaultValues:{username:"",password:""}}),i=Ie({mutationFn:async f=>Fe("POST","/api/auth/login",f),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/auth/user"]}),r.invalidateQueries({queryKey:["/api/currency/balance"]}),s({title:"Welcome back!",description:"You've successfully logged in.",variant:"success"}),t("/")},onError:f=>{s({title:"Login failed",description:f.message||"Please check your username and password.",variant:"error"})}}),c=f=>{i.mutate(f)},d=f=>{f.key==="Enter"&&!i.isPending&&(f.preventDefault(),n.handleSubmit(c)())},u=n.formState.errors,h=Object.keys(u).length>0,m=u.username?.message||u.password?.message;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Login to Your AmourScans Account - Access Your Library",description:"Sign in to AmourScans to access your personal manga library and reading history. Continue your manga journey and track your reading progress effortlessly.",keywords:"manga login, sign in, manga account, manga reader login, manhwa login"}),e.jsx(at,{}),e.jsxs("div",{"aria-live":"assertive","aria-atomic":"true",className:"sr-only",children:[h&&m&&e.jsxs("span",{children:["Form error: ",m]}),i.isError&&e.jsxs("span",{children:["Login error: ",i.error?.message]})]}),e.jsx("div",{className:"flex items-center justify-center p-4 min-h-[calc(100vh-4rem)]",children:e.jsxs("div",{className:"w-full max-w-md px-4 sm:px-6 md:max-w-lg lg:max-w-xl",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 mb-6 flex items-center justify-center",children:e.jsx("img",{src:"/amourscans-icon.png",alt:"AmourScans",className:"w-16 h-16 object-contain drop-shadow-2xl"})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:"Welcome Back"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(lr,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(c),className:"space-y-4",children:[e.jsx(gt,{control:n.control,name:"username",render:({field:f})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Username or Email"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),e.jsx(Qe,{placeholder:"Enter your username or email",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm","data-testid":"input-username",autoComplete:"username",onKeyDown:d,...f})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(gt,{control:n.control,name:"password",render:({field:f})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Password"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative h-12",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400 z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx(Qe,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm","data-testid":"input-password",autoComplete:"current-password",onKeyDown:d,...f})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx("div",{className:"text-right mt-2",children:e.jsx(X,{href:"/forgot-password",children:e.jsx(S,{variant:"ghost",className:"p-0 h-auto text-sm text-muted-foreground hover:text-primary hover:bg-transparent",children:"Forgot password?"})})}),e.jsx(S,{type:"submit",className:"w-full h-12 mt-6 bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80 text-primary-foreground font-medium rounded-lg transition-all duration-200 shadow-lg shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed",disabled:i.isPending,"data-testid":"button-login",children:i.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Login"})]})}),a?.providers&&a.providers.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"bg-background px-4 py-1 text-muted-foreground rounded-md border border-border/50",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.providers.includes("discord")&&e.jsxs(S,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/discord",children:[e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z",fill:"#5865F2"})}),e.jsx("span",{className:"ml-2 text-xs",children:"Discord"})]}),a.providers.includes("google")&&e.jsxs(S,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/google",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e.jsx("span",{className:"ml-2 text-xs",children:"Google"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Not a member?"," ",e.jsx(X,{href:"/signup",children:e.jsx(S,{variant:"ghost",className:"p-0 h-auto text-blue-400 hover:underline font-medium","data-testid":"link-signup",children:"Create New Account"})})]})})]}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx("img",{src:"/amourscans-icon.png",alt:"AmourScans",className:"w-5 h-5 object-contain"}),e.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-[#a195f9] via-[#f2a1f2] to-[#f2a1f2] bg-clip-text text-transparent",children:"AmourScans"})]}),e.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Read Comics, manga, manhwa. Translated swiftly. AmourScans your ultimate library."}),e.jsxs("div",{className:"flex justify-center items-center space-x-4 text-xs text-gray-600",children:[e.jsx("span",{children:"Privacy Policy"}),e.jsx("span",{children:""}),e.jsx("span",{children:"DMCA"}),e.jsx("span",{children:""}),e.jsx(X,{href:"/",className:"text-xs text-gray-600 hover:underline hover:text-gray-400 transition-colors",children:"Discord"})]})]})]})})]})}function Xf(){const[,t]=Ce(),{toast:s}=Oe(),r=Ut(),[a,n]=o.useState(null),{data:i}=be({queryKey:["enabled-oauth-providers"],queryFn:async()=>{const f=await fetch("/api/auth/oauth/enabled",{credentials:"include",headers:{"X-Requested-With":"XMLHttpRequest"}});return f.ok?f.json():{providers:[]}}}),c=Js({resolver:or(Pf),defaultValues:{username:"",email:"",password:"",confirmPassword:"",profilePicture:""}}),d=Ie({mutationFn:async f=>Fe("POST","/api/auth/signup",f),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/auth/user"]}),s({title:"Account created!",description:"Welcome to AmourScans. Please log in to continue.",variant:"success"}),t("/login")},onError:f=>{s({title:"Signup failed",description:f.message||"Unable to create account. Please try again.",variant:"error"})}}),u=f=>{d.mutate({...f,profilePicture:a||""})},h=f=>{f.key==="Enter"&&!d.isPending&&(f.preventDefault(),c.handleSubmit(u)())},m=f=>{const p=f.target.files?.[0];if(p){if(p.size>2097152){s({title:"File too large",description:"Please select an image smaller than 2MB.",variant:"error"});return}if(!p.type.startsWith("image/")){s({title:"Invalid file type",description:"Please select an image file (JPG, PNG, etc.).",variant:"error"});return}const y=new FileReader;y.onload=b=>{const w=b.target?.result;n(w),c.setValue("profilePicture",w)},y.readAsDataURL(p)}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Create Your Free AmourScans Account - Sign Up Today",description:"Create your free manga reader account and start exploring thousands of manga series. Track your reading progress, build your library, and discover new favorites today.",keywords:"manga signup, create account, manga registration, free manga account, join manga reader"}),e.jsx(at,{}),e.jsx("div",{className:"flex items-center justify-center p-4 pt-20",children:e.jsxs("div",{className:"w-full max-w-md px-4 sm:px-6 md:max-w-lg lg:max-w-xl",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mb-4 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary via-accent to-primary flex items-center justify-center shadow-2xl shadow-primary/40",children:e.jsx(_e,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-2",children:"Create New Account"}),e.jsx("p",{className:"text-muted-foreground text-center text-sm sm:text-base",children:"Join AmourScans to start your manga journey"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col items-center space-y-3 mb-6",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("div",{className:"w-[77px] h-[77px] rounded-full bg-card/50 border-2 border-border flex items-center justify-center overflow-hidden cursor-pointer hover:border-primary hover:scale-105 transition-all duration-300 backdrop-blur-sm",children:a?e.jsx("img",{src:a,alt:"Profile",className:"w-full h-full object-cover"}):e.jsx(Ud,{className:"w-7 h-7 text-muted-foreground group-hover:text-primary transition-colors"})}),e.jsx("input",{id:"profile-picture-upload",type:"file",accept:"image/*",autoComplete:"off",onChange:m,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),e.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 bg-primary rounded-full flex items-center justify-center hover:scale-110 transition-transform duration-300",children:e.jsx(au,{className:"w-3 h-3 text-white"})})]}),e.jsx("label",{htmlFor:"profile-picture-upload",className:"text-sm font-medium text-foreground cursor-pointer hover:text-primary transition-colors",children:"Choose Picture"})]}),e.jsx(lr,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(u),className:"space-y-4",children:[e.jsx(gt,{control:c.control,name:"username",render:({field:f})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Username"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx(cs,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none"}),e.jsx(Qe,{placeholder:"Enter your username",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"username",onKeyDown:h,...f})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(gt,{control:c.control,name:"email",render:({field:f})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Email"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx(zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none"}),e.jsx(Qe,{type:"email",placeholder:"your@example.com",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"email",onKeyDown:h,...f})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(gt,{control:c.control,name:"password",render:({field:f})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Password"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx(Qe,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"new-password",onKeyDown:h,...f})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(gt,{control:c.control,name:"confirmPassword",render:({field:f})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Confirm Password"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx(Qe,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"new-password",onKeyDown:h,...f})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(S,{type:"submit",disabled:d.isPending,className:"w-full h-12 mt-6 bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80 text-primary-foreground font-medium rounded-lg transition-all duration-200 shadow-lg shadow-primary/30 disabled:opacity-50 disabled:cursor-not-allowed",children:d.isPending?e.jsxs(e.Fragment,{children:[e.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]})}),i?.providers&&i.providers.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t border-border"})}),e.jsx("div",{className:"relative flex justify-center text-sm",children:e.jsx("span",{className:"bg-background px-4 py-1 text-muted-foreground rounded-md border border-border/50",children:"Or continue with"})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.providers.includes("discord")&&e.jsxs(S,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/discord",children:[e.jsx("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0019 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1568 2.4189Z",fill:"#5865F2"})}),e.jsx("span",{className:"ml-2 text-xs",children:"Discord"})]}),i.providers.includes("google")&&e.jsxs(S,{type:"button",variant:"outline",className:"h-11 bg-card/50 border-border hover:bg-card/70 text-foreground transition-all duration-200 backdrop-blur-sm",onClick:()=>window.location.href="/api/auth/google",children:[e.jsxs("svg",{className:"w-4 h-4",viewBox:"0 0 24 24",fill:"currentColor",children:[e.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),e.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),e.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),e.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),e.jsx("span",{className:"ml-2 text-xs",children:"Google"})]})]})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-400",children:["Already have an account?"," ",e.jsx(X,{href:"/login",children:e.jsx(S,{variant:"ghost",className:"p-0 h-auto text-blue-400 underline cursor-pointer font-medium",children:"Login"})})]})})]}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(_e,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-lg font-bold text-foreground",children:"AmourScans"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Read Comics, manga, manhwa. Translated swiftly. AmourScans your ultimate library."}),e.jsxs("div",{className:"flex justify-center space-x-4 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Privacy Policy"}),e.jsx("span",{children:""}),e.jsx("span",{children:"DMCA"}),e.jsx("span",{children:""}),e.jsx("span",{children:"Discord"})]})]})]})})]})}function Yf(){const{toast:t}=Oe(),s=Ie({mutationFn:async({token:r})=>Fe("POST","/api/auth/verify-email",{token:r}),onSuccess:()=>{t({title:"Email verified!",description:"Your email has been successfully verified. You can now log in."})},onError:r=>{t({title:"Verification failed",description:r.message||"Invalid or expired verification token.",variant:"error"})}});return{verifyEmail:s.mutate,isVerifying:s.isPending,isSuccess:s.isSuccess,isError:s.isError,error:s.error}}function Jf(){const[,t]=Ce(),r=new URLSearchParams(fi()).get("token"),{verifyEmail:a,isVerifying:n,isSuccess:i,isError:c,error:d}=Yf();o.useEffect(()=>{r&&a({token:r})},[r,a]),o.useEffect(()=>{if(i){const h=setTimeout(()=>{t("/login")},3e3);return()=>clearTimeout(h)}},[i,t]);const u=()=>d&&typeof d=="object"&&"message"in d?d.message:"Invalid or expired verification token.";return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(at,{}),e.jsx("div",{className:"flex items-center justify-center p-4 min-h-[calc(100vh-4rem)]",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-8",children:[e.jsx("div",{className:"w-20 h-20 mb-6 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary via-accent to-primary flex items-center justify-center shadow-2xl shadow-primary/40",children:e.jsx(_e,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Email Verification"})]}),e.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border rounded-lg p-8",children:[!r&&e.jsxs("div",{className:"text-center",children:[e.jsx(Us,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Invalid Link"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"No verification token found. Please check your email for the correct link."}),e.jsx(S,{onClick:()=>t("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Go to Login"})]}),r&&n&&e.jsxs("div",{className:"text-center",children:[e.jsx(vs,{className:"w-12 h-12 text-primary mx-auto mb-4 animate-spin"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Verifying Email"}),e.jsx("p",{className:"text-muted-foreground",children:"Please wait while we verify your email address..."})]}),r&&i&&e.jsxs("div",{className:"text-center",children:[e.jsx(da,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Email Verified!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your email has been successfully verified. Redirecting to login..."}),e.jsx(S,{onClick:()=>t("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Go to Login Now"})]}),r&&c&&e.jsxs("div",{className:"text-center",children:[e.jsx(Us,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:u()}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{onClick:()=>t("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Go to Login"}),e.jsx(S,{onClick:()=>t("/signup"),variant:"outline",className:"w-full",children:"Back to Signup"})]})]})]})]})})]})}function Zf(){const{toast:t}=Oe(),s=Ie({mutationFn:async({email:r})=>Fe("POST","/api/auth/forgot-password",{email:r}),onSuccess:()=>{t({title:"Email sent!",description:"If an account with that email exists, a password reset link has been sent."})},onError:r=>{t({title:"Request failed",description:r.message||"Failed to process password reset request. Please try again.",variant:"error"})}});return{forgotPassword:s.mutate,isLoading:s.isPending,isSuccess:s.isSuccess}}function ep(){const{toast:t}=Oe(),s=Ie({mutationFn:async({token:r,newPassword:a,confirmPassword:n})=>Fe("POST","/api/auth/reset-password",{token:r,newPassword:a,confirmPassword:n}),onSuccess:()=>{t({title:"Password reset successful!",description:"Your password has been reset. You can now log in with your new password."})},onError:r=>{t({title:"Reset failed",description:r.message||"Failed to reset password. Please try again.",variant:"error"})}});return{resetPassword:s.mutate,isResetting:s.isPending,isSuccess:s.isSuccess,isError:s.isError,error:s.error}}function tp(){const{toast:t}=Oe(),s=Ie({mutationFn:async({token:r})=>Fe("POST","/api/auth/verify-reset-token",{token:r}),onError:r=>{t({title:"Invalid token",description:r.message||"Invalid or expired reset token.",variant:"error"})}});return{verifyToken:s.mutate,isVerifying:s.isPending,isSuccess:s.isSuccess,isError:s.isError,error:s.error}}const sp=ue({email:g().email("Please enter a valid email address")});function rp(){const[,t]=Ce(),{forgotPassword:s,isLoading:r,isSuccess:a}=Zf(),n=Js({resolver:or(sp),defaultValues:{email:""}}),i=d=>{s(d)},c=d=>{d.key==="Enter"&&!r&&(d.preventDefault(),n.handleSubmit(i)())};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Forgot Password - AmourScans",description:"Reset your AmourScans account password. Enter your email address to receive password reset instructions.",keywords:"forgot password, reset password, manga account recovery"}),e.jsx(at,{}),e.jsx("div",{className:"flex items-center justify-center p-4 min-h-[calc(100vh-4rem)]",children:e.jsxs("div",{className:"w-full max-w-md px-4 sm:px-6 md:max-w-lg lg:max-w-xl",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 mb-6 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-primary via-accent to-primary flex items-center justify-center shadow-2xl shadow-primary/40",children:e.jsx(_e,{className:"w-8 h-8 text-white"})})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Forgot Password"}),e.jsx("p",{className:"text-muted-foreground text-center text-sm",children:"Enter your email and we'll send you reset instructions"})]}),e.jsxs(S,{variant:"ghost",className:"mb-4 text-muted-foreground hover:text-foreground",onClick:()=>t("/login"),children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),e.jsx("div",{className:"space-y-6",children:a?e.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border rounded-lg p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(zr,{className:"w-8 h-8 text-green-500"})}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Check Your Email"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"If an account with that email exists, we've sent password reset instructions."}),e.jsx(S,{onClick:()=>t("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Back to Login"})]}):e.jsx(lr,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(i),className:"space-y-4",children:[e.jsx(gt,{control:n.control,name:"email",render:({field:d})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Email Address"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx(zr,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none"}),e.jsx(Qe,{type:"email",placeholder:"your@example.com",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"email",onKeyDown:c,...d})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(S,{type:"submit",className:"w-full h-12 mt-6 bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80 text-primary-foreground font-medium rounded-lg transition-all duration-200 shadow-lg shadow-primary/30",disabled:r,children:r?"Sending...":"Send Reset Link"})]})})}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx(_e,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-lg font-bold text-foreground",children:"AmourScans"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Read Comics, manga, manhwa. Translated swiftly. AmourScans your ultimate library."})]})]})})]})}const ap=ue({newPassword:g().min(8,"Password must be at least 8 characters").max(100,"Password too long"),confirmPassword:g()}).refine(t=>t.newPassword===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function np(){const[,t]=Ce(),r=new URLSearchParams(fi()).get("token"),{verifyToken:a,isVerifying:n,isSuccess:i,isError:c}=tp(),{resetPassword:d,isResetting:u,isSuccess:h}=ep(),m=Js({resolver:or(ap),defaultValues:{newPassword:"",confirmPassword:""}});o.useEffect(()=>{r&&a({token:r})},[r,a]),o.useEffect(()=>{if(h){const x=setTimeout(()=>{t("/login")},3e3);return()=>clearTimeout(x)}},[h,t]);const f=x=>{r&&d({token:r,newPassword:x.newPassword,confirmPassword:x.confirmPassword})},p=x=>{x.key==="Enter"&&!u&&(x.preventDefault(),m.handleSubmit(f)())};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Reset Password - AmourScans",description:"Create a new password for your AmourScans account.",keywords:"reset password, new password, manga account security"}),e.jsx(at,{}),e.jsx("div",{className:"flex items-center justify-center p-4 min-h-[calc(100vh-4rem)]",children:e.jsxs("div",{className:"w-full max-w-md px-4 sm:px-6 md:max-w-lg lg:max-w-xl",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center mb-12",children:[e.jsx("div",{className:"w-20 h-20 mb-6 flex items-center justify-center",children:e.jsx("img",{src:"/amourscans-icon.png",alt:"AmourScans",className:"w-16 h-16 object-contain drop-shadow-2xl"})}),e.jsx("h1",{className:"text-2xl font-bold text-foreground mb-2",children:"Reset Password"})]}),e.jsxs("div",{className:"bg-card/50 backdrop-blur-sm border border-border rounded-lg p-8",children:[!r&&e.jsxs("div",{className:"text-center",children:[e.jsx(Us,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Invalid Link"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"No reset token found. Please check your email for the correct link."}),e.jsx(S,{onClick:()=>t("/forgot-password"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Request New Link"})]}),r&&n&&e.jsxs("div",{className:"text-center",children:[e.jsx(vs,{className:"w-12 h-12 text-primary mx-auto mb-4 animate-spin"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Verifying Link"}),e.jsx("p",{className:"text-muted-foreground",children:"Please wait while we verify your reset link..."})]}),r&&c&&e.jsxs("div",{className:"text-center",children:[e.jsx(Us,{className:"w-12 h-12 text-destructive mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"This password reset link is invalid or has expired. Please request a new one."}),e.jsx(S,{onClick:()=>t("/forgot-password"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Request New Link"})]}),r&&i&&!h&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{variant:"ghost",className:"mb-4 text-muted-foreground hover:text-foreground",onClick:()=>t("/login"),children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Back to Login"]}),e.jsx(lr,{...m,children:e.jsxs("form",{onSubmit:m.handleSubmit(f),className:"space-y-4",children:[e.jsx(gt,{control:m.control,name:"newPassword",render:({field:x})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"New Password"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx(Qe,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"new-password",onKeyDown:p,...x})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(gt,{control:m.control,name:"confirmPassword",render:({field:x})=>e.jsxs(ct,{children:[e.jsx(dt,{className:"text-sm font-medium text-foreground",children:"Confirm New Password"}),e.jsx(ut,{children:e.jsxs("div",{className:"relative",children:[e.jsx("svg",{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground z-10 pointer-events-none",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),e.jsx(Qe,{type:"password",placeholder:"",className:"pl-10 h-12 bg-card/50 border-border text-foreground placeholder:text-muted-foreground focus:border-primary focus:ring-primary/20 rounded-lg backdrop-blur-sm",autoComplete:"new-password",onKeyDown:p,...x})]})}),e.jsx(mt,{className:"text-red-400 text-xs"})]})}),e.jsx(S,{type:"submit",className:"w-full h-12 mt-6 bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80 text-primary-foreground font-medium rounded-lg transition-all duration-200 shadow-lg shadow-primary/30",disabled:u,children:u?"Resetting Password...":"Reset Password"})]})})]}),r&&h&&e.jsxs("div",{className:"text-center",children:[e.jsx(da,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your password has been reset. Redirecting to login..."}),e.jsx(S,{onClick:()=>t("/login"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/80 hover:to-accent/80",children:"Go to Login Now"})]})]}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[e.jsx("img",{src:"/amourscans-icon.png",alt:"AmourScans",className:"w-5 h-5 object-contain"}),e.jsx("span",{className:"text-lg font-bold bg-gradient-to-r from-[#a195f9] via-[#f2a1f2] to-[#f2a1f2] bg-clip-text text-transparent",children:"AmourScans"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-4",children:"Read Comics, manga, manhwa. Translated swiftly. AmourScans your ultimate library."})]})]})})]})}function ip(){const[t]=Ce(),[s,r]=o.useState(!1),a=t==="/signup"||t.startsWith("/signup?");o.useEffect(()=>{const i=()=>{r(window.pageYOffset>500)};return window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}},[]);const n=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx(e.Fragment,{children:s&&!a&&e.jsx("button",{onClick:n,className:"hidden md:flex fixed bottom-8 right-8 z-[60] w-12 h-12 rounded-full bg-gradient-to-br from-[#4b4bc3] to-[#1e1e76] hover:from-[#a195f9] hover:to-[#707ff5] transition-all duration-150 ease-out shadow-[0_4px_20px_rgba(75,75,195,0.4)] hover:shadow-[0_8px_30px_rgba(161,149,249,0.6)] hover:-translate-y-1 hover:scale-105 active:translate-y-0 active:scale-100 items-center justify-center group backdrop-blur-md border-2 border-[#707ff5]/30 hover:border-[#a195f9]/50 animate-in fade-in slide-in-from-bottom-4","aria-label":"Scroll to top","data-testid":"scroll-to-top-button",children:e.jsx(Ri,{className:"w-6 h-6 text-white transition-all duration-150 group-hover:-translate-y-0.5 drop-shadow-lg"})})})}function xl(t){const{data:s,isLoading:r,error:a,isError:n}=be({queryKey:["/api/series",t],queryFn:ys({on401:"throw"}),retry:!1,enabled:!!t});return{manga:s,isLoading:r,error:a,isError:n}}function Pa(t){const{data:s,isLoading:r,error:a,isError:n}=be({queryKey:[`/api/series/${t}/chapters`],queryFn:ys({on401:"throw"}),retry:!1,enabled:!!t});return{chapters:s||[],isLoading:r,error:a,isError:n}}function op(t){const{data:s,isLoading:r,error:a,isError:n}=be({queryKey:["/api/series/:seriesId/progress",t],queryFn:async()=>{if(!t)throw new Error("Series ID is required");const i=await fetch(`/api/series/${t}/progress`,{credentials:"include"});if(i.status===401||i.status===404)return null;if(!i.ok)throw new Error("Failed to fetch reading progress");return i.json()},enabled:!!t,retry:!1});return{progress:s||null,isLoading:r,error:a,isError:n}}function lp(){const t=Ie({mutationFn:async({seriesId:s,chapterId:r,lastReadPage:a})=>Fe("POST",`/api/series/${s}/progress`,{chapterId:r,lastReadPage:a}),onSuccess:(s,r)=>{U.invalidateQueries({queryKey:["/api/series/:seriesId/progress",r.seriesId]}),U.invalidateQueries({queryKey:["/api/progress"]})}});return{saveProgress:t.mutate,saveProgressAsync:t.mutateAsync,isSaving:t.isPending,error:t.error}}function lg(t=!1){const{data:s,isLoading:r,error:a,isError:n}=be({queryKey:["/api/progress"],queryFn:async()=>{const i=await fetch("/api/progress",{credentials:"include"});if(i.status===401)return[];if(!i.ok)throw new Error("Failed to fetch user reading progress");return i.json()},enabled:t,retry:!1});return{progressList:s||[],isLoading:r,error:a,isError:n}}function cg(){const t=Ie({mutationFn:async s=>Fe("DELETE",`/api/series/${s}/progress`),onSuccess:(s,r)=>{U.invalidateQueries({queryKey:["/api/series/:seriesId/progress",r]}),U.invalidateQueries({queryKey:["/api/progress"]})}});return{deleteProgress:t.mutate,isDeleting:t.isPending}}function cp(t){const{data:s,isLoading:r}=be({queryKey:["/api/follow/check",t],queryFn:async()=>{if(!t)return{isFollowing:!1};const a=await fetch(`/api/follow/check/${t}`,{credentials:"include"});if(a.status===401)return{isFollowing:!1};if(!a.ok)throw new Error("Failed to check follow status");return a.json()},enabled:!!t,retry:!1});return{isFollowing:s?.isFollowing||!1,notificationsEnabled:s?.notificationsEnabled,isLoading:r}}function dp(){const{toast:t}=Oe(),s=Ie({mutationFn:async({seriesId:r,notificationsEnabled:a})=>Fe("POST",`/api/follow/${r}`,{notificationsEnabled:a}),onMutate:async({seriesId:r})=>{await U.cancelQueries({queryKey:["/api/follow"]}),await U.cancelQueries({queryKey:["/api/follow/check",r]});const a=U.getQueryData(["/api/follow"]),n=U.getQueryData(["/api/follow/check",r]);return U.setQueryData(["/api/follow/check",r],{isFollowing:!0,notificationsEnabled:!0}),{previousFollows:a,previousStatus:n,seriesId:r}},onSuccess:(r,{seriesId:a})=>{U.invalidateQueries({queryKey:["/api/follow"]}),U.invalidateQueries({queryKey:["/api/follow/check",a]}),U.invalidateQueries({queryKey:["/api/series",a,"followers"]}),t({title:"Following series",description:"You will receive notifications for new chapters."})},onError:(r,{seriesId:a},n)=>{n?.previousStatus&&U.setQueryData(["/api/follow/check",a],n.previousStatus),n?.previousFollows&&U.setQueryData(["/api/follow"],n.previousFollows);const i=r.message==="You are already following this series"?"You are already following this series":"Failed to follow series";t({title:"Error",description:i,variant:"error"})}});return{followSeries:s.mutate,isFollowing:s.isPending}}function up(){const{toast:t}=Oe(),s=Ie({mutationFn:async r=>Fe("DELETE",`/api/follow/${r}`),onMutate:async r=>{await U.cancelQueries({queryKey:["/api/follow"]}),await U.cancelQueries({queryKey:["/api/follow/check",r]});const a=U.getQueryData(["/api/follow"]),n=U.getQueryData(["/api/follow/check",r]);return a&&U.setQueryData(["/api/follow"],a.filter(i=>i.seriesId!==r)),U.setQueryData(["/api/follow/check",r],{isFollowing:!1}),{previousFollows:a,previousStatus:n,seriesId:r}},onSuccess:(r,a)=>{U.invalidateQueries({queryKey:["/api/follow"]}),U.invalidateQueries({queryKey:["/api/follow/check",a]}),U.invalidateQueries({queryKey:["/api/series",a,"followers"]}),t({title:"Unfollowed series",description:"You will no longer receive notifications for this series."})},onError:(r,a,n)=>{n?.previousStatus&&U.setQueryData(["/api/follow/check",a],n.previousStatus),n?.previousFollows&&U.setQueryData(["/api/follow"],n.previousFollows),t({title:"Error",description:"Failed to unfollow series",variant:"error"})}});return{unfollowSeries:s.mutate,isUnfollowing:s.isPending}}function mp(t){const{data:s,isLoading:r}=be({queryKey:["/api/series",t,"followers"],queryFn:async()=>{if(!t)return{count:0};const a=await fetch(`/api/series/${t}/followers`,{credentials:"include"});if(!a.ok)throw new Error("Failed to fetch follower count");return a.json()},enabled:!!t,retry:!1});return{followerCount:s?.count||0,isLoading:r}}function dg(t=!1){const{data:s,isLoading:r,error:a,isError:n}=be({queryKey:["/api/library"],queryFn:async()=>{const i=await fetch("/api/library",{credentials:"include"});if(i.status===401)return[];if(!i.ok)throw new Error("Failed to fetch library");return i.json()},enabled:t,retry:!1});return{library:s||[],isLoading:r,error:a,isError:n}}function hp(t){const{data:s,isLoading:r}=be({queryKey:["/api/library/check",t],queryFn:async()=>{if(!t)return{inLibrary:!1};const a=await fetch(`/api/library/check/${t}`,{credentials:"include"});if(a.status===401)return{inLibrary:!1};if(!a.ok)throw new Error("Failed to check library status");return a.json()},enabled:!!t,retry:!1});return{inLibrary:s?.inLibrary||!1,isLoading:r}}function fp(){const{toast:t}=Oe(),s=Ie({mutationFn:async({seriesId:r,status:a="reading"})=>Fe("POST",`/api/library/${r}`,{status:a}),onMutate:async({seriesId:r})=>{await U.cancelQueries({queryKey:["/api/library"]}),await U.cancelQueries({queryKey:["/api/library/check",r]});const a=U.getQueryData(["/api/library"]),n=U.getQueryData(["/api/library/check",r]);return U.setQueryData(["/api/library/check",r],{inLibrary:!0}),{previousLibrary:a,previousStatus:n,seriesId:r}},onSuccess:(r,{seriesId:a})=>{U.invalidateQueries({queryKey:["/api/library"]}),U.invalidateQueries({queryKey:["/api/library/check",a]}),t({title:"Added to library",description:"Series has been added to your library."})},onError:(r,{seriesId:a},n)=>{n?.previousStatus&&U.setQueryData(["/api/library/check",a],n.previousStatus),n?.previousLibrary&&U.setQueryData(["/api/library"],n.previousLibrary);const i=r.message==="Series is already in your library"?"This series is already in your library":"Failed to add series to library";t({title:"Error",description:i,variant:"error"})}});return{addToLibrary:(r,a)=>s.mutate({seriesId:r,status:a}),isAdding:s.isPending}}function pp(){const{toast:t}=Oe(),s=Ie({mutationFn:async r=>Fe("DELETE",`/api/library/${r}`),onMutate:async r=>{await U.cancelQueries({queryKey:["/api/library"]}),await U.cancelQueries({queryKey:["/api/library/check",r]});const a=U.getQueryData(["/api/library"]),n=U.getQueryData(["/api/library/check",r]);return a&&U.setQueryData(["/api/library"],a.filter(i=>i.seriesId!==r)),U.setQueryData(["/api/library/check",r],{inLibrary:!1}),{previousLibrary:a,previousStatus:n,seriesId:r}},onSuccess:(r,a)=>{U.invalidateQueries({queryKey:["/api/library"]}),U.invalidateQueries({queryKey:["/api/library/check",a]}),t({title:"Removed from library",description:"Series has been removed from your library."})},onError:(r,a,n)=>{n?.previousStatus&&U.setQueryData(["/api/library/check",a],n.previousStatus),n?.previousLibrary&&U.setQueryData(["/api/library"],n.previousLibrary),t({title:"Error",description:"Failed to remove series from library",variant:"error"})}});return{removeFromLibrary:s.mutate,isRemoving:s.isPending}}const Wr=o.forwardRef(({className:t,...s},r)=>e.jsx("textarea",{className:C("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background transition-all duration-200 placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#707ff5] focus-visible:ring-offset-2 focus-visible:border-[#707ff5]/50 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm hover:border-[#707ff5]/30",t),ref:r,...s}));Wr.displayName="Textarea";const xp=ts("relative w-full rounded-xl border p-4 backdrop-blur-sm [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground shadow-md",{variants:{variant:{default:"bg-gradient-to-r from-[#4b4bc3]/10 to-[#707ff5]/10 border-[#707ff5]/30 text-foreground shadow-[#707ff5]/20",destructive:"bg-destructive/10 border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive shadow-destructive/20"}},defaultVariants:{variant:"default"}}),gl=o.forwardRef(({className:t,variant:s,...r},a)=>e.jsx("div",{ref:a,role:"alert",className:C(xp({variant:s}),t),...r}));gl.displayName="Alert";const gp=o.forwardRef(({className:t,...s},r)=>e.jsx("h5",{ref:r,className:C("mb-1 font-medium leading-none tracking-tight",t),...s}));gp.displayName="AlertTitle";const bl=o.forwardRef(({className:t,...s},r)=>e.jsx("div",{ref:r,className:C("text-sm [&_p]:leading-relaxed",t),...s}));bl.displayName="AlertDescription";function bp({seriesId:t,chapterId:s}){const{user:r,isStaffOrAbove:a}=ar(),{toast:n}=Oe(),[i,c]=o.useState(""),[d,u]=o.useState(null),[h,m]=o.useState(""),f=1e3,p=t?["comments","series",t]:["comments","chapter",s],x=t?`/api/series/${t}/comments`:`/api/chapters/${s}/comments`,{data:y=[],isLoading:b,error:w,isError:k}=be({queryKey:p,queryFn:async()=>{const D=await fetch(x,{credentials:"include"});if(!D.ok)throw new Error("Failed to fetch comments");return D.json()},retry:!1}),T=Ie({mutationFn:async D=>(await Fe("POST",x,{content:D})).json(),onMutate:async D=>{await U.cancelQueries({queryKey:p});const de=U.getQueryData(p);if(r){const te={id:`temp-${Date.now()}`,userId:r.id,seriesId:t||null,chapterId:s||null,content:D,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),user:{id:r.id,username:r.username,profilePicture:r.profilePicture||null,profileImageUrl:r.profileImageUrl||null}};U.setQueryData(p,(me=[])=>[te,...me])}return{previousComments:de}},onSuccess:()=>{U.invalidateQueries({queryKey:p}),c(""),n({title:"Comment posted",description:"Your comment has been posted successfully."})},onError:(D,de,te)=>{te?.previousComments&&U.setQueryData(p,te.previousComments),n({title:"Failed to post comment",description:D.message||"Unable to post your comment. Please try again.",variant:"error"})}}),N=Ie({mutationFn:async({commentId:D,content:de})=>(await Fe("PATCH",`/api/comments/${D}`,{content:de})).json(),onMutate:async({commentId:D,content:de})=>{await U.cancelQueries({queryKey:p});const te=U.getQueryData(p);return U.setQueryData(p,(me=[])=>me.map(Ae=>Ae.id===D?{...Ae,content:de,updatedAt:new Date().toISOString()}:Ae)),{previousComments:te}},onSuccess:()=>{U.invalidateQueries({queryKey:p}),u(null),m(""),n({title:"Comment updated",description:"Your comment has been updated successfully."})},onError:(D,de,te)=>{te?.previousComments&&U.setQueryData(p,te.previousComments),n({title:"Failed to update comment",description:D.message||"Unable to update your comment. Please try again.",variant:"error"})}}),M=Ie({mutationFn:async D=>Fe("DELETE",`/api/comments/${D}`),onMutate:async D=>{await U.cancelQueries({queryKey:p});const de=U.getQueryData(p);return U.setQueryData(p,(te=[])=>te.filter(me=>me.id!==D)),{previousComments:de}},onSuccess:()=>{U.invalidateQueries({queryKey:p}),n({title:"Comment deleted",description:"Your comment has been deleted successfully."})},onError:(D,de,te)=>{te?.previousComments&&U.setQueryData(p,te.previousComments),n({title:"Failed to delete comment",description:D.message||"Unable to delete your comment. Please try again.",variant:"error"})}}),O=async D=>{D.preventDefault(),!(!i.trim()||T.isPending)&&T.mutate(i.trim())},G=D=>{u(D.id),m(D.content)},v=()=>{u(null),m("")},E=async D=>{!h.trim()||N.isPending||N.mutate({commentId:D,content:h.trim()})},_=async D=>{confirm("Are you sure you want to delete this comment?")&&M.mutate(D)},q=D=>D.user.profileImageUrl||D.user.profilePicture||void 0,I=D=>(D.user.username||"User").substring(0,2).toUpperCase(),J=D=>{if(!D)return"Just now";try{return ps(new Date(D),{addSuffix:!0})}catch{return"Recently"}};return b?e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 lg:px-6 xl:px-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#1e1e76]/30 via-[#0a0e1a]/50 to-[#1e1e76]/30 border border-[#4b4bc3]/20 rounded-2xl p-4 sm:p-6 md:p-8 lg:p-10 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-[#707ff5] to-[#4b4bc3] rounded-lg flex items-center justify-center",children:e.jsx(ls,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Comments"})]}),e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 sm:h-12 sm:w-12 border-b-3 border-[#707ff5]"})})]})}):k?e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 lg:px-6 xl:px-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#1e1e76]/30 via-[#0a0e1a]/50 to-[#1e1e76]/30 border border-[#4b4bc3]/20 rounded-2xl p-4 sm:p-6 md:p-8 lg:p-10 shadow-2xl",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-[#707ff5] to-[#4b4bc3] rounded-lg flex items-center justify-center",children:e.jsx(ls,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:"Comments"})]}),e.jsxs(gl,{variant:"destructive",className:"bg-red-500/10 border-red-500/30 rounded-xl",children:[e.jsx(ca,{className:"h-5 w-5"}),e.jsx(bl,{className:"text-sm sm:text-base",children:w?.message||"Failed to load comments. Please try refreshing the page."})]})]})}):e.jsx("div",{className:"w-full max-w-5xl mx-auto px-4 lg:px-6 xl:px-8",children:e.jsxs("div",{className:"bg-gradient-to-br from-[#1e1e76]/30 via-[#0a0e1a]/50 to-[#1e1e76]/30 border border-[#4b4bc3]/20 rounded-2xl p-4 sm:p-6 md:p-8 lg:p-10 shadow-2xl shadow-[#4b4bc3]/10",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-[#707ff5] to-[#4b4bc3] rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(ls,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),e.jsxs("h3",{className:"text-xl sm:text-2xl font-bold text-white",children:["Comments ",e.jsxs("span",{className:"text-[#a195f9]",children:["(",y.length,")"]})]})]}),r?e.jsx("form",{onSubmit:O,className:"mb-8",children:e.jsxs("div",{className:"relative",children:[e.jsx(Wr,{value:i,onChange:D=>c(D.target.value.slice(0,f)),placeholder:"Share your thoughts...",className:"min-h-[100px] sm:min-h-[120px] bg-[#0a0e1a]/60 border-[#4b4bc3]/30 text-white placeholder:text-white/40 resize-none rounded-xl focus:border-[#707ff5] focus:ring-2 focus:ring-[#707ff5]/20 transition-all text-sm sm:text-base p-3 sm:p-4",disabled:T.isPending}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0 mt-3",children:[e.jsxs("span",{className:`text-xs sm:text-sm ${i.length>f*.9?"text-red-400":"text-white/40"}`,children:[i.length," / ",f]}),e.jsx(S,{type:"submit",disabled:!i.trim()||T.isPending,className:"w-full sm:w-auto bg-gradient-to-r from-[#707ff5] to-[#4b4bc3] hover:from-[#4b4bc3] hover:to-[#1e1e76] text-white font-semibold shadow-lg shadow-[#707ff5]/25 transition-all hover:shadow-[#707ff5]/40 rounded-xl h-10 sm:h-11 px-4 sm:px-6",children:T.isPending?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Posting..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Zd,{className:"w-4 h-4"}),"Post Comment"]})})]})]})}):e.jsx("div",{className:"mb-8 p-4 sm:p-6 bg-[#0a0e1a]/60 border border-[#4b4bc3]/30 rounded-xl text-center",children:e.jsx("p",{className:"text-white/60 text-sm sm:text-base",children:"Please log in to leave a comment"})}),e.jsx("div",{className:"space-y-4",children:y.length===0?e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 mx-auto mb-4 bg-gradient-to-br from-[#707ff5]/20 to-[#4b4bc3]/20 rounded-2xl flex items-center justify-center",children:e.jsx(ls,{className:"w-8 h-8 sm:w-10 sm:h-10 text-[#707ff5]/40"})}),e.jsx("p",{className:"text-lg sm:text-xl font-semibold text-white/60 mb-2",children:"No comments yet"}),e.jsx("p",{className:"text-sm sm:text-base text-white/40",children:"Be the first to share your thoughts!"})]}):y.map(D=>e.jsx("div",{className:"bg-[#0a0e1a]/40 backdrop-blur-sm border border-[#4b4bc3]/20 rounded-xl p-4 sm:p-5 hover:bg-[#0a0e1a]/60 hover:border-[#4b4bc3]/40 transition-all duration-200 shadow-lg",children:e.jsxs("div",{className:"flex gap-3 sm:gap-4",children:[e.jsxs(ms,{className:"w-10 h-10 sm:w-12 sm:h-12 border-2 border-[#707ff5]/30 flex-shrink-0",children:[e.jsx(hs,{src:q(D)}),e.jsx(fs,{className:"bg-gradient-to-br from-[#707ff5] to-[#4b4bc3] text-white font-semibold text-sm sm:text-base",children:I(D)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-1 sm:gap-0 mb-2 sm:mb-3",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-0",children:[e.jsx("span",{className:"font-semibold text-white text-sm sm:text-base",children:D.user.username||"Anonymous"}),e.jsxs("span",{className:"text-xs sm:text-sm text-white/40 sm:ml-2",children:[J(D.createdAt),D.updatedAt!==D.createdAt&&" (edited)"]})]}),r&&(r.id===D.userId||a)&&e.jsx("div",{className:"flex gap-1 sm:gap-2",children:d!==D.id&&e.jsxs(e.Fragment,{children:[r.id===D.userId&&e.jsx(S,{size:"sm",variant:"ghost",onClick:()=>G(D),className:"text-white/60 hover:text-white hover:bg-[#707ff5]/20 h-8 w-8 sm:h-9 sm:w-9 p-0",children:e.jsx(Xd,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})}),e.jsx(S,{size:"sm",variant:"ghost",onClick:()=>_(D.id),disabled:M.isPending,className:"text-red-400 hover:text-red-300 hover:bg-red-500/20 h-8 w-8 sm:h-9 sm:w-9 p-0",title:a&&r.id!==D.userId?"Moderate as staff":"Delete comment",children:e.jsx(ru,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4"})})]})})]}),d===D.id?e.jsxs("div",{children:[e.jsx(Wr,{value:h,onChange:de=>m(de.target.value.slice(0,f)),className:"min-h-[80px] bg-[#0a0e1a]/60 border-[#4b4bc3]/30 text-white mb-2 resize-none rounded-lg text-sm sm:text-base p-3",disabled:N.isPending}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 sm:gap-0",children:[e.jsxs("span",{className:`text-xs sm:text-sm ${h.length>f*.9?"text-red-400":"text-white/40"}`,children:[h.length," / ",f]}),e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsx(S,{size:"sm",variant:"ghost",onClick:v,disabled:N.isPending,className:"flex-1 sm:flex-none text-white/60 hover:text-white text-xs sm:text-sm",children:"Cancel"}),e.jsx(S,{size:"sm",onClick:()=>E(D.id),disabled:!h.trim()||N.isPending,className:"flex-1 sm:flex-none bg-gradient-to-r from-[#707ff5] to-[#4b4bc3] hover:from-[#4b4bc3] hover:to-[#1e1e76] text-white text-xs sm:text-sm",children:N.isPending?"Saving...":"Save"})]})]})]}):e.jsx("p",{className:"text-white/80 whitespace-pre-wrap break-words leading-relaxed text-sm sm:text-base",children:D.content})]})]})},D.id))})]})})}const yl=o.memo(bp),yp=Object.freeze(Object.defineProperty({__proto__:null,default:yl},Symbol.toStringTag,{value:"Module"}));function vp(){return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] text-white pb-24",children:[e.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-[#0d1117]/80 border-b border-white/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(F,{className:"w-10 h-10 rounded-full"}),e.jsx(F,{className:"hidden sm:block w-32 h-6"})]}),e.jsx(F,{className:"sm:hidden w-32 h-6"}),e.jsx(F,{className:"w-10 h-10 rounded-full"})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-6 lg:gap-8 mb-6",children:[e.jsx("div",{className:"flex justify-center lg:justify-start",children:e.jsx(F,{className:"w-48 sm:w-64 aspect-[0.7] rounded-2xl"})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx(F,{className:"h-12 sm:h-16 w-full mb-3"}),e.jsx(F,{className:"h-12 sm:h-16 w-3/4 mb-4"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(F,{className:"h-8 w-24 rounded-full"}),e.jsx(F,{className:"h-8 w-20 rounded-full"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(F,{className:"h-7 w-20 rounded-full"}),e.jsx(F,{className:"h-7 w-24 rounded-full"}),e.jsx(F,{className:"h-7 w-20 rounded-full"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 p-4 bg-white/5 rounded-xl border border-white/10",children:[...Array(4)].map((t,s)=>e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(F,{className:"h-6 w-full"}),e.jsx(F,{className:"h-4 w-3/4 mx-auto"})]},s))}),e.jsx(F,{className:"h-5 w-48 mt-4"})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white/5 border border-white/10 p-1 rounded-xl",children:e.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[e.jsx(F,{className:"h-10 rounded-lg"}),e.jsx(F,{className:"h-10 rounded-lg"}),e.jsx(F,{className:"h-10 rounded-lg"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(F,{className:"h-7 w-32"}),e.jsx(F,{className:"h-9 w-32 rounded-lg"})]}),e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((t,s)=>e.jsx("div",{className:"bg-white/5 border border-white/10 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(F,{className:"hidden sm:block w-16 h-16 rounded-lg"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(F,{className:"h-5 w-32"}),e.jsx(F,{className:"h-4 w-48"}),e.jsx(F,{className:"h-3 w-24"})]}),e.jsx(F,{className:"w-10 h-10 rounded-full"})]})},s))})]})]})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-gradient-to-t from-[#0d1117] via-[#0d1117]/95 to-transparent pt-4 pb-safe",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex gap-2 sm:gap-3",children:[e.jsx(F,{className:"flex-1 h-12 sm:h-14 rounded-xl"}),e.jsx(F,{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl"}),e.jsx(F,{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl"}),e.jsx(F,{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-xl"})]})})}),e.jsx("div",{className:"fixed inset-0 -translate-x-full animate-[shimmer_2s_infinite] bg-gradient-to-r from-transparent via-white/5 to-transparent pointer-events-none"})]})}const wp=Nc,vl=o.forwardRef(({className:t,...s},r)=>e.jsx(ai,{ref:r,className:C("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));vl.displayName=ai.displayName;const Ms=o.forwardRef(({className:t,...s},r)=>e.jsx(ni,{ref:r,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-gradient-to-r data-[state=active]:from-[#4b4bc3] data-[state=active]:to-[#707ff5] data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-[#707ff5]/30",t),...s}));Ms.displayName=ni.displayName;const Fs=o.forwardRef(({className:t,...s},r)=>e.jsx(ii,{ref:r,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Fs.displayName=ii.displayName;function jp(){const{id:t}=pi(),{user:s}=ar(),{toast:r}=Oe(),{manga:a,isLoading:n,isError:i}=xl(t),{chapters:c,isLoading:d,isError:u}=Pa(t),{progress:h}=op(t),{isFollowing:m}=cp(t),{inLibrary:f}=hp(t),{followerCount:p}=mp(t),{followSeries:x,isFollowing:y}=dp(),{unfollowSeries:b,isUnfollowing:w}=up(),{addToLibrary:k,isAdding:T}=fp(),{removeFromLibrary:N,isRemoving:M}=pp(),[O,G]=o.useState(!1),[v,E]=o.useState(!1),[_,q]=o.useState(!1),[I,J]=o.useState("chapters");if(n)return e.jsx(vp,{});if(i||!a)return e.jsx("div",{className:"min-h-screen bg-[#0a0e1a] text-white",children:e.jsx("div",{className:"grid gap-6 w-full max-w-7xl mx-auto p-6",children:e.jsxs("div",{className:"border border-[#4b4bc3]/40 bg-[#707ff5]/8 rounded-xl p-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-semibold text-teal-400 mb-4",children:"Series Not Available"}),e.jsx("p",{className:"text-[#a195f9] mb-6",children:"This series is currently unavailable or may have been removed."}),e.jsx(X,{href:"/",children:e.jsxs(S,{className:"bg-[#707ff5] hover:bg-[#4b4bc3]",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Return Home"]})})]})})});const D=a.genres?Array.isArray(a.genres)?a.genres:JSON.parse(a.genres):[],de=D.join(", "),te=c?[...c].sort((ee,Pe)=>{const Ve=parseFloat(ee.chapterNumber),A=parseFloat(Pe.chapterNumber);return v?Ve-A:A-Ve}):[],me=_?te:te.slice(0,10),Ae=ee=>ee?(new Date().getTime()-new Date(ee).getTime())/(1e3*60*60*24)<=7:!1,xe=ee=>{switch(ee.toLowerCase()){case"ongoing":return"bg-green-500/20 text-green-400 border-green-500/40";case"completed":return"bg-blue-500/20 text-blue-400 border-blue-500/40";case"hiatus":return"bg-orange-500/20 text-orange-400 border-orange-500/40";default:return"bg-[#a195f9]/20 text-[#a195f9] border-[#a195f9]/40"}},Ne=ee=>({action:"bg-red-500/20 text-red-400 border-red-500/40",romance:"bg-pink-500/20 text-pink-400 border-pink-500/40",comedy:"bg-yellow-500/20 text-yellow-400 border-yellow-500/40",drama:"bg-purple-500/20 text-purple-400 border-purple-500/40",fantasy:"bg-indigo-500/20 text-indigo-400 border-indigo-500/40",horror:"bg-gray-700/20 text-gray-400 border-gray-700/40",mystery:"bg-cyan-500/20 text-cyan-400 border-cyan-500/40","sci-fi":"bg-blue-500/20 text-blue-400 border-blue-500/40"})[ee.toLowerCase()]||"bg-[#707ff5]/20 text-[#707ff5] border-[#707ff5]/40",nt=async()=>{if(!s){r({title:"Login required",description:"Please log in to follow series",variant:"error"});return}try{m?(await b(t),r({title:"Unfollowed",description:"You've unfollowed this series"})):(await x({seriesId:t,notificationsEnabled:!0}),r({title:"Following",description:"You'll be notified of new chapters",variant:"success"}))}catch{r({title:"Error",description:"Failed to update follow status",variant:"error"})}},ft=async()=>{if(!s){r({title:"Login required",description:"Please log in to add series to your library",variant:"error"});return}try{f?(await N(t),r({title:"Removed from library",description:"Series removed from your library"})):(await k(t,"reading"),r({title:"Added to library",description:"Series added to your library",variant:"success"}))}catch{r({title:"Error",description:"Failed to update library",variant:"error"})}},Ye=async()=>{if(navigator.share)try{await navigator.share({title:a.title,text:`Check out ${a.title}!`,url:window.location.href})}catch{}else navigator.clipboard.writeText(window.location.href)},ge=h&&h.chapterId?c.find(ee=>ee.id===h.chapterId):null,Ue=te.length>0?te[te.length-1]:null;return e.jsxs("div",{className:"min-h-screen bg-[#0a0e1a] text-white pb-24",children:[e.jsx(Ke,{title:a.title,description:a.description||`Read ${a.title} - ${a.type} ${a.status} with ${c?.length||0} chapters`,keywords:`${a.title}, ${a.type}, ${a.status}, ${de}, read ${a.title} online, ${a.title} chapters`,image:a.coverImageUrl,type:"book",author:a.author||"Unknown",publishedTime:a.createdAt,modifiedTime:a.updatedAt}),e.jsx($u,{type:"Series",data:{name:a.title,description:a.description||`Read ${a.title} online`,image:a.coverImageUrl,author:{"@type":"Person",name:a.author||"Unknown"},genre:D,inLanguage:"en",datePublished:a.createdAt,dateModified:a.updatedAt,aggregateRating:a.rating?{"@type":"AggregateRating",ratingValue:a.rating,bestRating:"5",worstRating:"1"}:void 0,numberOfEpisodes:c?.length||0,publisher:{"@type":"Organization",name:"AmourScans Platform"},workExample:{"@type":"Book",bookFormat:"GraphicNovel",inLanguage:"en"}}}),e.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-[#0d1117]/80 border-b border-white/10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(X,{href:"/",children:e.jsx(S,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-white/10",children:e.jsx(ot,{className:"w-5 h-5"})})}),e.jsx(X,{href:"/",className:"hidden sm:block text-xl font-semibold",children:"AmourScans"})]}),e.jsx(X,{href:"/",className:"sm:hidden text-lg font-semibold",children:"AmourScans"}),e.jsx(X,{href:"/browse",children:e.jsx(S,{variant:"ghost",size:"icon",className:"rounded-full hover:bg-white/10",children:e.jsx(st,{className:"w-5 h-5"})})})]})})}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-[600px] opacity-20 blur-3xl -z-10",style:{background:a.coverImageUrl?`linear-gradient(to bottom, transparent, #0a0e1a), url(${a.coverImageUrl})`:"none",backgroundSize:"cover",backgroundPosition:"center top"}}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-6 lg:gap-8 mb-6",children:[e.jsx("div",{className:"flex justify-center lg:justify-start",children:e.jsxs("div",{className:"relative group w-48 sm:w-64 aspect-[0.7] rounded-2xl overflow-hidden border-2 border-white/10 shadow-2xl hover:border-[#707ff5]/50 transition-all duration-300",children:[e.jsx("img",{src:a.coverImageUrl,alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),ge&&h&&e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 to-transparent p-4",children:[e.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Continue Reading"}),e.jsx("div",{className:"w-full bg-white/20 rounded-full h-1.5 mb-2",children:e.jsx("div",{className:"bg-[#707ff5] h-1.5 rounded-full transition-all",style:{width:`${h.lastReadPage/(ge.totalPages||1)*100}%`}})}),e.jsxs("div",{className:"text-sm font-medium",children:["Ch. ",ge.chapterNumber]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-3 leading-tight",children:a.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsx(ie,{className:`${xe(a.status)} border px-3 py-1 rounded-full capitalize`,children:a.status}),e.jsx(ie,{variant:"outline",className:"border-white/20 px-3 py-1 rounded-full capitalize",children:a.type})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:D.map((ee,Pe)=>e.jsx(ie,{className:`${Ne(ee)} border px-3 py-1 rounded-full capitalize text-xs`,children:ee},Pe))}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 p-4 bg-white/5 rounded-xl border border-white/10",children:[a.rating&&e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-yellow-400 mb-1",children:[e.jsx(ze,{className:"w-4 h-4 fill-current"}),e.jsx("span",{className:"font-bold text-lg",children:parseFloat(a.rating).toFixed(1)})]}),e.jsx("div",{className:"text-xs text-white/60",children:"Rating"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-[#a195f9] mb-1",children:[e.jsx(nu,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:p})]}),e.jsx("div",{className:"text-xs text-white/60",children:"Followers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-[#707ff5] mb-1",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-lg",children:c?.length||0})]}),e.jsx("div",{className:"text-xs text-white/60",children:"Chapters"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 text-green-400 mb-1",children:[e.jsx(zd,{className:"w-4 h-4"}),e.jsx("span",{className:"font-bold text-sm",children:a.updatedAt?ps(new Date(a.updatedAt),{addSuffix:!1}):"N/A"})]}),e.jsx("div",{className:"text-xs text-white/60",children:"Last Update"})]})]}),a.author&&e.jsxs("div",{className:"text-sm text-white/80",children:[e.jsx("span",{className:"text-white/60",children:"Author:"})," ",a.author]})]})})]}),e.jsxs(wp,{value:I,onValueChange:J,className:"w-full",children:[e.jsxs(vl,{className:"w-full bg-white/5 border border-white/10 p-1 rounded-xl mb-6 grid grid-cols-3",children:[e.jsxs(Ms,{value:"chapters",className:"data-[state=active]:bg-[#707ff5] data-[state=active]:text-white rounded-lg transition-all",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Chapters"]}),e.jsx(Ms,{value:"details",className:"data-[state=active]:bg-[#707ff5] data-[state=active]:text-white rounded-lg transition-all",children:"Details"}),e.jsxs(Ms,{value:"comments",className:"data-[state=active]:bg-[#707ff5] data-[state=active]:text-white rounded-lg transition-all",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"Comments"]})]}),e.jsxs(Fs,{value:"chapters",className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"All Chapters"}),e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>E(!v),className:"border-white/20 hover:bg-white/10",children:[v?"Oldest First":"Newest First",e.jsx(gs,{className:`w-4 h-4 ml-2 transition-transform ${v?"rotate-180":""}`})]})]}),d?e.jsx("div",{className:"space-y-3",children:[...Array(5)].map((ee,Pe)=>e.jsx("div",{className:"h-20 bg-white/5 rounded-xl animate-pulse"},Pe))}):u?e.jsx("div",{className:"text-center py-12 text-white/60",children:"Failed to load chapters"}):me.length===0?e.jsx("div",{className:"text-center py-12 text-white/60",children:"No chapters available yet"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:me.map((ee,Pe)=>{const Ve=h?.chapterId===ee.id,A=Ve&&h?h.lastReadPage/(ee.totalPages||1)*100:0;return e.jsx(X,{href:`/manga/${t}/chapter/${ee.chapterNumber}`,children:e.jsx("div",{className:"group relative bg-white/5 hover:bg-white/10 border border-white/10 hover:border-[#707ff5]/50 rounded-xl p-4 transition-all duration-200 cursor-pointer animate-in fade-in slide-in-from-bottom-2",style:{animationDelay:`${Pe*50}ms`},children:e.jsxs("div",{className:"flex items-center gap-4",children:[ee.coverImageUrl?e.jsx("div",{className:"relative w-12 h-16 sm:w-14 sm:h-20 rounded-lg overflow-hidden flex-shrink-0 border border-white/10",children:e.jsx("img",{src:ee.coverImageUrl,alt:`Chapter ${ee.chapterNumber}`,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300",loading:"lazy",onError:Q=>{const se=Q.target;se.style.display="none";const re=se.parentElement;re&&(re.className="flex items-center justify-center w-12 h-16 sm:w-14 sm:h-20 bg-[#707ff5]/20 rounded-lg flex-shrink-0",re.innerHTML='<svg class="w-5 h-5 sm:w-6 sm:h-6 text-[#707ff5]" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/></svg>')}})}):e.jsx("div",{className:"hidden sm:flex items-center justify-center w-14 h-20 bg-[#707ff5]/20 rounded-lg flex-shrink-0",children:e.jsx(_e,{className:"w-6 h-6 text-[#707ff5]"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("h3",{className:"font-semibold text-base group-hover:text-[#707ff5] transition-colors",children:["Chapter ",ee.chapterNumber]}),Ae(ee.createdAt)&&e.jsxs(ie,{className:"bg-gradient-to-r from-pink-500 to-purple-500 text-white border-0 px-2 py-0 text-xs",children:[e.jsx(zt,{className:"w-3 h-3 mr-1"}),"NEW"]})]}),ee.title&&e.jsx("p",{className:"text-sm text-white/70 mb-1 truncate",children:ee.title}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-white/50",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(qt,{className:"w-3 h-3"}),ee.createdAt?ps(new Date(ee.createdAt),{addSuffix:!0}):"Unknown"]}),ee.totalPages&&e.jsxs("span",{children:[ee.totalPages," pages"]})]}),Ve&&A>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"w-full bg-white/10 rounded-full h-1",children:e.jsx("div",{className:"bg-[#707ff5] h-1 rounded-full transition-all",style:{width:`${A}%`}})}),e.jsxs("div",{className:"text-xs text-white/50 mt-1",children:[Math.round(A),"% completed"]})]})]}),e.jsx(S,{variant:"ghost",size:"icon",className:"rounded-full bg-[#707ff5]/20 hover:bg-[#707ff5]/30 text-white flex-shrink-0",children:e.jsx(Ur,{className:"w-4 h-4 fill-current"})})]})})},ee.id)})}),te.length>10&&e.jsx(S,{variant:"outline",className:"w-full border-white/20 hover:bg-white/10",onClick:()=>q(!_),children:_?"Show Less":`Show All ${te.length} Chapters`})]})]}),e.jsxs(Fs,{value:"details",className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Description"}),e.jsx("div",{className:`${O?"":"line-clamp-6"} text-white/80 whitespace-pre-wrap`,children:a.description||"No description available."}),a.description&&a.description.length>200&&e.jsx(S,{variant:"ghost",className:"text-[#707ff5] hover:text-[#4b4bc3] mt-2 p-0",onClick:()=>G(!O),children:O?"Show Less":"Read More"})]}),e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Series Information"}),e.jsxs("dl",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-white/60 mb-1",children:"Status"}),e.jsx("dd",{className:"capitalize",children:a.status})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-white/60 mb-1",children:"Type"}),e.jsx("dd",{className:"capitalize",children:a.type})]}),a.author&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-white/60 mb-1",children:"Author"}),e.jsx("dd",{children:a.author})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-white/60 mb-1",children:"Chapters"}),e.jsx("dd",{children:c?.length||0})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-white/60 mb-1",children:"Published"}),e.jsx("dd",{children:a.createdAt?new Date(a.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm text-white/60 mb-1",children:"Last Updated"}),e.jsx("dd",{children:a.updatedAt?new Date(a.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]})]})]}),D.length>0&&e.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:D.map((ee,Pe)=>e.jsx(ie,{className:`${Ne(ee)} border px-4 py-2 rounded-full capitalize`,children:ee},Pe))})]})]}),e.jsx(Fs,{value:"comments",children:e.jsx(yl,{seriesId:t})})]}),e.jsx(ch,{page:"manga_detail",location:"in_content_1"})]}),e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-gradient-to-t from-[#0d1117] via-[#0d1117]/95 to-transparent pt-4 pb-safe",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"flex gap-2 sm:gap-3 items-center",children:[ge?e.jsx(X,{href:`/manga/${t}/chapter/${ge.chapterNumber}`,className:"flex-1",children:e.jsxs(S,{className:"w-full bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold h-12 sm:h-14 rounded-xl shadow-lg shadow-teal-500/25 transition-all hover:shadow-teal-500/40",children:[e.jsx(Ur,{className:"w-5 h-5 mr-2 fill-current"}),"Continue Ch. ",ge.chapterNumber]})}):Ue?e.jsx(X,{href:`/manga/${t}/chapter/${Ue.chapterNumber}`,className:"flex-1",children:e.jsxs(S,{className:"w-full bg-gradient-to-r from-[#707ff5] to-[#4b4bc3] hover:from-[#4b4bc3] hover:to-[#1e1e76] text-white font-semibold h-12 sm:h-14 rounded-xl shadow-lg shadow-[#707ff5]/25 transition-all hover:shadow-[#707ff5]/40",children:[e.jsx(_e,{className:"w-5 h-5 mr-2"}),"Start Reading"]})}):e.jsx(S,{disabled:!0,className:"flex-1 h-12 sm:h-14 rounded-xl",children:"No Chapters Available"}),s&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"outline",size:"icon",onClick:ft,disabled:T||M,className:`h-12 w-12 sm:h-14 sm:w-14 rounded-xl border-2 transition-all ${f?"bg-pink-500 border-pink-500 text-white hover:bg-pink-600 hover:border-pink-600":"border-white/20 hover:bg-white/10 hover:border-pink-500/50"}`,children:e.jsx(Hd,{className:`w-5 h-5 ${f?"fill-current":""}`})}),e.jsx(S,{variant:"outline",size:"icon",onClick:nt,disabled:y||w,className:`h-12 w-12 sm:h-14 sm:w-14 rounded-xl border-2 transition-all ${m?"bg-[#707ff5] border-[#707ff5] text-white hover:bg-[#4b4bc3] hover:border-[#4b4bc3]":"border-white/20 hover:bg-white/10 hover:border-[#707ff5]/50"}`,children:m?e.jsx(Od,{className:"w-5 h-5"}):e.jsx(Fd,{className:"w-5 h-5"})}),e.jsx(S,{variant:"outline",size:"icon",onClick:Ye,className:"h-12 w-12 sm:h-14 sm:w-14 rounded-xl border-2 border-white/20 hover:bg-white/10 hover:border-white/30",children:e.jsx(eu,{className:"w-5 h-5"})})]})]})})})]})}var wl=["PageUp","PageDown"],jl=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Nl={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},as="Slider",[Gr,Np,Sp]=Sc(as),[Sl]=Jt(as,[Sp]),[_p,mr]=Sl(as),_l=o.forwardRef((t,s)=>{const{name:r,min:a=0,max:n=100,step:i=1,orientation:c="horizontal",disabled:d=!1,minStepsBetweenThumbs:u=0,defaultValue:h=[a],value:m,onValueChange:f=()=>{},onValueCommit:p=()=>{},inverted:x=!1,form:y,...b}=t,w=o.useRef(new Set),k=o.useRef(0),N=c==="horizontal"?kp:Cp,[M=[],O]=Zr({prop:m,defaultProp:h,onChange:I=>{[...w.current][k.current]?.focus(),f(I)}}),G=o.useRef(M);function v(I){const J=Ep(M,I);q(I,J)}function E(I){q(I,k.current)}function _(){const I=G.current[k.current];M[k.current]!==I&&p(M)}function q(I,J,{commit:D}={commit:!1}){const de=Mp(i),te=Fp(Math.round((I-a)/i)*i+a,de),me=sa(te,[a,n]);O((Ae=[])=>{const xe=Pp(Ae,me,J);if(Lp(xe,u*i)){k.current=xe.indexOf(me);const Ne=String(xe)!==String(Ae);return Ne&&D&&p(xe),Ne?xe:Ae}else return Ae})}return e.jsx(_p,{scope:t.__scopeSlider,name:r,disabled:d,min:a,max:n,valueIndexToChangeRef:k,thumbs:w.current,values:M,orientation:c,form:y,children:e.jsx(Gr.Provider,{scope:t.__scopeSlider,children:e.jsx(Gr.Slot,{scope:t.__scopeSlider,children:e.jsx(N,{"aria-disabled":d,"data-disabled":d?"":void 0,...b,ref:s,onPointerDown:ve(b.onPointerDown,()=>{d||(G.current=M)}),min:a,max:n,inverted:x,onSlideStart:d?void 0:v,onSlideMove:d?void 0:E,onSlideEnd:d?void 0:_,onHomeKeyDown:()=>!d&&q(a,0,{commit:!0}),onEndKeyDown:()=>!d&&q(n,M.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:J})=>{if(!d){const te=wl.includes(I.key)||I.shiftKey&&jl.includes(I.key)?10:1,me=k.current,Ae=M[me],xe=i*te*J;q(Ae+xe,me,{commit:!0})}}})})})})});_l.displayName=as;var[kl,Cl]=Sl(as,{startEdge:"left",endEdge:"right",size:"width",direction:1}),kp=o.forwardRef((t,s)=>{const{min:r,max:a,dir:n,inverted:i,onSlideStart:c,onSlideMove:d,onSlideEnd:u,onStepKeyDown:h,...m}=t,[f,p]=o.useState(null),x=De(s,N=>p(N)),y=o.useRef(void 0),b=ri(n),w=b==="ltr",k=w&&!i||!w&&i;function T(N){const M=y.current||f.getBoundingClientRect(),O=[0,M.width],v=Ta(O,k?[r,a]:[a,r]);return y.current=M,v(N-M.left)}return e.jsx(kl,{scope:t.__scopeSlider,startEdge:k?"left":"right",endEdge:k?"right":"left",direction:k?1:-1,size:"width",children:e.jsx(Il,{dir:b,"data-orientation":"horizontal",...m,ref:x,style:{...m.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:N=>{const M=T(N.clientX);c?.(M)},onSlideMove:N=>{const M=T(N.clientX);d?.(M)},onSlideEnd:()=>{y.current=void 0,u?.()},onStepKeyDown:N=>{const O=Nl[k?"from-left":"from-right"].includes(N.key);h?.({event:N,direction:O?-1:1})}})})}),Cp=o.forwardRef((t,s)=>{const{min:r,max:a,inverted:n,onSlideStart:i,onSlideMove:c,onSlideEnd:d,onStepKeyDown:u,...h}=t,m=o.useRef(null),f=De(s,m),p=o.useRef(void 0),x=!n;function y(b){const w=p.current||m.current.getBoundingClientRect(),k=[0,w.height],N=Ta(k,x?[a,r]:[r,a]);return p.current=w,N(b-w.top)}return e.jsx(kl,{scope:t.__scopeSlider,startEdge:x?"bottom":"top",endEdge:x?"top":"bottom",size:"height",direction:x?1:-1,children:e.jsx(Il,{"data-orientation":"vertical",...h,ref:f,style:{...h.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:b=>{const w=y(b.clientY);i?.(w)},onSlideMove:b=>{const w=y(b.clientY);c?.(w)},onSlideEnd:()=>{p.current=void 0,d?.()},onStepKeyDown:b=>{const k=Nl[x?"from-bottom":"from-top"].includes(b.key);u?.({event:b,direction:k?-1:1})}})})}),Il=o.forwardRef((t,s)=>{const{__scopeSlider:r,onSlideStart:a,onSlideMove:n,onSlideEnd:i,onHomeKeyDown:c,onEndKeyDown:d,onStepKeyDown:u,...h}=t,m=mr(as,r);return e.jsx(ke.span,{...h,ref:s,onKeyDown:ve(t.onKeyDown,f=>{f.key==="Home"?(c(f),f.preventDefault()):f.key==="End"?(d(f),f.preventDefault()):wl.concat(jl).includes(f.key)&&(u(f),f.preventDefault())}),onPointerDown:ve(t.onPointerDown,f=>{const p=f.target;p.setPointerCapture(f.pointerId),f.preventDefault(),m.thumbs.has(p)?p.focus():a(f)}),onPointerMove:ve(t.onPointerMove,f=>{f.target.hasPointerCapture(f.pointerId)&&n(f)}),onPointerUp:ve(t.onPointerUp,f=>{const p=f.target;p.hasPointerCapture(f.pointerId)&&(p.releasePointerCapture(f.pointerId),i(f))})})}),Al="SliderTrack",Pl=o.forwardRef((t,s)=>{const{__scopeSlider:r,...a}=t,n=mr(Al,r);return e.jsx(ke.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...a,ref:s})});Pl.displayName=Al;var Xr="SliderRange",Tl=o.forwardRef((t,s)=>{const{__scopeSlider:r,...a}=t,n=mr(Xr,r),i=Cl(Xr,r),c=o.useRef(null),d=De(s,c),u=n.values.length,h=n.values.map(p=>Dl(p,n.min,n.max)),m=u>1?Math.min(...h):0,f=100-Math.max(...h);return e.jsx(ke.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...a,ref:d,style:{...t.style,[i.startEdge]:m+"%",[i.endEdge]:f+"%"}})});Tl.displayName=Xr;var Yr="SliderThumb",El=o.forwardRef((t,s)=>{const r=Np(t.__scopeSlider),[a,n]=o.useState(null),i=De(s,d=>n(d)),c=o.useMemo(()=>a?r().findIndex(d=>d.ref.current===a):-1,[r,a]);return e.jsx(Ip,{...t,ref:i,index:c})}),Ip=o.forwardRef((t,s)=>{const{__scopeSlider:r,index:a,name:n,...i}=t,c=mr(Yr,r),d=Cl(Yr,r),[u,h]=o.useState(null),m=De(s,T=>h(T)),f=u?c.form||!!u.closest("form"):!0,p=ta(u),x=c.values[a],y=x===void 0?0:Dl(x,c.min,c.max),b=Tp(a,c.values.length),w=p?.[d.size],k=w?Rp(w,y,d.direction):0;return o.useEffect(()=>{if(u)return c.thumbs.add(u),()=>{c.thumbs.delete(u)}},[u,c.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[d.startEdge]:`calc(${y}% + ${k}px)`},children:[e.jsx(Gr.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(ke.span,{role:"slider","aria-label":t["aria-label"]||b,"aria-valuemin":c.min,"aria-valuenow":x,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...i,ref:m,style:x===void 0?{display:"none"}:t.style,onFocus:ve(t.onFocus,()=>{c.valueIndexToChangeRef.current=a})})}),f&&e.jsx(Rl,{name:n??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:x},a)]})});El.displayName=Yr;var Ap="RadioBubbleInput",Rl=o.forwardRef(({__scopeSlider:t,value:s,...r},a)=>{const n=o.useRef(null),i=De(n,a),c=ea(s);return o.useEffect(()=>{const d=n.current;if(!d)return;const u=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(u,"value").set;if(c!==s&&m){const f=new Event("input",{bubbles:!0});m.call(d,s),d.dispatchEvent(f)}},[c,s]),e.jsx(ke.input,{style:{display:"none"},...r,ref:i,defaultValue:s})});Rl.displayName=Ap;function Pp(t=[],s,r){const a=[...t];return a[r]=s,a.sort((n,i)=>n-i)}function Dl(t,s,r){const i=100/(r-s)*(t-s);return sa(i,[0,100])}function Tp(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function Ep(t,s){if(t.length===1)return 0;const r=t.map(n=>Math.abs(n-s)),a=Math.min(...r);return r.indexOf(a)}function Rp(t,s,r){const a=t/2,i=Ta([0,50],[0,a]);return(a-i(s)*r)*r}function Dp(t){return t.slice(0,-1).map((s,r)=>t[r+1]-s)}function Lp(t,s){if(s>0){const r=Dp(t);return Math.min(...r)>=s}return!0}function Ta(t,s){return r=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const a=(s[1]-s[0])/(t[1]-t[0]);return s[0]+a*(r-t[0])}}function Mp(t){return(String(t).split(".")[1]||"").length}function Fp(t,s){const r=Math.pow(10,s);return Math.round(t*r)/r}var Ll=_l,Op=Pl,qp=Tl,$p=El;const Jr=o.forwardRef(({className:t,...s},r)=>e.jsxs(Ll,{ref:r,className:C("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(Op,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary/30",children:e.jsx(qp,{className:"absolute h-full bg-gradient-to-r from-[#4b4bc3] to-[#707ff5]"})}),e.jsx($p,{className:"block h-5 w-5 rounded-full border-2 border-[#707ff5] bg-background ring-offset-background transition-all hover:scale-110 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#707ff5] focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 shadow-lg shadow-[#707ff5]/30"})]}));Jr.displayName=Ll.displayName;function zp(t,s){const r=Ut(),{chapters:a,isLoading:n,error:i,isError:c}=Pa(t),d=o.useMemo(()=>{if(!a.length)return{currentChapter:null,pages:[],nextChapter:null,previousChapter:null,chapterIndex:-1,totalChapters:0};const u=[...a].sort((y,b)=>{const w=parseFloat(y.chapterNumber)||0,k=parseFloat(b.chapterNumber)||0;return w-k});let h=u.findIndex(y=>y.chapterNumber===s);if(h===-1){const y=parseFloat(s);isNaN(y)||(h=u.findIndex(b=>parseFloat(b.chapterNumber)===y))}const m=h>=0?u[h]:null;let f=[];m?.pages&&Array.isArray(m.pages)&&(f=m.pages);const p=h>=0&&h<u.length-1?u[h+1]:null,x=h>0?u[h-1]:null;return{currentChapter:m,pages:f,nextChapter:p,previousChapter:x,chapterIndex:h,totalChapters:u.length}},[a,s]);return o.useEffect(()=>{const u=d.nextChapter?.id;if(u&&typeof window<"u"){const h=[`/api/chapters/${u}`];r.fetchQuery({queryKey:h,queryFn:ys({on401:"throw"}),staleTime:300*1e3}).then(m=>{m?.pages&&Array.isArray(m.pages)&&m.pages.slice(0,3).forEach(f=>{try{const p=new Image;p.src=f}catch{}})}).catch(()=>{})}},[d.nextChapter?.id,r]),{...d,isLoading:n,error:i,isError:c}}function Up(t={speed:100,enabled:!1}){const[s,r]=o.useState(t),a=o.useRef(),n=o.useRef(0),i=o.useCallback(()=>{if(!s.enabled)return;const h=m=>{n.current===0&&(n.current=m);const f=m-n.current,p=s.speed*f/1e3;if(window.scrollBy(0,p),window.scrollY+window.innerHeight>=document.documentElement.scrollHeight){c();return}n.current=m,a.current=requestAnimationFrame(h)};a.current=requestAnimationFrame(h)},[s.enabled,s.speed]),c=o.useCallback(()=>{a.current&&(cancelAnimationFrame(a.current),a.current=void 0,n.current=0)},[]),d=o.useCallback(()=>{r(h=>{const m=!h.enabled;return m||c(),{...h,enabled:m}})},[c]),u=o.useCallback(h=>{r(m=>({...m,speed:h}))},[]);return o.useEffect(()=>(s.enabled?i():c(),()=>{c()}),[s.enabled,i,c]),{isAutoScrolling:s.enabled,speed:s.speed,toggleAutoScroll:d,setSpeed:u,stopAutoScroll:c}}function Bp(t){return be({queryKey:["/api/chapters",t,"access"],queryFn:async()=>{if(!t)throw new Error("Chapter ID is required");const s=await fetch(`/api/chapters/${t}/access`,{credentials:"include"});if(s.status===401)throw new Error("UNAUTHORIZED");if(!s.ok)throw new Error("Failed to check chapter access");return s.json()},enabled:!!t,retry:!1})}function Qp(){const{toast:t}=Oe();return Ie({mutationFn:async s=>{const r=await Oo(`/api/chapters/${s}/unlock`,{method:"POST"});if(!r.ok){const a=await r.json();throw new Error(a.message||"Failed to unlock chapter")}return r.json()},onSuccess:(s,r)=>{U.invalidateQueries({queryKey:["/api/chapters",r,"access"]}),U.invalidateQueries({queryKey:["/api/currency/balance"]}),U.invalidateQueries({queryKey:["/api/currency/transactions"]}),t({title:"Chapter Unlocked",description:"You can now read this chapter!"})},onError:s=>{t({title:"Unlock Failed",description:s.message,variant:"error"})}})}const Kp=o.lazy(()=>ce(()=>Promise.resolve().then(()=>yp),void 0));function Vp(){const{seriesId:t,chapterNumber:s}=pi(),[,r]=Ce(),[a,n]=o.useState(0),[i,c]=o.useState(1),[d,u]=o.useState(!0),[h,m]=o.useState([]),[f,p]=o.useState(null),[x,y]=o.useState(()=>{const j=localStorage.getItem("manga-reading-mode");return j==="vertical"?(localStorage.setItem("manga-reading-mode","webtoon"),"webtoon"):["single","double","webtoon"].includes(j)?j:"webtoon"}),[b,w]=o.useState(!1),[k,T]=o.useState(!1),[N,M]=o.useState(!1),[O,G]=o.useState(()=>localStorage.getItem("manga-fit-width")==="true"),[v,E]=o.useState(()=>localStorage.getItem("manga-dark-mode")!=="false"),[_,q]=o.useState(()=>localStorage.getItem("manga-reading-direction")||"ltr"),[I,J]=o.useState("chapters"),[D,de]=o.useState(""),[te,me]=o.useState(!1),[Ae,xe]=o.useState(!1),[Ne,nt]=o.useState(""),[ft,Ye]=o.useState(!1),[ge,Ue]=o.useState(null),ee=o.useRef(!1),[Pe,Ve]=o.useState(new Set([0,1,2,3])),[A,Q]=o.useState(!1),[se,re]=o.useState(!0),Le=o.useRef(0),It=o.useRef(),Vl=o.useRef(null),Da=o.useRef(null),At=o.useRef(null),fr=o.useRef(null),wt=o.useRef(),{currentChapter:he,pages:K,nextChapter:Re,previousChapter:qe,chapterIndex:La,totalChapters:Ma,isLoading:Hl,error:Fa,isError:Wl}=zp(t,s),{manga:Pt}=xl(t),{chapters:Oa}=Pa(t),{saveProgress:pr}=lp(),{data:ns,isLoading:Gl,error:qa}=Bp(he?.id),{mutate:Xl,isPending:$a}=Qp(),{data:Yl,isLoading:Jl}=Mo(),jt=Up({speed:parseInt(localStorage.getItem("manga-autoscroll-speed")||"100"),enabled:!1}),Bt=o.useCallback(()=>`manga-read-position-${t}-${s}`,[t,s]),za=o.useCallback(j=>{if(K.length===0)return;const P=Bt(),V={pageIndex:j,timestamp:Date.now(),totalPages:K.length};localStorage.setItem(P,JSON.stringify(V))},[Bt,K.length]),Ua=o.useCallback(()=>{const j=Bt(),P=localStorage.getItem(j);if(!P)return null;try{const V=JSON.parse(P);if(V.totalPages===K.length&&V.pageIndex>=0&&V.pageIndex<K.length)return V}catch{localStorage.removeItem(j)}return null},[Bt,K.length]);o.useCallback(()=>{const j=Bt();localStorage.removeItem(j)},[Bt]),o.useEffect(()=>{if(c(1),u(!0),Ye(!1),Ue(null),ee.current=!1,K.length>0){m(new Array(K.length).fill(!0));const j=Ua();if(j&&j.pageIndex>0&&!ee.current){Ue(j.pageIndex),Ye(!0);const P=_==="rtl"?K.length-1:0;n(P)}else{const P=_==="rtl"?K.length-1:0;n(P)}x==="webtoon"&&_==="rtl"?(me(!0),setTimeout(()=>{const P=document.querySelector(`[data-page-index="${K.length-1}"]`);P?P.scrollIntoView({behavior:"auto",block:"start"}):window.scrollTo(0,document.body.scrollHeight),setTimeout(()=>me(!1),300)},100)):(me(!1),x==="webtoon"?window.scrollTo(0,0):Da.current&&Da.current.scrollTo(0,0))}else m([]),n(0),me(!1)},[s,t,K.length,_,x,Ua]),o.useEffect(()=>{const j=()=>{M(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",j),()=>document.removeEventListener("fullscreenchange",j)},[]),o.useEffect(()=>{if(At.current&&(At.current.disconnect(),At.current=null),x!=="webtoon"||K.length===0||te)return;const j=ne=>{if(te)return;let Te=0,pt=0;ne.forEach(Ss=>{if(Ss.isIntersecting&&Ss.intersectionRatio>Te){Te=Ss.intersectionRatio;const lc=Ss.target;pt=parseInt(lc.dataset.pageIndex||"0")}}),pt!==a&&Te>.5&&n(pt)},P=new IntersectionObserver(j,{threshold:[0,.25,.5,.75,1],rootMargin:"-20% 0px -20% 0px"});return At.current=P,document.querySelectorAll(".webtoon-page-image").forEach(ne=>P.observe(ne)),()=>{At.current&&(At.current.disconnect(),At.current=null)}},[x,K.length,a,te,_]),o.useEffect(()=>{const j=()=>{It.current&&clearTimeout(It.current),It.current=setTimeout(()=>{const P=window.scrollY,V=P-Le.current;Math.abs(V)>5&&(V>0&&P>100?re(!1):V<0&&re(!0),P<100&&re(!0)),Le.current=P},10)};return Le.current=window.scrollY,window.addEventListener("scroll",j,{passive:!0}),()=>{window.removeEventListener("scroll",j),It.current&&clearTimeout(It.current)}},[]),o.useEffect(()=>{localStorage.setItem("manga-reading-mode",x)},[x]),o.useEffect(()=>{localStorage.setItem("manga-fit-width",O.toString())},[O]),o.useEffect(()=>{localStorage.setItem("manga-dark-mode",v.toString())},[v]),o.useEffect(()=>{localStorage.setItem("manga-reading-direction",_)},[_]);const lt=o.useCallback(()=>{u(!0),wt.current&&clearTimeout(wt.current),wt.current=setTimeout(()=>{u(!1)},3e3)},[]);o.useEffect(()=>(lt(),()=>{wt.current&&clearTimeout(wt.current)}),[a,lt]);const js=o.useMemo(()=>{let j=null,P=null;const V=ne=>{P=ne,j&&clearTimeout(j),j=setTimeout(()=>{P&&pr(P),j=null,P=null},2e3)};return V.flush=()=>{j&&(clearTimeout(j),j=null),P&&(pr(P),P=null)},V},[pr]);o.useEffect(()=>{if(!t||!he||K.length===0)return;const j={seriesId:t,chapterId:he.id,lastReadPage:a};return js.flush(),js(j),()=>{js.flush()}},[t,he,a,K.length,js]);const Je=o.useCallback(()=>{if(x==="webtoon"){const ne=document.querySelectorAll(".webtoon-page-image"),Te=_==="rtl"?Math.max(a-1,0):Math.min(a+1,ne.length-1);ne[Te]?.scrollIntoView({behavior:"smooth",block:"start"});return}const j=x==="double"?2:1;let P,V;if(_==="rtl"){if(P=a-j,V=qe,P<0){V&&r(`/manga/${t}/chapter/${V.chapterNumber}`);return}}else if(P=a+j,V=Re,P>=K.length){V&&r(`/manga/${t}/chapter/${V.chapterNumber}`);return}n(P),lt()},[a,K.length,Re,qe,t,r,lt,x,_]),Ze=o.useCallback(()=>{if(x==="webtoon"){const ne=document.querySelectorAll(".webtoon-page-image"),Te=_==="rtl"?Math.min(a+1,ne.length-1):Math.max(a-1,0);ne[Te]?.scrollIntoView({behavior:"smooth",block:"start"});return}const j=x==="double"?2:1;let P,V;if(_==="rtl"){if(P=a+j,V=Re,P>=K.length){V&&r(`/manga/${t}/chapter/${V.chapterNumber}`);return}}else if(P=a-j,V=qe,P<0){V&&r(`/manga/${t}/chapter/${V.chapterNumber}`);return}n(P),lt()},[a,qe,Re,t,r,lt,x,_]),xr=o.useCallback(()=>{Re&&r(`/manga/${t}/chapter/${Re.chapterNumber}`)},[Re,t,r]),gr=o.useCallback(()=>{qe&&r(`/manga/${t}/chapter/${qe.chapterNumber}`)},[qe,t,r]),Ba=o.useCallback(()=>{c(j=>Math.min(j+.25,3))},[]),Qa=o.useCallback(()=>{c(j=>Math.max(j-.25,.5))},[]),Zl=o.useCallback(()=>{c(1)},[]),ec=o.useCallback(j=>{const P=j.touches[0];p({x:P.clientX,y:P.clientY})},[]),tc=o.useCallback(j=>{if(!f)return;const P=j.changedTouches[0],V=f.x-P.clientX,ne=Math.abs(f.y-P.clientY);Math.abs(V)>50&&ne<100&&(V>0?Je():Ze()),p(null)},[f,Je,Ze]),et=o.useCallback(j=>{m(P=>{const V=[...P];return V[j]=!1,V})},[]),Ns=o.useCallback(()=>{document.fullscreenElement?document.exitFullscreen().catch(()=>{}):document.documentElement.requestFullscreen().catch(()=>{})},[]);o.useEffect(()=>{const j=P=>{if(!(P.target instanceof HTMLInputElement||P.target instanceof HTMLTextAreaElement))switch(P.key){case"ArrowLeft":P.preventDefault(),Ze();break;case"ArrowRight":case" ":P.preventDefault(),Je();break;case"ArrowUp":P.preventDefault(),gr();break;case"ArrowDown":P.preventDefault(),xr();break;case"Escape":P.preventDefault(),r(`/manga/${t}`);break;case"f":P.preventDefault(),Ns();break}};return window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)},[Ze,Je,gr,xr,r,t,Ns]);const sc=o.useCallback(j=>{const P=j.currentTarget.getBoundingClientRect(),ne=(j.clientX-P.left)/P.width;ne<.3?Ze():ne>.7?Je():lt()},[Je,Ze,lt]),br=o.useCallback(j=>{const V=Math.max(1,Math.min(j,K.length))-1;if(x==="webtoon"){const Te=document.querySelectorAll(".webtoon-page-image")[V];Te&&(n(V),Te.scrollIntoView({behavior:"smooth",block:"start"}))}else if(x==="double"){let ne=V;_==="rtl"?ne=V-(V+1)%2:ne=V-V%2,n(Math.max(0,Math.min(ne,K.length-1)))}else n(V);xe(!1),nt(""),lt()},[K.length,x,_,lt]),rc=o.useCallback(j=>{j.preventDefault();const P=parseInt(Ne);isNaN(P)?Ne.trim()&&br(1):br(P)},[Ne,br]),ac=o.useCallback(j=>{j.key==="Escape"&&(xe(!1),nt(""))},[]),nc=o.useCallback(()=>{if(ge!==null){if(x==="webtoon")n(ge),setTimeout(()=>{const P=document.querySelectorAll(".webtoon-page-image")[ge];P&&P.scrollIntoView({behavior:"smooth",block:"start"})},100);else if(x==="double"){let j=ge;_==="rtl"?j=ge-(ge+1)%2:j=ge-ge%2,n(Math.max(0,Math.min(j,K.length-1)))}else n(ge);Ye(!1)}},[ge,x,_,K.length]),ic=o.useCallback(()=>{Ye(!1),ee.current=!0},[]),oc=o.useCallback(()=>{if(!Ne.trim())return!1;const j=parseInt(Ne);return!isNaN(j)&&j>=1&&j<=K.length},[Ne,K.length]);o.useCallback(j=>{const P=x==="webtoon"?5:x==="double"?2:1,V=Math.max(0,j-P),ne=Math.min(K.length-1,j+P),Te=new Set;for(let pt=V;pt<=ne;pt++)Te.add(pt);Ve(Te)},[K.length,x]);const Ka=o.useCallback(()=>{if(!Re||A)return;K.length-a<=3&&Re&&Q(!0)},[a,K.length,Re,A]),Va=o.useCallback(j=>{const P=x==="webtoon"?5:3,V=[];if(_==="rtl")for(let ne=1;ne<=P;ne++){const Te=j-ne;Te>=0&&V.push(Te)}else for(let ne=1;ne<=P;ne++){const Te=j+ne;Te<K.length&&V.push(Te)}return V},[x,_,K.length]);if(o.useEffect(()=>{Ka()},[a,Ka]),o.useEffect(()=>{if(K.length===0||a<0||a===0||ft)return;const j=setTimeout(()=>{za(a)},1e3);return()=>clearTimeout(j)},[a,K.length,ft,za]),o.useEffect(()=>{if(x!=="webtoon"){const j=Va(a),P=new Set;P.add(a),j.forEach(V=>P.add(V)),Ve(P)}},[a,x,Va]),o.useEffect(()=>{if(K.length!==0){if(x!=="webtoon"){let j=new Set;if(_==="rtl"){const P=K.length-1,V=Math.max(0,P-4);for(let ne=V;ne<=P;ne++)j.add(ne)}else{const P=Math.min(4,K.length-1);for(let V=0;V<=P;V++)j.add(V)}Ve(j)}Q(!1)}},[s,t,K.length,_,x]),o.useEffect(()=>()=>{fr.current&&(fr.current.disconnect(),fr.current=null)},[]),Hl)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{children:"Loading chapter..."})]})});if(Gl||Jl)return e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsxs("div",{className:"text-white text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{children:"Checking access..."})]})});if(qa){const j=qa.message==="UNAUTHORIZED";return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black flex items-center justify-center p-4",children:e.jsx(Xe,{className:"max-w-md w-full bg-gray-800/50 border-gray-700 backdrop-blur-md",children:e.jsxs("div",{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-yellow-500/20 to-orange-500/20 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-10 h-10 text-yellow-500"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:j?"Login Required":"Access Check Failed"}),e.jsx("p",{className:"text-gray-400",children:j?"Please log in to check if you have access to this chapter":"Unable to verify chapter access. Please try again."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(S,{onClick:()=>r(j?"/login?returnTo="+encodeURIComponent(window.location.pathname):`/series/${t}`),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white",size:"lg",children:j?"Log In":"Back to Series"}),e.jsxs(S,{variant:"outline",onClick:()=>r(`/manga/${t}`),className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Back to Series"]})]})]})})})}if(ns&&!ns.hasAccess){const j=Yl?.balance||0,P=j>=ns.unlockCost;return e.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 to-black flex items-center justify-center p-4",children:e.jsx(Xe,{className:"max-w-md w-full bg-gray-800/50 border-gray-700 backdrop-blur-md",children:e.jsxs("div",{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"w-20 h-20 mx-auto bg-gradient-to-br from-primary/20 to-accent/20 rounded-full flex items-center justify-center",children:e.jsx(Es,{className:"w-10 h-10 text-primary"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Premium Chapter"}),e.jsxs("p",{className:"text-gray-400",children:["This chapter requires ",ns.unlockCost," coins to unlock"]})]}),e.jsx("div",{className:"p-4 bg-gray-900/50 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Your Balance:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qt,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-xl font-bold text-white",children:j})]})]})}),e.jsxs("div",{className:"space-y-3",children:[P?e.jsx(S,{onClick:()=>he&&Xl(he.id),disabled:$a,className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white",size:"lg",children:$a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Unlocking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Es,{className:"w-5 h-5 mr-2"}),"Unlock for ",ns.unlockCost," Coins"]})}):e.jsxs(S,{onClick:()=>r("/shop"),className:"w-full bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90 text-white",size:"lg",children:[e.jsx(Qt,{className:"w-5 h-5 mr-2"}),"Get More Coins"]}),e.jsxs(S,{variant:"outline",onClick:()=>r(`/manga/${t}`),className:"w-full border-gray-600 text-gray-300 hover:bg-gray-800",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Back to Series"]})]})]})})})}if(Wl||!he)return e.jsx("div",{className:"min-h-screen bg-black text-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Chapter Not Found"}),e.jsx("p",{className:"text-gray-400 mb-6",children:Fa instanceof Error?Fa.message:"The chapter you're looking for doesn't exist."}),e.jsx(X,{href:`/manga/${t}`,children:e.jsxs(S,{variant:"outline",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Back to Manga"]})})]})});if(he&&K.length===0)return e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(X,{href:`/manga/${t}`,children:e.jsxs(S,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:[e.jsx(ot,{className:"w-4 h-4 mr-1"}),"Back"]})}),e.jsx(X,{href:"/",children:e.jsx(S,{variant:"ghost",size:"sm",className:"text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:e.jsx(Bs,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"flex gap-2",children:[qe&&e.jsx(X,{href:`/manga/${t}/chapter/${qe.chapterNumber}`,children:e.jsxs(S,{variant:"outline",size:"sm",className:"text-xs",children:[e.jsx(is,{className:"w-3 h-3 mr-1"}),"Prev"]})}),Re&&e.jsx(X,{href:`/manga/${t}/chapter/${Re.chapterNumber}`,children:e.jsxs(S,{size:"sm",className:"text-xs bg-indigo-600 hover:bg-indigo-700",children:["Next",e.jsx(Tt,{className:"w-3 h-3 ml-1"})]})})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:Pt?.title||"Loading..."}),e.jsxs("h2",{className:"text-lg text-gray-600",children:["Chapter ",he.chapterNumber,he.title&&` - ${he.title}`]})]})]})}),e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-8 mb-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-6 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(mn,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Chapter Not Available"}),e.jsx("p",{className:"text-gray-600 mb-6 leading-relaxed",children:"This chapter hasn't been uploaded yet. Please check back later or explore other available chapters."}),e.jsx("div",{className:"bg-white border border-gray-100 rounded-md p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-center gap-8 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Chapter:"}),e.jsxs("span",{className:"ml-2 font-medium text-gray-900",children:[La+1," of ",Ma]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500",children:"Status:"}),e.jsx("span",{className:"ml-2 text-orange-600 font-medium",children:"Coming Soon"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.jsx(X,{href:`/manga/${t}`,children:e.jsxs(S,{variant:"outline",className:"w-full sm:w-auto",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Back to Series"]})}),qe&&e.jsx(X,{href:`/manga/${t}/chapter/${qe.chapterNumber}`,children:e.jsxs(S,{variant:"outline",className:"w-full sm:w-auto border-indigo-200 text-indigo-600 hover:bg-indigo-50",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Previous Chapter"]})}),Re&&e.jsx(X,{href:`/manga/${t}/chapter/${Re.chapterNumber}`,children:e.jsxs(S,{className:"w-full sm:w-auto bg-indigo-600 hover:bg-indigo-700",children:["Next Chapter",e.jsx(Tt,{className:"w-4 h-4 ml-2"})]})})]})]})})})}),e.jsx("div",{className:"border-t border-gray-200 bg-white",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[qe?e.jsx(X,{href:`/manga/${t}/chapter/${qe.chapterNumber}`,children:e.jsxs(S,{variant:"outline",className:"flex items-center",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Previous Chapter"]})}):e.jsx("div",{}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Chapter ",La+1," of ",Ma]}),Re?e.jsx(X,{href:`/manga/${t}/chapter/${Re.chapterNumber}`,children:e.jsxs(S,{className:"bg-indigo-600 hover:bg-indigo-700",children:["Next Chapter",e.jsx(Tt,{className:"w-4 h-4 ml-2"})]})}):e.jsx("div",{})]})})})]});const Ha=K.length>0?(a+1)/K.length*100:0;return e.jsxs("div",{className:C("min-h-screen relative flex flex-col transition-colors duration-300",v?"bg-gray-900 text-white":"bg-gray-50 text-gray-900"),children:[e.jsx(Ke,{title:Pt?.title&&he?.chapterNumber?`${Pt.title} - Chapter ${he.chapterNumber} | AmourScans`:"Read Manga Chapters Online - AmourScans Reader Platform",description:Pt?.title&&he?.chapterNumber?`Read ${Pt.title} Chapter ${he.chapterNumber}${he.title?` - ${he.title}`:""} online on AmourScans. Enjoy high-quality manga scans and the best reading experience.`:"Read manga chapters online on AmourScans. Continue your manga reading journey with high-quality scans, the latest chapters, and an amazing reading experience today.",keywords:`${Pt?.title||"manga"}, chapter ${he?.chapterNumber||""}, read manga online, manga reader, manhwa reader`,type:"article"}),ft&&ge!==null&&e.jsx("div",{className:"fixed top-4 left-1/2 transform -translate-x-1/2 z-40 animate-in slide-in-from-top duration-300",children:e.jsx("div",{className:C("bg-white rounded-lg shadow-lg border p-4 mx-4 min-w-80",v&&"bg-gray-800 border-gray-700"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:C("font-semibold text-sm mb-1",v?"text-gray-100":"text-gray-900"),children:"Continue Reading"}),e.jsxs("p",{className:C("text-sm",v?"text-gray-300":"text-gray-600"),children:["You were on page ",ge+1," of ",K.length]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:ic,className:"text-xs",children:"Dismiss"}),e.jsx(S,{size:"sm",onClick:nc,className:"text-xs",children:"Continue"})]})]})})}),e.jsxs("header",{className:C("sticky top-0 z-50 border-b backdrop-blur-sm",v?"bg-gray-900/95 border-gray-800":"bg-white/95 border-gray-200",d?"opacity-100":"opacity-90"),style:{transform:se?"translateY(0)":"translateY(-100%)",transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>T(!k),className:C(v?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:e.jsx(Di,{className:"w-4 h-4"})}),e.jsx(X,{href:`/manga/${t}`,children:e.jsxs(S,{variant:"ghost",size:"sm",className:C(v?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[e.jsx(ot,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:"Back"})]})}),e.jsx(X,{href:"/",children:e.jsx(S,{variant:"ghost",size:"sm",className:C(v?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:e.jsx(Bs,{className:"w-4 h-4"})})})]}),e.jsxs("div",{className:"flex-1 text-center mx-4 min-w-0",children:[e.jsx("h1",{className:C("text-base font-semibold truncate",v?"text-white":"text-gray-900"),children:Pt?.title||"Loading..."}),e.jsxs("p",{className:C("text-xs truncate",v?"text-gray-400":"text-gray-500"),children:["Chapter ",he?.chapterNumber,he?.title&&` - ${he.title}`]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[e.jsxs(S,{variant:"ghost",size:"sm",onClick:gr,disabled:!qe,className:C("text-xs",v?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:[e.jsx(is,{className:"w-3 h-3"}),"Prev"]}),e.jsxs(S,{variant:"ghost",size:"sm",onClick:xr,disabled:!Re,className:C("text-xs",v?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:["Next",e.jsx(Tt,{className:"w-3 h-3"})]})]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>w(!b),className:C(v?"text-gray-300 hover:text-white hover:bg-gray-800":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:e.jsx(Li,{className:"w-4 h-4"})})]})]}),K.length>0&&e.jsx("div",{className:"px-4 pb-2",children:e.jsx("div",{className:C("relative h-1 rounded-full overflow-hidden",v?"bg-gray-800":"bg-gray-200"),children:e.jsx("div",{className:C("h-full rounded-full transition-all duration-300","bg-gradient-to-r from-blue-500 to-purple-500"),style:{width:`${Ha}%`}})})})]}),e.jsxs("div",{className:"flex flex-1 relative overflow-hidden",children:[e.jsxs("div",{className:C("fixed left-0 z-[70] w-64 transform transition-transform duration-300","top-0","bottom-0",k?"translate-x-0":"-translate-x-full",v?"bg-gray-800 border-gray-700":"bg-white border-gray-200","border-r flex flex-col shadow-2xl"),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-current border-opacity-20 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{variant:I==="chapters"?"default":"ghost",size:"sm",onClick:()=>J("chapters"),className:"text-xs",children:[e.jsx(Wd,{className:"w-3 h-3 mr-1"}),"Ch"]}),e.jsxs(S,{variant:I==="pages"?"default":"ghost",size:"sm",onClick:()=>J("pages"),className:"text-xs",children:[e.jsx(Vd,{className:"w-3 h-3 mr-1"}),"Pages"]})]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>T(!1),children:e.jsx(Ge,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[I==="chapters"&&e.jsxs("div",{className:"p-2 space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:C("absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4",v?"text-gray-400":"text-gray-500")}),e.jsx("input",{type:"text",placeholder:"Search chapters...",value:D,onChange:j=>de(j.target.value),className:C("w-full pl-10 pr-4 py-2 text-sm rounded-md border transition-colors",v?"bg-gray-700 border-gray-600 text-gray-100 placeholder-gray-400 focus:border-blue-500 focus:ring-1 focus:ring-blue-500":"bg-gray-50 border-gray-300 text-gray-900 placeholder-gray-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500","focus:outline-none")})]}),e.jsxs("div",{className:"space-y-1",children:[Oa?.filter(j=>D===""||j.chapterNumber.toLowerCase().includes(D.toLowerCase())||j.title?.toLowerCase().includes(D.toLowerCase())).map(j=>e.jsx(X,{href:`/manga/${t}/chapter/${j.chapterNumber}`,children:e.jsxs(S,{variant:j.chapterNumber===he?.chapterNumber?"secondary":"ghost",className:C("w-full justify-start text-left h-auto py-3 px-3 transition-colors",j.chapterNumber===he?.chapterNumber&&"bg-blue-100 dark:bg-blue-900/30"),children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"text-sm font-medium truncate",children:["Chapter ",j.chapterNumber]}),j.title&&e.jsx("div",{className:C("text-xs truncate",v?"text-gray-400":"text-gray-500"),children:j.title})]}),j.chapterNumber===he?.chapterNumber&&e.jsx("div",{className:"flex-shrink-0 w-2 h-2 rounded-full bg-blue-500"})]})},j.id)),D&&Oa?.filter(j=>j.chapterNumber.toLowerCase().includes(D.toLowerCase())||j.title?.toLowerCase().includes(D.toLowerCase())).length===0&&e.jsxs("div",{className:C("text-center py-8 text-sm",v?"text-gray-400":"text-gray-500"),children:['No chapters found for "',D,'"']})]})]}),I==="pages"&&K.length>0&&e.jsx("div",{className:"p-2",children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:K.map((j,P)=>e.jsxs("button",{onClick:()=>{n(P),x==="webtoon"&&document.querySelector(`[data-page-index="${P}"]`)?.scrollIntoView({behavior:"smooth",block:"start"}),T(!1)},className:C("relative aspect-[3/4] rounded-md overflow-hidden border-2 transition-all duration-200",P===a?"border-blue-500 shadow-lg":"border-gray-300 dark:border-gray-600 hover:border-gray-400","bg-gray-100 dark:bg-gray-700"),children:[e.jsx("img",{src:j,alt:`Page ${P+1}`,className:"w-full h-full object-cover",loading:"lazy"}),e.jsx("div",{className:C("absolute bottom-0 left-0 right-0 bg-black/70 text-white text-xs py-1 px-2 text-center",P===a&&"bg-blue-500"),children:P+1})]},P))})}),e.jsx("div",{className:"p-2 border-t border-current border-opacity-20 mt-auto",children:e.jsx(Na,{page:"reader",location:"bottom_banner",type:"sidebar",className:"w-full",maxAds:1})})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-[60] lg:hidden",onClick:()=>T(!1)}),e.jsx("div",{className:"flex-1 relative overflow-hidden",onClick:j=>{if(x!=="webtoon"){const P=j.currentTarget.getBoundingClientRect(),ne=(j.clientX-P.left)/P.width;if(ne<.3){_==="rtl"?Je():Ze();return}if(ne>.7){_==="rtl"?Ze():Je();return}}u(!0),wt.current&&clearTimeout(wt.current),wt.current=setTimeout(()=>{u(!1)},3e3)},onTouchStart:ec,onTouchEnd:tc,children:e.jsxs("div",{className:C("relative w-full h-full flex items-center justify-center",v?"bg-gray-900":"bg-gray-50"),children:[K.length>0&&e.jsxs(e.Fragment,{children:[x==="webtoon"&&e.jsx("div",{className:"w-full max-w-4xl mx-auto",children:K.map((j,P)=>e.jsxs("div",{className:"flex justify-center relative","data-page-index":P,children:[h[P]&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10",children:e.jsxs("div",{className:C("flex flex-col items-center justify-center p-8 rounded-lg",v?"bg-gray-800/80":"bg-white/80"),children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-2"}),e.jsxs("p",{className:C("text-sm font-medium",v?"text-gray-300":"text-gray-600"),children:["Loading Page ",P+1,"..."]})]})}),e.jsx("img",{src:j,alt:`Page ${P+1}`,className:C("webtoon-page-image max-w-full h-auto transition-opacity duration-300 block",h[P]?"opacity-30":"opacity-100",O?"w-full":"max-h-screen"),style:{transform:`scale(${i})`,transformOrigin:"center top"},onLoad:()=>et(P),onError:()=>et(P),draggable:!1,loading:"lazy"})]},P))}),x==="single"&&e.jsx("div",{className:"relative flex items-center justify-center w-full h-full",children:e.jsx("img",{ref:Vl,src:K[a],alt:`Page ${a+1}`,className:C("max-w-full max-h-full object-contain transition-all duration-200",h[a]?"opacity-0":"opacity-100"),style:{transform:`scale(${i})`,width:O?"100%":"auto",height:O?"auto":"100%"},onLoad:()=>et(a),onError:()=>et(a),onClick:sc,draggable:!1})}),x==="double"&&e.jsxs("div",{className:"relative flex items-center justify-center w-full h-full gap-2",children:[_==="rtl"?a+1<K.length&&e.jsx("img",{src:K[a+1],alt:`Page ${a+2}`,className:C("max-h-full object-contain transition-all duration-200",h[a+1]?"opacity-0":"opacity-100"),style:{transform:`scale(${i})`,maxWidth:"50%"},onLoad:()=>et(a+1),onError:()=>et(a+1),onClick:Ze,draggable:!1}):e.jsx("img",{src:K[a],alt:`Page ${a+1}`,className:C("max-h-full object-contain transition-all duration-200",h[a]?"opacity-0":"opacity-100"),style:{transform:`scale(${i})`,maxWidth:"50%"},onLoad:()=>et(a),onError:()=>et(a),onClick:Ze,draggable:!1}),_==="rtl"?e.jsx("img",{src:K[a],alt:`Page ${a+1}`,className:C("max-h-full object-contain transition-all duration-200",h[a]?"opacity-0":"opacity-100"),style:{transform:`scale(${i})`,maxWidth:"50%"},onLoad:()=>et(a),onError:()=>et(a),onClick:Je,draggable:!1}):a+1<K.length&&e.jsx("img",{src:K[a+1],alt:`Page ${a+2}`,className:C("max-h-full object-contain transition-all duration-200",h[a+1]?"opacity-0":"opacity-100"),style:{transform:`scale(${i})`,maxWidth:"50%"},onLoad:()=>et(a+1),onError:()=>et(a+1),onClick:Je,draggable:!1})]})]}),K.length>0&&h.some(j=>j)&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}),e.jsxs("div",{className:"md:hidden absolute inset-0 pointer-events-none",children:[e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1/3 pointer-events-auto",onClick:Ze}),e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1/3 pointer-events-auto",onClick:Je})]})]})})]}),K.length>0&&e.jsx("footer",{className:C("sticky bottom-0 z-50 border-t backdrop-blur-sm transition-all duration-300",v?"bg-gray-900/95 border-gray-800":"bg-white/95 border-gray-200",d?"opacity-100":"opacity-90"),children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:C("text-sm font-medium",v?"text-gray-300":"text-gray-600"),children:[a+1," / ",K.length]}),e.jsxs("div",{className:C("text-xs px-2 py-1 rounded",v?"bg-gray-800 text-gray-400":"bg-gray-100 text-gray-500"),children:[Math.round(Ha),"%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{variant:"outline",size:"sm",onClick:Ze,disabled:a===0&&!qe,className:C("text-xs",v?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-600 hover:bg-gray-50"),children:e.jsx(is,{className:"w-3 h-3"})}),Ae?e.jsxs("form",{onSubmit:rc,className:"flex items-center gap-1",children:[e.jsx(Qe,{type:"number",min:1,max:K.length,value:Ne,onChange:j=>nt(j.target.value),onKeyDown:ac,placeholder:`1-${K.length}`,className:C("w-16 h-8 text-xs text-center px-2",v?"bg-gray-800 border-gray-600 text-gray-300 placeholder:text-gray-500":"bg-white border-gray-300 text-gray-900 placeholder:text-gray-400",Ne.trim()&&!oc()?v?"border-red-500":"border-red-400":""),autoFocus:!0,onBlur:j=>{j.relatedTarget?.hasAttribute("data-jump-go")||(xe(!1),nt(""))}}),e.jsx(S,{type:"submit","data-jump-go":"true",variant:"outline",size:"sm",disabled:!Ne.trim(),className:C("h-8 px-2 text-xs",v?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-600 hover:bg-gray-50",!Ne.trim()&&"opacity-50"),children:"Go"})]}):e.jsxs(S,{variant:"ghost",size:"sm",onClick:()=>{xe(!0),nt((a+1).toString())},className:C("text-xs px-2 h-8",v?"text-gray-400 hover:text-gray-300 hover:bg-gray-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),title:"Jump to page",children:[a+1," / ",K.length]}),e.jsx(S,{variant:"outline",size:"sm",onClick:Je,disabled:a===K.length-1&&!Re,className:C("text-xs",v?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-600 hover:bg-gray-50"),children:e.jsx(Tt,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"hidden sm:flex items-center gap-1",children:[e.jsx(S,{variant:"ghost",size:"sm",onClick:Qa,disabled:i<=.5,className:C("text-xs w-8 h-8 p-0",v?"text-gray-300 hover:bg-gray-800":"text-gray-600 hover:bg-gray-100"),children:e.jsx(yn,{className:"w-3 h-3"})}),e.jsxs("span",{className:C("text-xs w-12 text-center",v?"text-gray-400":"text-gray-500"),children:[Math.round(i*100),"%"]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:Ba,disabled:i>=3,className:C("text-xs w-8 h-8 p-0",v?"text-gray-300 hover:bg-gray-800":"text-gray-600 hover:bg-gray-100"),children:e.jsx(bn,{className:"w-3 h-3"})})]}),e.jsx(S,{variant:"ghost",size:"sm",onClick:Ns,className:C("text-xs w-8 h-8 p-0",v?"text-gray-300 hover:bg-gray-800":"text-gray-600 hover:bg-gray-100"),children:N?e.jsx(xn,{className:"w-3 h-3"}):e.jsx(pn,{className:"w-3 h-3"})})]})]})}),b&&e.jsx("div",{className:"fixed inset-0 z-60 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:e.jsx(Xe,{className:C("w-[95vw] max-w-2xl sm:max-w-3xl max-h-[80vh] overflow-y-auto",v?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:C("text-lg font-semibold",v?"text-white":"text-gray-900"),children:"Reading Settings"}),e.jsx(S,{variant:"ghost",size:"sm",onClick:()=>w(!1),className:C(v?"text-gray-400 hover:text-white hover:bg-gray-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),children:e.jsx(Ge,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:C("text-sm font-medium",v?"text-gray-200":"text-gray-700"),children:"Reading Mode"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{mode:"single",label:"Single"},{mode:"double",label:"Double"},{mode:"webtoon",label:"Webtoon"}].map(({mode:j,label:P})=>e.jsx(S,{variant:x===j?"default":"outline",size:"sm",onClick:()=>y(j),className:C("transition-colors duration-200",x===j?"bg-blue-600 text-white":v?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:P},j))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:C("text-sm font-medium",v?"text-gray-200":"text-gray-700"),children:"Dark Mode"}),e.jsx(Qs,{checked:v,onCheckedChange:E})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:C("text-sm font-medium",v?"text-gray-200":"text-gray-700"),children:"Fit to Width"}),e.jsx(Qs,{checked:O,onCheckedChange:G})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:C("text-sm font-medium",v?"text-gray-200":"text-gray-700"),children:["Zoom: ",Math.round(i*100),"%"]}),e.jsx(Jr,{value:[i],onValueChange:j=>c(j[0]),min:.5,max:3,step:.1,className:"w-full"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsx(S,{size:"sm",variant:"outline",onClick:Qa,children:e.jsx(yn,{className:"w-3 h-3"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:Zl,children:e.jsx(Jd,{className:"w-3 h-3"})}),e.jsx(S,{size:"sm",variant:"outline",onClick:Ba,children:e.jsx(bn,{className:"w-3 h-3"})})]})]}),x==="webtoon"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:C("text-sm font-medium",v?"text-gray-200":"text-gray-700"),children:"Auto-Scroll"}),e.jsxs(S,{size:"sm",variant:jt.isAutoScrolling?"default":"outline",onClick:jt.toggleAutoScroll,className:C("transition-colors duration-200",jt.isAutoScrolling?"bg-blue-600 text-white":v?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:[jt.isAutoScrolling?e.jsx(Gd,{className:"w-3 h-3 mr-1"}):e.jsx(Ur,{className:"w-3 h-3 mr-1"}),jt.isAutoScrolling?"Pause":"Start"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:C("text-xs font-medium",v?"text-gray-400":"text-gray-600"),children:["Speed: ",jt.speed,"px/s"]}),e.jsx(Jr,{value:[jt.speed],onValueChange:j=>{jt.setSpeed(j[0]),localStorage.setItem("manga-autoscroll-speed",j[0].toString())},min:50,max:300,step:10,className:"w-full"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:C("text-sm font-medium",v?"text-gray-200":"text-gray-700"),children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(S,{variant:"outline",size:"sm",onClick:Ns,className:C(v?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:[N?e.jsx(xn,{className:"w-3 h-3 mr-2"}):e.jsx(pn,{className:"w-3 h-3 mr-2"}),N?"Exit":"Fullscreen"]}),e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>n(0),className:C(v?"border-gray-600 text-gray-300 hover:bg-gray-800":"border-gray-300 text-gray-700 hover:bg-gray-100"),children:[e.jsx(mn,{className:"w-3 h-3 mr-2"}),"First Page"]})]})]})]})]})})}),he&&x==="webtoon"&&e.jsx("div",{className:"py-8",children:e.jsx(o.Suspense,{fallback:e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),children:e.jsx(Kp,{chapterId:he.id})})})]})}const Ht=Pc,Wt=Tc,Lt=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(oi,{ref:a,className:C("flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background transition-all duration-200 data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-[#707ff5] focus:ring-offset-2 focus:border-[#707ff5]/50 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 hover:border-[#707ff5]/30",t),...r,children:[s,e.jsx(_c,{asChild:!0,children:e.jsx(gs,{className:"h-4 w-4 opacity-50"})})]}));Lt.displayName=oi.displayName;const Ml=o.forwardRef(({className:t,...s},r)=>e.jsx(li,{ref:r,className:C("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Ri,{className:"h-4 w-4"})}));Ml.displayName=li.displayName;const Fl=o.forwardRef(({className:t,...s},r)=>e.jsx(ci,{ref:r,className:C("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(gs,{className:"h-4 w-4"})}));Fl.displayName=ci.displayName;const Mt=o.forwardRef(({className:t,children:s,position:r="popper",...a},n)=>e.jsx(kc,{children:e.jsxs(di,{ref:n,className:C("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border border-[#707ff5]/20 bg-popover text-popover-foreground shadow-xl shadow-[#707ff5]/10 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...a,children:[e.jsx(Ml,{}),e.jsx(Cc,{className:C("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Fl,{})]})}));Mt.displayName=di.displayName;const Hp=o.forwardRef(({className:t,...s},r)=>e.jsx(ui,{ref:r,className:C("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Hp.displayName=ui.displayName;const We=o.forwardRef(({className:t,children:s,...r},a)=>e.jsxs(mi,{ref:a,className:C("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors duration-150 focus:bg-gradient-to-r focus:from-[#4b4bc3]/20 focus:to-[#707ff5]/20 focus:text-[#707ff5] data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Ic,{children:e.jsx(la,{className:"h-4 w-4"})})}),e.jsx(Ac,{children:s})]}));We.displayName=mi.displayName;const Wp=o.forwardRef(({className:t,...s},r)=>e.jsx(hi,{ref:r,className:C("-mx-1 my-1 h-px bg-muted",t),...s}));Wp.displayName=hi.displayName;var hr="Checkbox",[Gp]=Jt(hr),[Xp,Ea]=Gp(hr);function Yp(t){const{__scopeCheckbox:s,checked:r,children:a,defaultChecked:n,disabled:i,form:c,name:d,onCheckedChange:u,required:h,value:m="on",internal_do_not_use_render:f}=t,[p,x]=Zr({prop:r,defaultProp:n??!1,onChange:u,caller:hr}),[y,b]=o.useState(null),[w,k]=o.useState(null),T=o.useRef(!1),N=y?!!c||!!y.closest("form"):!0,M={checked:p,disabled:i,setChecked:x,control:y,setControl:b,name:d,form:c,value:m,hasConsumerStoppedPropagationRef:T,required:h,defaultChecked:kt(n)?!1:n,isFormControl:N,bubbleInput:w,setBubbleInput:k};return e.jsx(Xp,{scope:s,...M,children:Jp(f)?f(M):a})}var Ol="CheckboxTrigger",ql=o.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:r,...a},n)=>{const{control:i,value:c,disabled:d,checked:u,required:h,setControl:m,setChecked:f,hasConsumerStoppedPropagationRef:p,isFormControl:x,bubbleInput:y}=Ea(Ol,t),b=De(n,m),w=o.useRef(u);return o.useEffect(()=>{const k=i?.form;if(k){const T=()=>f(w.current);return k.addEventListener("reset",T),()=>k.removeEventListener("reset",T)}},[i,f]),e.jsx(ke.button,{type:"button",role:"checkbox","aria-checked":kt(u)?"mixed":u,"aria-required":h,"data-state":Ql(u),"data-disabled":d?"":void 0,disabled:d,value:c,...a,ref:b,onKeyDown:ve(s,k=>{k.key==="Enter"&&k.preventDefault()}),onClick:ve(r,k=>{f(T=>kt(T)?!0:!T),y&&x&&(p.current=k.isPropagationStopped(),p.current||k.stopPropagation())})})});ql.displayName=Ol;var Ra=o.forwardRef((t,s)=>{const{__scopeCheckbox:r,name:a,checked:n,defaultChecked:i,required:c,disabled:d,value:u,onCheckedChange:h,form:m,...f}=t;return e.jsx(Yp,{__scopeCheckbox:r,checked:n,defaultChecked:i,disabled:d,required:c,onCheckedChange:h,name:a,form:m,value:u,internal_do_not_use_render:({isFormControl:p})=>e.jsxs(e.Fragment,{children:[e.jsx(ql,{...f,ref:s,__scopeCheckbox:r}),p&&e.jsx(Bl,{__scopeCheckbox:r})]})})});Ra.displayName=hr;var $l="CheckboxIndicator",zl=o.forwardRef((t,s)=>{const{__scopeCheckbox:r,forceMount:a,...n}=t,i=Ea($l,r);return e.jsx(Zt,{present:a||kt(i.checked)||i.checked===!0,children:e.jsx(ke.span,{"data-state":Ql(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});zl.displayName=$l;var Ul="CheckboxBubbleInput",Bl=o.forwardRef(({__scopeCheckbox:t,...s},r)=>{const{control:a,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:c,required:d,disabled:u,name:h,value:m,form:f,bubbleInput:p,setBubbleInput:x}=Ea(Ul,t),y=De(r,x),b=ea(i),w=ta(a);o.useEffect(()=>{const T=p;if(!T)return;const N=window.HTMLInputElement.prototype,O=Object.getOwnPropertyDescriptor(N,"checked").set,G=!n.current;if(b!==i&&O){const v=new Event("click",{bubbles:G});T.indeterminate=kt(i),O.call(T,kt(i)?!1:i),T.dispatchEvent(v)}},[p,b,i,n]);const k=o.useRef(kt(i)?!1:i);return e.jsx(ke.input,{type:"checkbox","aria-hidden":!0,defaultChecked:c??k.current,required:d,disabled:u,name:h,value:m,form:f,...s,tabIndex:-1,ref:y,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Bl.displayName=Ul;function Jp(t){return typeof t=="function"}function kt(t){return t==="indeterminate"}function Ql(t){return kt(t)?"indeterminate":t?"checked":"unchecked"}const Kl=o.forwardRef(({className:t,...s},r)=>e.jsx(Ra,{ref:r,className:C("peer h-4 w-4 shrink-0 rounded-sm border-2 border-primary ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#707ff5] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-gradient-to-br data-[state=checked]:from-[#4b4bc3] data-[state=checked]:to-[#707ff5] data-[state=checked]:border-[#707ff5] data-[state=checked]:text-primary-foreground data-[state=checked]:shadow-md data-[state=checked]:shadow-[#707ff5]/30",t),...s,children:e.jsx(zl,{className:C("flex items-center justify-center text-current"),children:e.jsx(la,{className:"h-4 w-4 stroke-[3]"})})}));Kl.displayName=Ra.displayName;const Zp=["Action","Adventure","Comedy","Drama","Fantasy","Horror","Mystery","Romance","Sci-Fi","Slice of Life","Sports","Supernatural","Thriller","Historical","Psychological","School","Martial Arts","Mecha"],ex=["Action","Romance","Fantasy","Comedy","Drama","Thriller"],Er=[{value:"all",label:"All Status"},{value:"ongoing",label:"Ongoing"},{value:"completed",label:"Completed"},{value:"hiatus",label:"Hiatus"}],Rr=[{value:"all",label:"All Types"},{value:"manga",label:"Manga"},{value:"manhwa",label:"Manhwa"},{value:"manhua",label:"Manhua"},{value:"webtoon",label:"Webtoon"}],tx=[{value:"updated",label:"Recently Updated",icon:_t},{value:"rating",label:"Highest Rated",icon:ze},{value:"alphabetical",label:"A-Z",icon:_e},{value:"chapters",label:"Most Chapters",icon:_e}],As="mangaverse_recent_searches",sx=5;function rx(){const[t,s]=o.useState([]),[r,a]=o.useState([]),[n,i]=o.useState(!0),[c,d]=o.useState("all"),[u,h]=Ce(),{toast:m}=Oe(),[f,p]=o.useState([]),[x,y]=o.useState("all"),[b,w]=o.useState("all"),[k,T]=o.useState("updated"),[N,M]=o.useState("desc"),[O,G]=o.useState(!1),[v,E]=o.useState(""),[_,q]=o.useState(""),[I,J]=o.useState(!1),[D,de]=o.useState([]),te=o.useRef(),me=o.useRef(null);o.useEffect(()=>{const A=localStorage.getItem(As);if(A)try{de(JSON.parse(A))}catch{localStorage.removeItem(As)}},[]);const Ae=A=>{if(!A.trim())return;const Q=[A,...D.filter(se=>se.toLowerCase()!==A.toLowerCase())].slice(0,sx);de(Q),localStorage.setItem(As,JSON.stringify(Q))};o.useEffect(()=>(te.current&&clearTimeout(te.current),te.current=setTimeout(()=>{E(_),_.trim()&&Ae(_.trim())},300),()=>{te.current&&clearTimeout(te.current)}),[_]);const xe=o.useMemo(()=>{if(!_.trim()||_===v)return[];const A=_.toLowerCase();return r.filter(Q=>Q.title.toLowerCase().includes(A)).slice(0,5).map(Q=>Q.title)},[_,v,r]);o.useEffect(()=>{const Q=new URLSearchParams(window.location.search).get("filter");Q==="hot"||Q==="popular"?d("hot"):Q==="new"||Q==="latest"?d("new"):Q==="all"&&d("all")},[u]),o.useEffect(()=>{(async()=>{i(!0);try{let Q="/api/series";c==="hot"?Q="/api/sections/popular-today":c==="new"&&(Q="/api/sections/latest-updates");const se=await fetch(Q,{cache:"no-cache"});if(se.ok){const re=await se.json();a(re),s(re)}else m({title:"Unable to load series",description:"Failed to fetch manga series. Please try again later.",variant:"error"})}catch{m({title:"Connection error",description:"Unable to connect to the server. Please check your internet connection.",variant:"error"})}finally{i(!1)}})()},[c]);const Ne=A=>{if(!A)return[];if(Array.isArray(A))return A;if(typeof A=="string")try{const Q=JSON.parse(A);return Array.isArray(Q)?Q:typeof Q=="string"?[Q]:typeof Q=="number"?[String(Q)]:[]}catch{return A.split(",").map(Q=>Q.trim()).filter(Boolean)}return[]},nt=A=>{if(!A)return!1;const Q=Date.now()-10080*60*1e3;return new Date(A).getTime()>Q},ft=A=>!!(A.rating&&A.rating>=4.5||A.chapterCount&&A.chapterCount>=50);o.useEffect(()=>{let A=[...r];if(v.trim()){const Q=v.toLowerCase();A=A.filter(se=>{const re=se.title.toLowerCase().includes(Q),Le=Ne(se.genres).some(It=>It.toLowerCase().includes(Q));return re||Le})}f.length>0&&(A=A.filter(Q=>{const se=Ne(Q.genres);return f.some(re=>se.includes(re))})),x!=="all"&&(A=A.filter(Q=>Q.status===x)),b!=="all"&&(A=A.filter(Q=>Q.type===b)),A.sort((Q,se)=>{let re=0;switch(k){case"rating":re=(se.rating||0)-(Q.rating||0);break;case"alphabetical":re=Q.title.localeCompare(se.title);break;case"chapters":re=(se.chapterCount||0)-(Q.chapterCount||0);break;case"updated":default:re=new Date(se.updatedAt||0).getTime()-new Date(Q.updatedAt||0).getTime();break}return N==="asc"?-re:re}),s(A)},[r,f,x,b,k,N,v]);const Ye=A=>{p(Q=>Q.includes(A)?Q.filter(se=>se!==A):[...Q,A])},ge=()=>{p([]),y("all"),w("all"),T("updated"),M("desc"),q(""),E("")},Ue=f.length+(x!=="all"?1:0)+(b!=="all"?1:0)+(k!=="updated"?1:0)+(v.trim()?1:0),ee=A=>{q(A),E(A),J(!1),Ae(A)},Pe=()=>{de([]),localStorage.removeItem(As)},Ve=()=>{M(A=>A==="asc"?"desc":"asc")};return e.jsxs("div",{className:"min-h-screen bg-background w-full overflow-x-hidden",children:[e.jsx(Ke,{title:"Browse Manga",description:"Browse our extensive collection of manga and manhwa. Filter by genre, status, and popularity to find your next favorite series.",keywords:"browse manga, manga collection, manhwa library, manga genres"}),e.jsx(at,{}),e.jsxs("div",{className:"max-w-[1600px] mx-auto px-4 sm:px-6 lg:px-8 py-6 sm:py-8 pb-24 sm:pb-8",children:[e.jsxs(S,{variant:"ghost",onClick:()=>h("/"),className:"w-fit text-muted-foreground hover:text-primary mb-4 -ml-2",children:[e.jsx(ot,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold text-foreground mb-6",children:"Discover Series"}),e.jsxs("div",{className:"relative mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(st,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-5 h-5 z-10"}),e.jsx(Qe,{ref:me,type:"text",placeholder:"Search by title or genre...",value:_,onChange:A=>q(A.target.value),onFocus:()=>J(!0),onBlur:()=>setTimeout(()=>J(!1),200),className:"pl-10 pr-32 h-12 sm:h-14 text-base bg-card/50 border-border/50 focus:border-primary focus:ring-2 focus:ring-primary/20 transition-all"}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex items-center gap-1 z-10",children:[_&&e.jsx(S,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 hover:bg-muted",onClick:()=>{q(""),E("")},"aria-label":"Clear search",children:e.jsx(Ge,{className:"w-4 h-4"})}),e.jsxs(co,{open:O,onOpenChange:G,children:[e.jsx(Ju,{asChild:!0,children:e.jsxs(S,{variant:"ghost",size:"sm",className:"h-8 px-3 relative hover:bg-muted","aria-label":`Open advanced filters${Ue>0?` (${Ue} active)`:""}`,children:[e.jsx(ua,{className:"w-4 h-4"}),Ue>0&&e.jsx(ie,{className:"ml-1 px-1.5 py-0 h-4 min-w-4 rounded-full bg-primary text-primary-foreground text-xs font-bold",children:Ue})]})}),e.jsxs(pa,{side:"left",className:"w-[95vw] sm:w-[400px] overflow-y-auto",children:[e.jsxs(xa,{className:"mb-6",children:[e.jsx(ga,{className:"text-xl",children:"Advanced Filters"}),e.jsx(mo,{children:"Refine your search to find the perfect series"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(Et,{className:"text-sm font-semibold",children:"Status"}),e.jsxs(Ht,{value:x,onValueChange:y,children:[e.jsx(Lt,{className:"min-h-[44px]",children:e.jsx(Wt,{})}),e.jsx(Mt,{children:Er.map(A=>e.jsx(We,{value:A.value,children:A.label},A.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Et,{className:"text-sm font-semibold",children:"Type"}),e.jsxs(Ht,{value:b,onValueChange:w,children:[e.jsx(Lt,{className:"min-h-[44px]",children:e.jsx(Wt,{})}),e.jsx(Mt,{children:Rr.map(A=>e.jsx(We,{value:A.value,children:A.label},A.value))})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Et,{className:"text-sm font-semibold",children:"All Genres"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Zp.map(A=>e.jsxs("div",{className:"flex items-center space-x-2 min-h-[44px]",children:[e.jsx(Kl,{id:`genre-${A}`,checked:f.includes(A),onCheckedChange:()=>Ye(A),className:"min-w-[20px] min-h-[20px]"}),e.jsx(Et,{htmlFor:`genre-${A}`,className:"text-sm font-normal cursor-pointer leading-tight",children:A})]},A))})]}),Ue>0&&e.jsxs(S,{variant:"outline",onClick:ge,className:"w-full min-h-[44px] border-destructive/50 text-destructive hover:bg-destructive hover:text-destructive-foreground",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Clear All Filters"]})]})]})]})]})]}),I&&(xe.length>0||D.length>0)&&e.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-card border border-border rounded-lg shadow-xl overflow-hidden",children:[xe.length>0&&e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground px-3 py-2",children:"Suggestions"}),xe.map((A,Q)=>e.jsxs("button",{className:"w-full text-left px-3 py-2 hover:bg-muted rounded-md transition-colors text-sm",onClick:()=>ee(A),children:[e.jsx(st,{className:"w-3 h-3 inline mr-2 text-muted-foreground"}),A]},Q))]}),!_&&D.length>0&&e.jsxs("div",{className:"p-2 border-t border-border",children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground",children:"Recent Searches"}),e.jsx(S,{variant:"ghost",size:"sm",className:"h-6 text-xs",onClick:Pe,children:"Clear"})]}),D.map((A,Q)=>e.jsxs("button",{className:"w-full text-left px-3 py-2 hover:bg-muted rounded-md transition-colors text-sm",onClick:()=>ee(A),children:[e.jsx(st,{className:"w-3 h-3 inline mr-2 text-muted-foreground"}),A]},Q))]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-wrap gap-2 mb-4",children:[e.jsx(S,{variant:c==="all"?"default":"outline",className:`min-h-[44px] px-4 py-2 rounded-lg text-sm sm:text-base font-medium transition-all duration-200 ${c==="all"?"bg-primary hover:bg-primary/90 text-primary-foreground shadow-lg":"bg-transparent border-border text-muted-foreground hover:text-foreground hover:border-primary"}`,onClick:()=>d("all"),children:" All"}),e.jsxs(S,{variant:c==="hot"?"default":"outline",className:`min-h-[44px] px-5 py-2 rounded-xl text-sm sm:text-base font-bold transition-all duration-300 ${c==="hot"?"bg-gradient-to-r from-[#f2a1f2] via-[#a195f9] to-[#f2a1f2] hover:from-[#a195f9] hover:to-[#f2a1f2] text-white shadow-lg shadow-[#f2a1f2]/40 hover:shadow-xl hover:shadow-[#a195f9]/50 hover:scale-105":"bg-transparent border-2 border-[#f2a1f2]/30 text-[#f2a1f2] hover:text-white hover:bg-[#f2a1f2]/20 hover:border-[#f2a1f2]"}`,onClick:()=>d("hot"),children:[e.jsx(Gt,{className:"w-4 h-4 mr-1.5"}),"HOT"]}),e.jsxs(S,{variant:c==="new"?"default":"outline",className:`min-h-[44px] px-5 py-2 rounded-xl text-sm sm:text-base font-bold transition-all duration-300 ${c==="new"?"bg-gradient-to-r from-[#707ff5] to-[#4b4bc3] hover:from-[#4b4bc3] hover:to-[#1e1e76] text-white shadow-lg shadow-[#707ff5]/40 hover:shadow-xl hover:shadow-[#4b4bc3]/50 hover:scale-105":"bg-transparent border-2 border-[#707ff5]/30 text-[#707ff5] hover:text-white hover:bg-[#707ff5]/20 hover:border-[#707ff5]"}`,onClick:()=>d("new"),children:[e.jsx(zt,{className:"w-4 h-4 mr-1.5"}),"NEW"]})]}),e.jsx("div",{className:"mb-4",children:e.jsx(Hs,{className:"w-full",children:e.jsx("div",{className:"flex items-center space-x-2 pb-2",children:ex.map(A=>e.jsx(S,{variant:f.includes(A)?"default":"outline",size:"sm",className:`min-h-[44px] px-4 py-2 rounded-full text-xs sm:text-sm font-medium whitespace-nowrap transition-all duration-200 ${f.includes(A)?"bg-primary hover:bg-primary/90 text-primary-foreground shadow-md":"bg-card/50 border-border/50 hover:border-primary hover:bg-primary/10"}`,onClick:()=>Ye(A),children:A},A))})})}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex items-center gap-2 flex-wrap w-full sm:w-auto",children:e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",role:"status","aria-live":"polite","aria-label":"Active filters",children:[x!=="all"&&e.jsxs(ie,{variant:"secondary",className:"gap-1.5 min-h-[36px] px-3 text-sm",children:[Er.find(A=>A.value===x)?.label,e.jsx("button",{onClick:()=>y("all"),"aria-label":`Remove ${Er.find(A=>A.value===x)?.label} status filter`,className:"inline-flex hover:bg-background rounded-full p-0.5",children:e.jsx(Ge,{className:"w-3 h-3"})})]}),b!=="all"&&e.jsxs(ie,{variant:"secondary",className:"gap-1.5 min-h-[36px] px-3 text-sm",children:[Rr.find(A=>A.value===b)?.label,e.jsx("button",{onClick:()=>w("all"),"aria-label":`Remove ${Rr.find(A=>A.value===b)?.label} type filter`,className:"inline-flex hover:bg-background rounded-full p-0.5",children:e.jsx(Ge,{className:"w-3 h-3"})})]}),f.slice(0,2).map(A=>e.jsxs(ie,{variant:"secondary",className:"gap-1.5 min-h-[36px] px-3 text-sm",children:[A,e.jsx("button",{onClick:()=>Ye(A),"aria-label":`Remove ${A} genre filter`,className:"inline-flex hover:bg-background rounded-full p-0.5",children:e.jsx(Ge,{className:"w-3 h-3"})})]},A)),f.length>2&&e.jsxs(ie,{variant:"secondary",className:"min-h-[36px] px-3 text-sm",children:["+",f.length-2," more"]})]})}),e.jsxs("div",{className:"flex items-center gap-2 w-full sm:w-auto",children:[e.jsx(Et,{className:"text-sm text-muted-foreground whitespace-nowrap hidden sm:block",children:"Sort:"}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-initial",children:[e.jsxs(Ht,{value:k,onValueChange:T,children:[e.jsx(Lt,{className:"min-h-[44px] flex-1 sm:w-[180px] bg-card/50",children:e.jsx(Wt,{})}),e.jsx(Mt,{children:tx.map(A=>{const Q=A.icon;return e.jsx(We,{value:A.value,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),A.label]})},A.value)})})]}),e.jsx(S,{variant:"outline",size:"icon",className:"min-h-[44px] min-w-[44px] bg-card/50",onClick:Ve,"aria-label":`Sort ${N==="asc"?"ascending":"descending"}`,children:e.jsx(Md,{className:`w-4 h-4 transition-transform ${N==="asc"?"rotate-180":""}`})})]})]})]}),!n&&e.jsxs("div",{className:"text-sm sm:text-base text-muted-foreground mt-4 flex items-center gap-2",children:[e.jsx(_e,{className:"w-4 h-4"}),e.jsxs("span",{children:["Showing ",e.jsx("span",{className:"font-semibold text-foreground",children:t.length})," of"," ",e.jsx("span",{className:"font-semibold text-foreground",children:r.length})," series"]})]})]}),e.jsx(Uo,{page:"search_results",location:"top_banner",className:"mb-8"}),n&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 sm:gap-6 card-grid",children:[...Array(12)].map((A,Q)=>e.jsx(qo,{},Q))}),!n&&t.length===0&&e.jsxs("div",{className:"text-center py-16 bg-gradient-to-br from-muted/30 to-muted/10 rounded-2xl border border-border/50",children:[e.jsx(qd,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/50"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"No series found"}),e.jsx("p",{className:"text-sm sm:text-base text-muted-foreground mb-6 max-w-md mx-auto px-4",children:v?`No results for "${v}". Try different keywords or browse all series.`:"Try adjusting your filters or search terms to find more series."}),Ue>0&&e.jsxs(S,{variant:"outline",onClick:ge,className:"min-h-[44px]",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Clear All Filters"]})]}),!n&&t.length>0&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 sm:gap-6 card-grid",children:t.map(A=>e.jsx(ax,{item:A,navigate:h,isNew:nt(A.createdAt),isHot:ft(A)},A.id))})]})]})}const ax=o.memo(function({item:s,navigate:r,isNew:a,isHot:n}){const c=(h=>{if(!h)return[];if(Array.isArray(h))return h;if(typeof h=="string")try{const m=JSON.parse(h);return Array.isArray(m)?m:[]}catch{return h.split(",").map(m=>m.trim()).filter(Boolean)}return[]})(s.genres),d=s.updatedAt?ps(new Date(s.updatedAt),{addSuffix:!0}):"",u=h=>{switch(h.toLowerCase()){case"ongoing":return"bg-green-500/20 text-green-400 border-green-500/30";case"completed":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"hiatus":return"bg-orange-500/20 text-orange-400 border-orange-500/30";default:return"bg-muted/50 text-muted-foreground border-border/30"}};return e.jsxs("div",{className:"group relative bg-card/80 backdrop-blur-sm rounded-xl overflow-hidden border border-border/40 cursor-pointer will-change-transform shadow-lg",style:{transition:"transform 150ms cubic-bezier(0.4, 0, 0.2, 1), box-shadow 150ms cubic-bezier(0.4, 0, 0.2, 1), border-color 150ms cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateZ(0)"},onMouseEnter:h=>{h.currentTarget.style.transform="translateY(-10px) translateZ(0)",h.currentTarget.style.boxShadow="0 12px 24px rgba(112, 127, 245, 0.3), 0 8px 16px rgba(161, 149, 249, 0.2), 0 4px 8px rgba(0,0,0,0.15)",h.currentTarget.style.borderColor="rgba(112, 127, 245, 0.5)"},onMouseLeave:h=>{h.currentTarget.style.transform="translateZ(0)",h.currentTarget.style.boxShadow="",h.currentTarget.style.borderColor=""},onClick:()=>r(`/manga/${s.id}`),"data-testid":`series-item-${s.id}`,children:[e.jsxs("div",{className:"relative w-full bg-muted",style:{aspectRatio:"3/4"},children:[s.coverImageUrl?e.jsx("img",{src:s.coverImageUrl,alt:s.title,width:300,height:400,className:"w-full h-full object-cover will-change-transform",style:{transition:"transform 300ms cubic-bezier(0.4, 0, 0.2, 1)",transform:"translateZ(0)"},onMouseEnter:h=>{h.target.style.transform="scale(1.1) translateZ(0)"},onMouseLeave:h=>{h.target.style.transform="translateZ(0)"},loading:"lazy"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/80 to-muted/60 flex items-center justify-center",children:e.jsx(_e,{className:"w-12 h-12 text-muted-foreground/30"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-150"}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1.5",children:[a&&e.jsxs(ie,{className:"bg-gradient-to-r from-[#707ff5] to-[#4b4bc3] text-white text-xs px-2 py-1 rounded-md font-bold shadow-lg border-0",children:[e.jsx(zt,{className:"w-3 h-3 mr-1"}),"NEW"]}),n&&e.jsxs(ie,{className:"bg-gradient-to-r from-red-500 to-orange-500 text-white text-xs px-2 py-1 rounded-md font-bold shadow-lg border-0",children:[e.jsx(Gt,{className:"w-3 h-3 mr-1"}),"HOT"]})]}),c[0]&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx(ie,{variant:"info",className:"text-xs px-2 py-1 rounded-md",children:c[0]})})]}),e.jsxs("div",{className:"p-3 space-y-2",children:[e.jsx("h3",{className:"font-bold text-sm line-clamp-2 text-foreground group-hover:text-primary transition-colors min-h-[2.5rem] leading-tight",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ze,{className:"w-3.5 h-3.5 fill-yellow-400 text-yellow-400"}),e.jsx("span",{className:"font-semibold text-foreground",children:s.rating?Number(s.rating).toFixed(1):"N/A"})]}),s.chapterCount!==void 0&&e.jsxs("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsx(_e,{className:"w-3.5 h-3.5"}),e.jsx("span",{children:s.chapterCount})]})]}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx(ie,{variant:"outline",className:`text-xs px-2 py-0.5 font-medium border ${u(s.status)}`,children:s.status}),d&&e.jsx("span",{className:"text-xs text-muted-foreground truncate",children:d.replace("about ","").replace("less than ","")})]})]})]})});function nx(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[n,i]=o.useState("all"),[c,d]=o.useState("all"),[u,h]=o.useState("default"),[,m]=Ce();o.useEffect(()=>{(async()=>{try{const w=await fetch("/api/sections/featured");if(w.ok){const k=await w.json();s(k)}}catch{}finally{a(!1)}})()},[]);const f=o.useMemo(()=>{const b=new Set;return t.forEach(w=>{w.genres?.forEach(k=>b.add(k))}),Array.from(b).sort()},[t]),p=o.useMemo(()=>{let b=[...t];switch(n!=="all"&&(b=b.filter(w=>w.genres?.includes(n))),c!=="all"&&(b=b.filter(w=>w.status.toLowerCase()===c.toLowerCase())),u){case"title-asc":b.sort((w,k)=>w.title.localeCompare(k.title));break;case"title-desc":b.sort((w,k)=>k.title.localeCompare(w.title));break;case"rating":b.sort((w,k)=>(k.rating||0)-(w.rating||0));break}return b},[t,n,c,u]),x=()=>{i("all"),d("all"),h("default")},y=n!=="all"||c!=="all"||u!=="default";return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Featured Series - AmourScans",description:"Browse our handpicked featured manga and manhwa series. Discover the best titles recommended by our editors.",keywords:"featured manga, recommended manga, best manga, featured manhwa"}),e.jsx(at,{}),e.jsx("main",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary via-primary/80 to-accent rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(zt,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Featured Series"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Handpicked titles just for you"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-8 items-start sm:items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ua,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:"Filter & Sort:"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 flex-1",children:[e.jsxs(Ht,{value:n,onValueChange:i,children:[e.jsx(Lt,{className:"w-[180px]",children:e.jsx(Wt,{placeholder:"All Genres"})}),e.jsxs(Mt,{children:[e.jsx(We,{value:"all",children:"All Genres"}),f.map(b=>e.jsx(We,{value:b,children:b},b))]})]}),e.jsxs(Ht,{value:c,onValueChange:d,children:[e.jsx(Lt,{className:"w-[140px]",children:e.jsx(Wt,{placeholder:"All Status"})}),e.jsxs(Mt,{children:[e.jsx(We,{value:"all",children:"All Status"}),e.jsx(We,{value:"ongoing",children:"Ongoing"}),e.jsx(We,{value:"completed",children:"Completed"})]})]}),e.jsxs(Ht,{value:u,onValueChange:h,children:[e.jsx(Lt,{className:"w-[160px]",children:e.jsx(Wt,{placeholder:"Sort By"})}),e.jsxs(Mt,{children:[e.jsx(We,{value:"default",children:"Default Order"}),e.jsx(We,{value:"title-asc",children:"Title (A-Z)"}),e.jsx(We,{value:"title-desc",children:"Title (Z-A)"}),e.jsx(We,{value:"rating",children:"Highest Rated"})]})]}),y&&e.jsxs(S,{variant:"ghost",size:"sm",onClick:x,className:"gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),"Clear Filters"]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[p.length," ",(p.length===1,"series")]})]}),r?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(12)].map((b,w)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"aspect-[2/3] w-full rounded-lg"}),e.jsx(F,{className:"h-4 w-3/4"}),e.jsx(F,{className:"h-3 w-1/2"})]},w))}):p.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(zt,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4 opacity-50"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-2",children:t.length===0?"No featured series available at the moment":"No series match your filters"}),y&&e.jsx(S,{onClick:x,variant:"outline",children:"Clear Filters"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:p.map(b=>e.jsxs(Xe,{className:"group cursor-pointer overflow-hidden border-border/50 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-1",onClick:()=>m(`/manga/${b.id}`),children:[e.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden bg-muted",children:[b.coverImageUrl?e.jsx("img",{src:b.coverImageUrl,alt:b.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-muted to-muted/50",children:e.jsx(_e,{className:"w-12 h-12 text-muted-foreground opacity-30"})}),b.rating&&typeof b.rating=="number"&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 backdrop-blur-sm px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:b.rating.toFixed(1)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-3",children:e.jsx(ie,{variant:b.status==="Ongoing"?"default":"secondary",className:"text-[10px] mb-1",children:b.status})})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:b.title}),b.author&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:b.author}),b.genres&&b.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:b.genres.slice(0,2).map((w,k)=>e.jsx(ie,{variant:"outline",className:"text-[10px] px-1 py-0",children:w},k))})]})]},b.id))})]})}),e.jsx(ss,{})]})}function ix(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();return o.useEffect(()=>{(async()=>{try{const c=await fetch("/api/sections/pinned");if(c.ok){const d=await c.json();s(d)}}catch{}finally{a(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Pinned Series - AmourScans",description:"Browse our pinned manga and manhwa series. Essential reading titles that you shouldn't miss.",keywords:"pinned manga, must read manga, essential manga, pinned manhwa"}),e.jsx(at,{}),e.jsx("main",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#f2a1f2] via-[#f2a1f2] to-[#a195f9] rounded-lg flex items-center justify-center shadow-lg shadow-[#f2a1f2]/30",children:e.jsx($t,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#f2a1f2] to-[#a195f9] bg-clip-text text-transparent",children:"Pinned Series"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Essential reads you shouldn't miss"})]})]}),r?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(12)].map((i,c)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"aspect-[2/3] w-full rounded-lg"}),e.jsx(F,{className:"h-4 w-3/4"}),e.jsx(F,{className:"h-3 w-1/2"})]},c))}):t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx($t,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4 opacity-50"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No pinned series available at the moment"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:t.map(i=>e.jsxs(Xe,{className:"group cursor-pointer overflow-hidden border-border/50 hover:border-[#f2a1f2]/50 transition-all duration-300 hover:shadow-lg hover:shadow-[#f2a1f2]/20 hover:-translate-y-1",onClick:()=>n(`/manga/${i.id}`),children:[e.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden bg-muted",children:[i.coverImageUrl?e.jsx("img",{src:i.coverImageUrl,alt:i.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-muted to-muted/50",children:e.jsx(_e,{className:"w-12 h-12 text-muted-foreground opacity-30"})}),i.rating&&typeof i.rating=="number"&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 backdrop-blur-sm px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:i.rating.toFixed(1)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-3",children:e.jsx(ie,{variant:i.status==="Ongoing"?"default":"secondary",className:"text-[10px] mb-1",children:i.status})})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 group-hover:text-[#f2a1f2] transition-colors",children:i.title}),i.author&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:i.author}),i.genres&&i.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:i.genres.slice(0,2).map((c,d)=>e.jsx(ie,{variant:"outline",className:"text-[10px] px-1 py-0",children:c},d))})]})]},i.id))})]})}),e.jsx(ss,{})]})}function ox(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();o.useEffect(()=>{(async()=>{a(!0);try{const d=await fetch("/api/sections/popular-today");if(d.ok){const h=(await d.json()).map((m,f)=>({...m,rank:f+1}));s(h)}}catch{}finally{a(!1)}})()},[]);const i=c=>c===1?"bg-gradient-to-r from-yellow-500 to-amber-500 text-white":c===2?"bg-gradient-to-r from-gray-300 to-gray-400 text-gray-900":c===3?"bg-gradient-to-r from-orange-600 to-amber-700 text-white":"bg-muted text-muted-foreground";return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Popular Series - AmourScans",description:"Discover the most popular manga and manhwa series. Browse weekly, monthly, and all-time favorites.",keywords:"popular manga, trending manga, top manga, best manga"}),e.jsx(at,{}),e.jsx("main",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary via-primary/80 to-accent rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(_t,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:"Popular Series"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Most loved titles by readers"})]})]}),r?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(12)].map((c,d)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"aspect-[2/3] w-full rounded-lg"}),e.jsx(F,{className:"h-4 w-3/4"}),e.jsx(F,{className:"h-3 w-1/2"})]},d))}):t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(ze,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4 opacity-50"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No popular series available at the moment"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:t.map(c=>e.jsxs(Xe,{className:"group cursor-pointer overflow-hidden border-border/50 hover:border-primary/50 transition-all duration-300 hover:shadow-lg hover:shadow-primary/10 hover:-translate-y-1",onClick:()=>n(`/manga/${c.id}`),children:[e.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden bg-muted",children:[c.coverImageUrl?e.jsx("img",{src:c.coverImageUrl,alt:c.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-muted to-muted/50",children:e.jsx(_e,{className:"w-12 h-12 text-muted-foreground opacity-30"})}),c.rank&&e.jsxs("div",{className:`absolute top-2 left-2 ${i(c.rank)} px-2.5 py-1 rounded-md font-bold text-sm shadow-lg`,children:["#",c.rank]}),c.rating&&typeof c.rating=="number"&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 backdrop-blur-sm px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:c.rating.toFixed(1)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-3",children:e.jsx(ie,{variant:c.status==="Ongoing"?"default":"secondary",className:"text-[10px] mb-1",children:c.status})})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 group-hover:text-primary transition-colors",children:c.title}),c.author&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:c.author}),c.genres&&c.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:c.genres.slice(0,2).map((d,u)=>e.jsx(ie,{variant:"outline",className:"text-[10px] px-1 py-0",children:d},u))})]})]},c.id))})]})}),e.jsx(ss,{})]})}function lx(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();return o.useEffect(()=>{(async()=>{try{const c=await fetch("/api/sections/latest-updates");if(c.ok){const d=await c.json();s(d)}}catch{}finally{a(!1)}})()},[]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Latest Updates - AmourScans",description:"Stay up to date with the latest manga and manhwa chapter releases. Fresh content updated daily.",keywords:"latest manga, new chapters, manga updates, recent manga"}),e.jsx(at,{}),e.jsx("main",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 via-blue-600 to-purple-600 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(qt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-500 to-purple-600 bg-clip-text text-transparent",children:"Latest Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Fresh content updated daily"})]})]}),r?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(12)].map((i,c)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"aspect-[2/3] w-full rounded-lg"}),e.jsx(F,{className:"h-4 w-3/4"}),e.jsx(F,{className:"h-3 w-1/2"})]},c))}):t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(qt,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4 opacity-50"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No recent updates available at the moment"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:t.map(i=>e.jsxs(Xe,{className:"group cursor-pointer overflow-hidden border-border/50 hover:border-blue-500/50 transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/20 hover:-translate-y-1",onClick:()=>n(`/manga/${i.id}`),children:[e.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden bg-muted",children:[i.coverImageUrl?e.jsx("img",{src:i.coverImageUrl,alt:i.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-muted to-muted/50",children:e.jsx(_e,{className:"w-12 h-12 text-muted-foreground opacity-30"})}),i.chapter&&e.jsx("div",{className:"absolute top-2 left-2 bg-blue-500/90 backdrop-blur-sm px-2 py-1 rounded-md",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:i.chapter})}),i.rating&&typeof i.rating=="number"&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 backdrop-blur-sm px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:i.rating.toFixed(1)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-3",children:e.jsx(ie,{variant:i.status==="Ongoing"?"default":"secondary",className:"text-[10px] mb-1",children:i.status})})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 group-hover:text-blue-500 transition-colors",children:i.title}),i.updatedAt&&e.jsx("p",{className:"text-xs text-muted-foreground",children:ps(new Date(i.updatedAt),{addSuffix:!0})}),i.genres&&i.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:i.genres.slice(0,2).map((c,d)=>e.jsx(ie,{variant:"outline",className:"text-[10px] px-1 py-0",children:c},d))})]})]},i.id))})]})}),e.jsx(ss,{})]})}function cx(){const[t,s]=o.useState([]),[r,a]=o.useState(!0),[,n]=Ce();o.useEffect(()=>{(async()=>{try{const d=await fetch("/api/sections/trending");if(d.ok){const h=(await d.json()).map((m,f)=>({...m,rank:f+1}));s(h)}}catch{}finally{a(!1)}})()},[]);const i=c=>{switch(c){case 1:return{cardBorder:"hover:border-[#f2a1f2]/60",cardShadow:"hover:shadow-[#f2a1f2]/30",textHover:"group-hover:text-[#f2a1f2]",badge:"bg-gradient-to-br from-[#f2a1f2] to-[#a195f9] text-white"};case 2:return{cardBorder:"hover:border-[#707ff5]/60",cardShadow:"hover:shadow-[#707ff5]/30",textHover:"group-hover:text-[#707ff5]",badge:"bg-gradient-to-br from-[#707ff5] to-[#4b4bc3] text-white"};case 3:return{cardBorder:"hover:border-[#a195f9]/60",cardShadow:"hover:shadow-[#a195f9]/30",textHover:"group-hover:text-[#a195f9]",badge:"bg-gradient-to-br from-[#a195f9] to-[#707ff5] text-white"};default:return{cardBorder:"hover:border-primary/50",cardShadow:"hover:shadow-primary/20",textHover:"group-hover:text-primary",badge:"bg-muted text-muted-foreground"}}};return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(Ke,{title:"Trending Series - AmourScans",description:"Discover what's hot right now. Browse trending manga and manhwa series that everyone is talking about.",keywords:"trending manga, hot manga, viral manga, trending manhwa"}),e.jsx(at,{}),e.jsx("main",{className:"w-full mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 via-red-500 to-pink-500 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(Gt,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-500 via-red-500 to-pink-500 bg-clip-text text-transparent",children:"Trending Series"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"What's hot right now"})]})]}),r?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:[...Array(12)].map((c,d)=>e.jsxs("div",{className:"space-y-3",children:[e.jsx(F,{className:"aspect-[2/3] w-full rounded-lg"}),e.jsx(F,{className:"h-4 w-3/4"}),e.jsx(F,{className:"h-3 w-1/2"})]},d))}):t.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(_t,{className:"w-16 h-16 mx-auto text-muted-foreground mb-4 opacity-50"}),e.jsx("p",{className:"text-lg text-muted-foreground",children:"No trending series available at the moment"})]}):e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:t.map(c=>{const d=i(c.rank||0);return e.jsxs(Xe,{className:`group cursor-pointer overflow-hidden border-border/50 ${d.cardBorder} transition-all duration-300 hover:shadow-lg ${d.cardShadow} hover:-translate-y-1`,onClick:()=>n(`/manga/${c.id}`),children:[e.jsxs("div",{className:"aspect-[2/3] relative overflow-hidden bg-muted",children:[c.coverImageUrl?e.jsx("img",{src:c.coverImageUrl,alt:c.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-muted to-muted/50",children:e.jsx(_e,{className:"w-12 h-12 text-muted-foreground opacity-30"})}),c.rank&&e.jsxs("div",{className:`absolute top-2 left-2 ${d.badge} px-2.5 py-1 rounded-md font-bold text-sm shadow-lg flex items-center gap-1`,children:[e.jsx(_t,{className:"w-3 h-3"}),"#",c.rank]}),c.rating&&typeof c.rating=="number"&&e.jsxs("div",{className:"absolute top-2 right-2 bg-black/70 backdrop-blur-sm px-2 py-1 rounded-md flex items-center gap-1",children:[e.jsx(ze,{className:"w-3 h-3 text-yellow-400 fill-yellow-400"}),e.jsx("span",{className:"text-xs font-semibold text-white",children:c.rating.toFixed(1)})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent p-3",children:e.jsx(ie,{variant:c.status==="Ongoing"?"default":"secondary",className:"text-[10px] mb-1",children:c.status})})]}),e.jsxs("div",{className:"p-3 space-y-1",children:[e.jsx("h3",{className:`font-semibold text-sm line-clamp-2 ${d.textHover} transition-colors`,children:c.title}),c.author&&e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:c.author}),c.genres&&c.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 pt-1",children:c.genres.slice(0,2).map((u,h)=>e.jsx(ie,{variant:"outline",className:"text-[10px] px-1 py-0",children:u},h))})]})]},c.id)})})]})}),e.jsx(ss,{})]})}function dx(t,s={}){const{enabled:r=!0,reconnect:a=!0,reconnectInterval:n=1e3,reconnectAttempts:i=1/0,heartbeatInterval:c=3e4,onConnect:d,onDisconnect:u,onError:h,onMessage:m}=s,[f,p]=o.useState("disconnected"),x=o.useRef(null),y=o.useRef(null),b=o.useRef(null),w=o.useRef(0),k=o.useRef(new Map),T=o.useRef(!0),N=o.useCallback(()=>{const q=n*Math.pow(2,w.current);return Math.min(q,3e4)},[n]),M=o.useCallback(()=>{x.current&&x.current.readyState===WebSocket.OPEN&&(x.current.send(JSON.stringify({type:"ping",timestamp:Date.now()})),b.current=setTimeout(M,c))},[c]),O=o.useCallback(()=>{if(!(x.current&&x.current.readyState===WebSocket.OPEN)&&T.current){w.current,p("connecting");try{const q=new WebSocket(t);x.current=q,q.onopen=()=>{xt.success("useWebSocket","Connected"),p("connected"),w.current=0,M(),d?.()},q.onclose=()=>{if(p("disconnected"),b.current&&clearTimeout(b.current),u?.(),a&&T.current&&w.current<i){const I=N();w.current<3&&xt.log("useWebSocket",`Reconnecting in ${I}ms (attempt ${w.current+1})`),y.current=setTimeout(()=>{w.current++,O()},I)}else w.current>=i&&xt.warn("useWebSocket","Max reconnection attempts reached. Real-time updates disabled.")},q.onerror=I=>{xt.debug("useWebSocket","Connection error:",I),p("error");const J={message:"WebSocket connection error. Real-time updates may be delayed.",timestamp:Date.now(),reconnectAttempt:w.current};h?.(I)},q.onmessage=I=>{try{const J=JSON.parse(I.data);m?.(J);const D=k.current.get(J.type);D&&D.forEach(de=>{try{de(J.payload)}catch(te){xt.debug("useWebSocket",`Error in subscriber for ${J.type}:`,te)}})}catch(J){xt.debug("useWebSocket","Error parsing message:",J)}}}catch{p("error")}}},[t,a,i,N,d,u,h,m,M]),G=o.useCallback((q,I)=>{x.current&&x.current.readyState===WebSocket.OPEN&&x.current.send(JSON.stringify({type:q,payload:I,timestamp:Date.now()}))},[]),v=o.useCallback((q,I)=>(k.current.has(q)||k.current.set(q,new Set),k.current.get(q).add(I),()=>{const D=k.current.get(q);D&&(D.delete(I),D.size===0&&k.current.delete(q))}),[]),E=o.useCallback(()=>{w.current=0,O()},[O]),_=o.useCallback(()=>{T.current=!1,y.current&&clearTimeout(y.current),b.current&&clearTimeout(b.current),x.current&&(x.current.close(),x.current=null),p("disconnected")},[]);return o.useEffect(()=>{if(!r){x.current&&(T.current=!1,y.current&&clearTimeout(y.current),b.current&&clearTimeout(b.current),x.current&&(x.current.close(),x.current=null),p("disconnected"));return}return T.current=!0,O(),()=>{T.current=!1,y.current&&clearTimeout(y.current),b.current&&clearTimeout(b.current),x.current&&x.current.close()}},[r,t]),{connectionState:f,isConnected:f==="connected",sendMessage:G,subscribe:v,reconnect:E,disconnect:_}}function ux(t=!1){const s=Ut(),r=()=>{if(typeof window>"u")return"";const i=window.location.protocol==="https:"?"wss:":"ws:",c=window.location.host;return`${i}//${c}/ws`},{isConnected:a,subscribe:n}=dx(r(),{enabled:t,reconnect:!0,reconnectInterval:3e3,reconnectAttempts:1/0,heartbeatInterval:3e4,onConnect:()=>{xt.success("RealtimeSync","Connected - real-time updates enabled")},onDisconnect:()=>{},onError:()=>{}});return o.useEffect(()=>{if(!a)return;const i=n("ad",N=>{s.invalidateQueries({queryKey:["/api/admin/ads"]}),s.invalidateQueries({queryKey:["/api/ads"]}),N.adId&&(s.invalidateQueries({queryKey:["/api/admin/ads",N.adId]}),N.action==="deleted"&&s.removeQueries({queryKey:["/api/admin/ads",N.adId]})),N.data?.placement&&s.invalidateQueries({queryKey:["/api/ads/placement",N.data.placement]})}),c=n("series",N=>{s.invalidateQueries({queryKey:["/api/series"]}),s.invalidateQueries({queryKey:["/api/admin/series"]}),s.invalidateQueries({queryKey:["/api/sections"]}),s.invalidateQueries({queryKey:["/api/trending"]}),N.seriesId&&(s.invalidateQueries({queryKey:["/api/series",N.seriesId]}),N.action==="deleted"&&s.removeQueries({queryKey:["/api/series",N.seriesId]}))}),d=n("chapter",N=>{N.seriesId&&(s.invalidateQueries({queryKey:["/api/series",N.seriesId,"chapters"]}),s.invalidateQueries({queryKey:["/api/admin/chapters",N.seriesId]})),N.chapterId&&(s.invalidateQueries({queryKey:["/api/chapters",N.chapterId]}),N.action==="deleted"&&s.removeQueries({queryKey:["/api/chapters",N.chapterId]}))}),u=n("settings",N=>{s.invalidateQueries({queryKey:["/api/settings"]}),s.invalidateQueries({queryKey:["/api/admin/settings"]}),N.category&&s.invalidateQueries({queryKey:["/api/settings",N.category]})}),h=n("adIntensity",N=>{s.invalidateQueries({queryKey:["/api/settings","ads"]}),s.invalidateQueries({queryKey:["/api/ads"]})}),m=n("user",N=>{s.invalidateQueries({queryKey:["/api/admin/users"]}),s.invalidateQueries({queryKey:["/api/users"]}),N.userId&&(s.invalidateQueries({queryKey:["/api/users",N.userId]}),s.invalidateQueries({queryKey:["/api/user"]}),s.invalidateQueries({queryKey:["/api/auth/user"]}))}),f=n("subscription",N=>{s.invalidateQueries({queryKey:["/api/subscriptions"]}),s.invalidateQueries({queryKey:["/api/admin/subscriptions"]}),s.invalidateQueries({queryKey:["/api/shop"]}),N.packageId&&s.invalidateQueries({queryKey:["/api/subscriptions",N.packageId]})}),p=n("battlepass",N=>{s.invalidateQueries({queryKey:["/api/battle-pass"]}),s.invalidateQueries({queryKey:["/api/admin/battle-pass"]}),N.seasonId&&s.invalidateQueries({queryKey:["/api/battle-pass/seasons",N.seasonId]})}),x=n("flashsale",N=>{s.invalidateQueries({queryKey:["/api/flash-sales"]}),s.invalidateQueries({queryKey:["/api/admin/flash-sales"]}),s.invalidateQueries({queryKey:["/api/shop"]})}),y=n("coupon",N=>{s.invalidateQueries({queryKey:["/api/admin/coupons"]}),s.invalidateQueries({queryKey:["/api/coupons"]})}),b=n("package",N=>{s.invalidateQueries({queryKey:["/api/admin/packages"]}),s.invalidateQueries({queryKey:["/api/admin/bundles"]}),s.invalidateQueries({queryKey:["/api/packages"]}),s.invalidateQueries({queryKey:["/api/shop"]})}),w=n("role",N=>{s.invalidateQueries({queryKey:["/api/admin/roles"]}),s.invalidateQueries({queryKey:["/api/roles"]}),N.action==="permissions_updated"&&(s.invalidateQueries({queryKey:["/api/user"]}),s.invalidateQueries({queryKey:["/api/auth/user"]}))}),k=n("currency",N=>{s.invalidateQueries({queryKey:["/api/currency"]}),s.invalidateQueries({queryKey:["/api/admin/currency"]}),s.invalidateQueries({queryKey:["/api/wallet"]})}),T=n("system",N=>{N.type==="maintenance"&&s.invalidateQueries(),window.dispatchEvent(new CustomEvent("system-notification",{detail:N}))});return xt.success("RealtimeSync","All query invalidation listeners active"),()=>{i(),c(),d(),u(),h(),m(),f(),p(),x(),y(),b(),w(),k(),T()}},[a,n,s]),{isConnected:a,isSyncEnabled:a}}const mx=o.lazy(()=>ce(()=>import("./Settings-CnNr72qf.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),hx=o.lazy(()=>ce(()=>import("./Library-7Xq3yWul.js"),__vite__mapDeps([8,1,2,7]))),fx=o.lazy(()=>ce(()=>import("./History-DR37sg_K.js"),__vite__mapDeps([9,1,2,10,7]))),px=o.lazy(()=>ce(()=>import("./Privacy-CAnBrdQn.js"),__vite__mapDeps([11,1,2,12,13,7]))),xx=o.lazy(()=>ce(()=>import("./DMCA-DnWg4QDu.js"),__vite__mapDeps([14,1,2,15,7]))),gx=o.lazy(()=>ce(()=>import("./Terms-UDxMsN5I.js"),__vite__mapDeps([16,1,2,15,7]))),bx=o.lazy(()=>ce(()=>import("./Shop-Du37d5w3.js"),__vite__mapDeps([17,1,2,18,3,19,20,5,21,22,7]))),yx=o.lazy(()=>ce(()=>import("./ReadingLists-DMKjRVU_.js"),__vite__mapDeps([23,1,2,3,24,25,26,13,7]))),vx=o.lazy(()=>ce(()=>import("./Admin-DdLH9ETd.js"),__vite__mapDeps([27,1,2,28,29,6,30,12,31,15,7]))),wx=o.lazy(()=>ce(()=>import("./UserManagement-CqzOgZ0O.js"),__vite__mapDeps([32,1,2,3,10,4,26,33,31,20,7]))),Dn=o.lazy(()=>ce(()=>import("./SeriesManagement-B4VMiiak.js"),__vite__mapDeps([34,1,2,3,10,31,13,18,35,36,37,26,38,33,24,7]))),jx=o.lazy(()=>ce(()=>import("./Analytics-Dy6EMFon.js"),__vite__mapDeps([39,1,2,40,28,41,29,42,7]))),Nx=o.lazy(()=>ce(()=>import("./SystemSettings-B-KA_k9J.js"),__vite__mapDeps([43,1,2,3,10,44,29,45,46,19,22,37,13,24,25,12,26,33,7]))),Sx=o.lazy(()=>ce(()=>import("./CurrencyManagement-CEN0zCqx.js"),__vite__mapDeps([47,1,2,48,3,24,49,30,26,7]))),_x=o.lazy(()=>ce(()=>import("./ChapterAccessManagement-Dw4kHytp.js"),__vite__mapDeps([50,1,2,3,36,35,30,7]))),kx=o.lazy(()=>ce(()=>import("./UserCurrencyManagement-Ck6W01jT.js"),__vite__mapDeps([51,1,2,3,24,52,7]))),Cx=o.lazy(()=>ce(()=>import("./AdminAds-D4UdA9X9.js"),__vite__mapDeps([53,1,2,3,10,38,13,6,40,42,29,24,44,45,28,35,41,25,30,26,15,7]))),Ix=o.lazy(()=>ce(()=>import("./Subscriptions-C3lJxQJf.js"),__vite__mapDeps([54,1,2,20,55,21,7]))),Ax=o.lazy(()=>ce(()=>import("./SubscriptionManage-9GjkgPOX.js"),__vite__mapDeps([56,1,2,10,20,7]))),Px=o.lazy(()=>ce(()=>import("./FlashSales-Chvxtj28.js"),__vite__mapDeps([57,1,2,18,21,58,22,7]))),Tx=o.lazy(()=>ce(()=>import("./BattlePass-DcSsdN1L.js"),__vite__mapDeps([59,1,2,18,21,5,20,55,7]))),Ex=o.lazy(()=>ce(()=>import("./AdminMonetization-Amkxs3e4.js"),__vite__mapDeps([60,1,2,3,48,40,46,19,45,22,5,30,20,21,49,55,24,26,41,15,31,28,52,7]))),Rx=o.lazy(()=>ce(()=>import("./DailyRewards-4_64votu.js"),__vite__mapDeps([61,1,2,55,7]))),Dx=o.lazy(()=>ce(()=>import("./Achievements-DxKpdDsA.js"),__vite__mapDeps([62,1,2,18,5,7]))),Lx=o.lazy(()=>ce(()=>import("./Referrals-Brs9TJ0A.js"),__vite__mapDeps([63,1,2,55,7]))),Mx=o.lazy(()=>ce(()=>import("./Loyalty-C0jqMmOb.js"),__vite__mapDeps([64,1,2,18,5,20,55,7]))),Fx=o.lazy(()=>ce(()=>import("./Wallet-Copdpm3X.js"),__vite__mapDeps([65,1,2,22,42,30,55,7]))),Ox=o.lazy(()=>ce(()=>import("./AdminFlashSales-BnIDjims.js"),__vite__mapDeps([66,1,2,3,24,21,58,26,7]))),qx=o.lazy(()=>ce(()=>import("./AdminSubscriptions-D_WuGwnp.js"),__vite__mapDeps([67,1,2,3,20,24,26,7]))),$x=o.lazy(()=>ce(()=>import("./RoleAuthority-D91Q1bg3.js"),__vite__mapDeps([68,1,2,3,20,24,26,7]))),zx=o.lazy(()=>ce(()=>import("./SecurityDashboard-rsXoGGpo.js"),__vite__mapDeps([69,1,2,48,28,7]))),Ux=o.lazy(()=>ce(()=>import("./AdminSEO-BPlxnKQ_.js"),__vite__mapDeps([70,1,2,29,25,31,37,13,33,7]))),le=()=>e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-background via-background to-background/95 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]"}),e.jsx("p",{className:"mt-4 text-sm text-muted-foreground",children:"Loading admin panel..."})]})});function Bx(){return e.jsx(fe,{children:e.jsxs(Oc,{children:[e.jsx(Y,{path:"/",component:dh}),e.jsx(Y,{path:"/browse",component:rx}),e.jsx(Y,{path:"/featured",component:nx}),e.jsx(Y,{path:"/pinned",component:ix}),e.jsx(Y,{path:"/popular",component:ox}),e.jsx(Y,{path:"/latest-updates",component:lx}),e.jsx(Y,{path:"/trending",component:cx}),e.jsx(Y,{path:"/manga/:seriesId/chapter/:chapterNumber",component:Vp}),e.jsx(Y,{path:"/manga/:id",component:jp}),e.jsx(Y,{path:"/login",component:Gf}),e.jsx(Y,{path:"/signup",component:Xf}),e.jsx(Y,{path:"/verify-email",component:Jf}),e.jsx(Y,{path:"/forgot-password",component:rp}),e.jsx(Y,{path:"/reset-password",component:np}),e.jsx(Y,{path:"/library",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(hx,{})})}),e.jsx(Y,{path:"/history",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(fx,{})})}),e.jsx(Y,{path:"/reading-lists",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(yx,{})})}),e.jsx(Y,{path:"/settings",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(mx,{})})}),e.jsx(Y,{path:"/shop",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(bx,{})})}),e.jsx(Y,{path:"/privacy",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(px,{})})}),e.jsx(Y,{path:"/dmca",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(xx,{})})}),e.jsx(Y,{path:"/terms",children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(gx,{})})}),e.jsx(Y,{path:"/admin",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(vx,{})})})}),e.jsx(Y,{path:"/admin/users",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(wx,{})})})}),e.jsx(Y,{path:"/admin/series",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Dn,{})})})}),e.jsx(Y,{path:"/admin/content",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Dn,{})})})}),e.jsx(Y,{path:"/admin/analytics",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(jx,{})})})}),e.jsx(Y,{path:"/admin/system-settings",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Nx,{})})})}),e.jsx(Y,{path:"/admin/currency",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Sx,{})})})}),e.jsx(Y,{path:"/admin/chapter-access",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(_x,{})})})}),e.jsx(Y,{path:"/admin/user-currency",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(kx,{})})})}),e.jsx(Y,{path:"/admin/ads",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Cx,{})})})}),e.jsx(Y,{path:"/admin/monetization",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Ex,{})})})}),e.jsx(Y,{path:"/admin/flash-sales",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Ox,{})})})}),e.jsx(Y,{path:"/admin/subscriptions",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(qx,{})})})}),e.jsx(Y,{path:"/admin/role-authority",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx($x,{})})})}),e.jsx(Y,{path:"/admin/security",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(zx,{})})})}),e.jsx(Y,{path:"/admin/seo",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Ux,{})})})}),e.jsx(Y,{path:"/subscriptions",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Ix,{})})})}),e.jsx(Y,{path:"/subscriptions/manage",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Ax,{})})})}),e.jsx(Y,{path:"/flash-sales",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Px,{})})})}),e.jsx(Y,{path:"/battle-pass",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Tx,{})})})}),e.jsx(Y,{path:"/daily-rewards",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Rx,{})})})}),e.jsx(Y,{path:"/achievements",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Dx,{})})})}),e.jsx(Y,{path:"/referrals",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Lx,{})})})}),e.jsx(Y,{path:"/loyalty",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Mx,{})})})}),e.jsx(Y,{path:"/wallet",children:e.jsx(fe,{children:e.jsx(o.Suspense,{fallback:e.jsx(le,{}),children:e.jsx(Fx,{})})})}),e.jsx(Y,{component:zu})]})})}function Qx(){const{isAuthenticated:t}=ar();return ux(t),null}function Ln(){return e.jsx(pd,{client:U,children:e.jsx(Eu,{attribute:"class",defaultTheme:"dark",enableSystem:!0,disableTransitionOnChange:!1,children:e.jsxs(Cu,{children:[e.jsx(Qx,{}),e.jsx(cu,{}),e.jsx(Bx,{}),e.jsx(ip,{})]})})})}const Kx=async()=>{if("serviceWorker"in navigator&&"PushManager"in window)try{const t=await navigator.serviceWorker.register("/sw.js",{scope:"/",updateViaCache:"none"});t.addEventListener("updatefound",()=>{const s=t.installing;s&&s.addEventListener("statechange",()=>{s.state==="installed"&&navigator.serviceWorker.controller&&window.confirm("New version available! Refresh to update?")&&(s.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}),navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()}),setInterval(()=>{t.update()},3600*1e3),window.swRegistration=t}catch{}},Vx=()=>{let t=null;window.addEventListener("beforeinstallprompt",s=>{s.preventDefault(),t=s,window.deferredPrompt=t;const r=document.createElement("div");r.id="pwa-install-banner",r.style.cssText=`
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
      z-index: 1000;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      animation: slideUp 0.3s ease-out;
    `,r.innerHTML=`
       Install AmourScans App
      <span style="margin-left: 8px; opacity: 0.8;"></span>
    `,r.addEventListener("click",async a=>{if(a.target.textContent===""){r.remove();return}if(t){t.prompt();const{outcome:i}=await t.userChoice;t=null,r.remove()}}),document.body.appendChild(r),setTimeout(()=>{r.parentNode&&r.remove()},1e4)}),window.addEventListener("appinstalled",()=>{t=null;const s=document.getElementById("pwa-install-banner");s&&s.remove()})},Hx=()=>{const t=()=>{const r=navigator.onLine;window.dispatchEvent(new CustomEvent("networkstatus",{detail:{isOnline:r}})),document.documentElement.classList.toggle("offline",!r),r||s()},s=()=>{if(document.getElementById("offline-toast"))return;const a=document.createElement("div");a.id="offline-toast",a.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      background: #dc2626;
      color: white;
      padding: 12px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(220, 38, 38, 0.3);
      z-index: 1001;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      animation: slideInRight 0.3s ease-out;
    `,a.innerHTML=" You're offline - using cached content",document.body.appendChild(a);const n=()=>{navigator.onLine&&a.parentNode&&(a.remove(),window.removeEventListener("online",n))};window.addEventListener("online",n)};t(),window.addEventListener("online",t),window.addEventListener("offline",t)},Wx=async()=>{await Kx(),Vx(),Hx();const t=document.createElement("style");t.textContent=`
    @keyframes slideUp {
      from { transform: translateX(-50%) translateY(100%); opacity: 0; }
      to { transform: translateX(-50%) translateY(0); opacity: 1; }
    }
    
    @keyframes slideInRight {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    
    .offline body::before {
      content: ' Offline Mode';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: #dc2626;
      color: white;
      text-align: center;
      padding: 4px;
      font-size: 12px;
      z-index: 9999;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }
    
    .offline body {
      padding-top: 24px;
    }
  `,document.head.appendChild(t)},Gx=async()=>{try{const t=document.getElementById("root");if(t)Ga.createRoot(t).render(e.jsx(Ln,{}));else throw new Error("Root element not found");Wx().catch(s=>{})}catch{const s=document.getElementById("root");s&&Ga.createRoot(s).render(e.jsx(Ln,{}))}};Gx();export{Nr as $,ot as A,S as B,Xe as C,Es as D,jr as E,ie as F,fn as G,dg as H,Qe as I,lg as J,Is as K,vs as L,zr as M,at as N,kr as O,Cr as P,ua as Q,Rs as R,Ke as S,He as T,cs as U,Vd as V,Wd as W,qo as X,qt as Y,cg as Z,Oe as _,cm as a,ru as a0,Sr as a1,ss as a2,ca as a3,Zd as a4,Wr as a5,Mo as a6,ag as a7,zt as a8,Qt as a9,Kd as aA,oh as aB,Jr as aC,Ou as aD,gn as aE,Ri as aF,gs as aG,co as aH,pa as aI,xa as aJ,ga as aK,mo as aL,Ws as aM,ng as aN,ig as aO,tu as aP,wp as aa,vl as ab,Ms as ac,Fs as ad,F as ae,la as af,qu as ag,ze as ah,Ds as ai,Fe as aj,nu as ak,Li as al,st as am,_t as an,zd as ao,Ge as ap,Mi as aq,Md as ar,Jd as as,da as at,Us as au,Qs as av,Yd as aw,Ut as ax,Kl as ay,C as az,be as b,z as c,Ie as d,og as e,Oo as f,_e as g,Yi as h,Ji as i,Zi as j,sr as k,ms as l,hs as m,fs as n,au as o,ds as p,U as q,Et as r,Ht as s,Ed as t,ar as u,Lt as v,Wt as w,Mt as x,We as y,rg as z};
