import{j as e}from"./ui-vendor-_s0klCrL.js";import{u as A,b as E}from"./react-vendor-C7VPsBAG.js";import{u as F,_ as T,b as p,N as h,ae as o,S as q,B as l,A as B,C as b,af as m,az as d,ah as g,an as I,a2 as O,a1 as U,a8 as M}from"./index-BLJ_ytcB.js";import{C as y}from"./crown-Cq9T_P0l.js";import{G as R}from"./gift-lTXnbkoc.js";import{Z as V}from"./zap-JsjwqhbD.js";import"./utils-vendor-DYGWDIxX.js";function Q(){const[,t]=A(),{isAuthenticated:x,isLoading:j}=F(),{toast:u}=T(),[D,z]=E.useState(null),{data:f,isLoading:N}=p({queryKey:["/api/subscriptions/packages"],queryFn:async()=>{const s=await fetch("/api/subscriptions/packages",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch packages");return s.json()}}),{data:i}=p({queryKey:["/api/subscriptions/current"],queryFn:async()=>{const s=await fetch("/api/subscriptions/current",{credentials:"include"});if(s.status===404)return null;if(!s.ok)throw new Error("Failed to fetch subscription");return s.json()},enabled:x}),w=async s=>{if(!x){t("/login?returnTo=/subscriptions");return}try{const a=await fetch("/api/subscriptions/subscribe",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({packageId:s})}),r=await a.json();if(!a.ok)throw new Error(r.message||"Failed to create subscription");r.clientSecret?t(`/subscriptions/checkout?session=${r.clientSecret}`):u({title:"Success",description:"Subscription created successfully!"})}catch(a){u({title:"Error",description:a.message||"Failed to create subscription",variant:"error"})}},v=s=>{try{return JSON.parse(s)}catch{return[]}},S=s=>s.toLowerCase().includes("basic")?e.jsx(U,{className:"w-6 h-6"}):s.toLowerCase().includes("premium")?e.jsx(g,{className:"w-6 h-6"}):s.toLowerCase().includes("vip")||s.toLowerCase().includes("elite")?e.jsx(y,{className:"w-6 h-6"}):e.jsx(M,{className:"w-6 h-6"}),C=s=>s.toLowerCase().includes("basic")?"from-blue-500 to-cyan-500":s.toLowerCase().includes("premium")?"from-purple-500 to-pink-500":s.toLowerCase().includes("vip")||s.toLowerCase().includes("elite")?"from-amber-500 to-orange-500":"from-gray-500 to-gray-600";return j||N?e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(h,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-20",children:[e.jsx(o,{className:"h-12 w-96 mx-auto mb-4 bg-gray-800"}),e.jsx(o,{className:"h-6 w-64 mx-auto mb-12 bg-gray-800"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[1,2,3].map(s=>e.jsx(o,{className:"h-[600px] bg-gray-800"},s))})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(q,{title:"VIP Subscriptions - Unlock Premium Manga Access Today",description:"Unlock premium manga access with VIP subscriptions on AmourScans. Enjoy ad-free reading, exclusive content, early chapter access, and monthly bonus coins for members.",keywords:"VIP subscription, premium manga, ad-free manga, exclusive content, early access, manga membership"}),e.jsx(h,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-16",children:[e.jsxs(l,{variant:"ghost",onClick:()=>t("/"),className:"min-h-11 w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"text-center mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-primary/10 border border-primary/20 rounded-full mb-6",children:[e.jsx(y,{className:"w-5 h-5 text-primary"}),e.jsx("span",{className:"text-sm font-semibold text-primary",children:"VIP Membership"})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-white mb-4",children:"Choose Your Plan"}),e.jsx("p",{className:"text-gray-400 text-base sm:text-lg max-w-2xl mx-auto",children:"Unlock premium features, get exclusive content, and enjoy an ad-free experience"})]}),i&&e.jsx("div",{className:"mb-8",children:e.jsx(b,{className:"bg-gradient-to-r from-primary/20 to-accent/20 border-primary/40 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary/20 rounded-lg",children:e.jsx(m,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-semibold",children:"Active Subscription"}),e.jsxs("p",{className:"text-sm text-gray-400",children:["Status: ",i.status," • Renews: ",new Date(i.currentPeriodEnd).toLocaleDateString()]})]})]}),e.jsx(l,{variant:"outline",onClick:()=>t("/subscriptions/manage"),className:"min-h-11 border-primary/40 hover:bg-primary/10",children:"Manage"})]})})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:f?.map((s,a)=>{const r=v(s.features),n=a===1,c=i?.packageId===s.id,L=C(s.name);return e.jsxs(b,{className:d("relative overflow-hidden transition-all duration-300 hover:scale-105",n?"bg-gradient-to-br from-gray-800 to-gray-900 border-2 border-primary shadow-2xl shadow-primary/20":"bg-gray-900/50 border border-gray-800 hover:border-gray-700",c&&"ring-2 ring-primary"),children:[n&&e.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-primary to-accent text-white text-xs font-bold px-3 py-1 rounded-bl-lg",children:"MOST POPULAR"}),e.jsxs("div",{className:"p-8",children:[e.jsx("div",{className:d("inline-flex p-3 rounded-xl bg-gradient-to-br mb-4",L),children:S(s.name)}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:s.name}),e.jsx("p",{className:"text-gray-400 text-sm mb-6",children:s.description}),e.jsxs("div",{className:"flex items-baseline gap-2 mb-6",children:[e.jsxs("span",{className:"text-5xl font-bold text-white",children:["$",s.priceUSD]}),e.jsxs("span",{className:"text-gray-400",children:["/",s.billingCycle]})]}),s.coinBonus>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-primary/10 border border-primary/20 rounded-lg p-3 mb-6",children:[e.jsx(R,{className:"w-5 h-5 text-primary"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-white text-sm font-semibold",children:[s.coinBonus," Bonus Coins"]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Every month"})]})]}),e.jsx(l,{onClick:()=>w(s.id),disabled:c,className:d("w-full mb-6",n?"bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90":"bg-gray-800 hover:bg-gray-700"),size:"lg",children:c?"Current Plan":"Subscribe Now"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Features:"}),r.map((P,k)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:P})]},k)),s.isAdFree==="true"&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(m,{className:"w-5 h-5 text-primary shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Ad-free experience"})]}),s.earlyAccess==="true"&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-amber-500 shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Early chapter access"})]}),s.exclusiveContent==="true"&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-purple-500 shrink-0 mt-0.5"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Exclusive content"})]}),s.discountPercentage>0&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(I,{className:"w-5 h-5 text-green-500 shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-sm text-gray-300",children:[s.discountPercentage,"% off coin purchases"]})]})]})]})]},s.id)})}),e.jsx("div",{className:"text-center text-gray-400 text-sm",children:e.jsx("p",{children:"All subscriptions can be cancelled anytime • Secure payment via Stripe"})})]}),e.jsx(O,{})]})}export{Q as default};
