import{j as e}from"./ui-vendor-_s0klCrL.js";import{u as P,b as p}from"./react-vendor-C7VPsBAG.js";import{u as U,H as F,J as O,g as f,N as C,K as j,B as t,S as z,A as E,O as Y,P as $,Q as J,R as V,T as b,V as G,W as H,X as K,C as N,k as v,F as M,Y as S}from"./index-BLJ_ytcB.js";import{i as B}from"./utils-vendor-DYGWDIxX.js";function q(){const{isAuthenticated:g,isLoading:L}=U(),{library:i,isLoading:u}=F(g),{progressList:y}=O(g),[,o]=P(),[l,w]=p.useState("grid"),[n,h]=p.useState("recent");if(L)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(f,{className:"w-12 h-12 text-primary mx-auto mb-4 animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!g)return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx(C,{}),e.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-20 text-center",children:[e.jsx(j,{className:"w-20 h-20 text-primary/50 mx-auto mb-6"}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-4",children:"Sign in to view your library"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Create an account or sign in to save your favorite manga and track your reading progress."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(t,{onClick:()=>o("/login"),className:"min-h-11 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",children:"Sign In"}),e.jsx(t,{onClick:()=>o("/signup"),variant:"outline",className:"min-h-11",children:"Create Account"})]})]})]});const D=p.useMemo(()=>{const r=new Map(y.map(s=>[s.seriesId,{chapterNumber:s.chapterNumber,lastReadAt:s.lastReadAt}]));return[...i].sort((s,a)=>{if(n==="recent")return new Date(a.addedAt).getTime()-new Date(s.addedAt).getTime();if(n==="title")return s.series.title.localeCompare(a.series.title);if(n==="progress"){const c=r.get(s.seriesId),d=r.get(a.seriesId),R=c?.chapterNumber?parseFloat(c.chapterNumber):0,T=d?.chapterNumber?parseFloat(d.chapterNumber):0,k=s.series.totalChapters||0,A=a.series.totalChapters||0,m=k>0?R/k*100:0,x=A>0?T/A*100:0;if(m===0&&x===0)return 0;if(m===0)return 1;if(x===0)return-1;if(m!==x)return x-m;const I=c?.lastReadAt?new Date(c.lastReadAt).getTime():0;return(d?.lastReadAt?new Date(d.lastReadAt).getTime():0)-I}return 0})},[i,y,n]);return e.jsxs("div",{className:"min-h-screen bg-background w-full overflow-x-hidden",children:[e.jsx(z,{title:"My Manga Library - Manage Your Collection & Progress",description:"Manage your personal manga collection and reading lists on AmourScans. Track your progress, organize your favorites, and continue where you left off.",keywords:"manga library, my manga, reading list, manga collection, track reading, manga progress"}),e.jsx(C,{}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(t,{variant:"ghost",onClick:()=>o("/"),className:"min-h-11 w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(j,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold bg-gradient-to-r from-primary via-accent to-purple-400 bg-clip-text text-transparent",children:"My Library"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1",children:[i.length," ",(i.length===1,"series")," saved"]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Y,{children:[e.jsx($,{asChild:!0,children:e.jsxs(t,{variant:"outline",className:"min-h-11 hidden sm:flex",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Sort: ",n==="recent"?"Recent":n==="title"?"Title":"Progress"]})}),e.jsxs(V,{align:"end",children:[e.jsx(b,{onClick:()=>h("recent"),children:"Most Recent"}),e.jsx(b,{onClick:()=>h("title"),children:"Title (A-Z)"}),e.jsx(b,{onClick:()=>h("progress"),children:"Reading Progress"})]})]}),e.jsxs("div",{className:"hidden sm:flex border border-border rounded-lg p-1",children:[e.jsx(t,{variant:l==="grid"?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>w("grid"),children:e.jsx(G,{className:"w-4 h-4"})}),e.jsx(t,{variant:l==="list"?"default":"ghost",size:"sm",className:"h-8 w-8 p-0",onClick:()=>w("list"),children:e.jsx(H,{className:"w-4 h-4"})})]})]})]}),u&&e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 sm:gap-6",children:[...Array(10)].map((r,s)=>e.jsx(K,{},s))}),!u&&i.length===0&&e.jsx(N,{className:"bg-card/80 backdrop-blur-md border-border/50",children:e.jsxs(v,{className:"py-16 text-center",children:[e.jsx(j,{className:"w-16 h-16 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Your library is empty"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Start adding manga to your library to keep track of your favorites!"}),e.jsx(t,{onClick:()=>o("/browse"),className:"min-h-11 bg-gradient-to-r from-primary to-accent hover:from-primary/90 hover:to-accent/90",children:"Browse Manga"})]})}),!u&&i.length>0&&e.jsx("div",{className:l==="grid"?"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 sm:gap-6":"space-y-4",children:D.map(r=>l==="grid"?e.jsxs(N,{className:"group bg-card/80 backdrop-blur-md border-border/50 hover:border-primary/60 transition-all duration-300 overflow-hidden cursor-pointer hover:shadow-lg hover:shadow-primary/20",onClick:()=>o(`/manga/${r.series.id}`),children:[e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[r.series.coverImageUrl?e.jsx("img",{src:r.series.coverImageUrl,alt:r.series.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/80 to-muted/60 flex items-center justify-center",children:e.jsx(f,{className:"w-12 h-12 text-muted-foreground/50"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.series.status&&e.jsx(M,{className:"absolute top-2 right-2 bg-primary/90 backdrop-blur-sm",children:r.series.status})]}),e.jsxs(v,{className:"p-3",children:[e.jsx("h3",{className:"font-semibold text-sm line-clamp-2 text-foreground group-hover:text-primary transition-colors mb-2",children:r.series.title}),e.jsxs("div",{className:"flex items-center text-xs text-muted-foreground",children:[e.jsx(S,{className:"w-3 h-3 mr-1"}),"Added ",B(new Date(r.addedAt),{addSuffix:!0})]})]})]},r.id):e.jsx(N,{className:"group bg-card/80 backdrop-blur-md border-border/50 hover:border-primary/60 transition-all duration-300 cursor-pointer hover:shadow-lg hover:shadow-primary/20",onClick:()=>o(`/manga/${r.series.id}`),children:e.jsx(v,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"relative w-24 h-32 flex-shrink-0 overflow-hidden rounded-lg",children:r.series.coverImageUrl?e.jsx("img",{src:r.series.coverImageUrl,alt:r.series.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-muted/80 to-muted/60 flex items-center justify-center",children:e.jsx(f,{className:"w-8 h-8 text-muted-foreground/50"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-bold text-lg text-foreground group-hover:text-primary transition-colors mb-2",children:r.series.title}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:(()=>{const s=typeof r.series.genres=="string"?JSON.parse(r.series.genres):r.series.genres;return Array.isArray(s)&&s.slice(0,3).map(a=>e.jsx(M,{variant:"outline",className:"text-xs",children:a},a))})()}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Added ",B(new Date(r.addedAt),{addSuffix:!0})]})]})]})})},r.id))})]})]})}export{q as default};
