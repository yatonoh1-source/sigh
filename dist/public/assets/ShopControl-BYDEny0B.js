import{j as e}from"./ui-vendor-_s0klCrL.js";import{b as d}from"./react-vendor-C7VPsBAG.js";import{_ as L,ax as q,b as v,at as m,D as R,C as I,h as K,i as P,j as Q,k as T,L as N,az as t,r as p,av as z,a3 as O,s as W,v as $,w as B,x as J,y as U,B as S,f as k}from"./index-BLJ_ytcB.js";import{W as V}from"./wrench-D2GTUzw_.js";import{S as w}from"./shield-off-j9I-w8cD.js";import{S as A}from"./shopping-cart-CoPQWzz9.js";const c=[{value:"enabled",label:"Enabled",description:"Shop is fully operational",icon:m,color:"text-green-600 dark:text-green-400"},{value:"maintenance",label:"Maintenance",description:"Shop is under maintenance - show maintenance message",icon:V,color:"text-orange-600 dark:text-orange-400"},{value:"coming_soon",label:"Coming Soon",description:"Shop feature not yet available - show coming soon message",icon:R,color:"text-blue-600 dark:text-blue-400"},{value:"disabled",label:"Disabled",description:"Shop is completely disabled and hidden",icon:w,color:"text-red-600 dark:text-red-400"}];function se(){const{toast:f}=L(),h=q(),{data:r,isLoading:C}=v({queryKey:["admin-settings","system","shop_enabled"],queryFn:async()=>{const a=await fetch("/api/admin/settings/system/shop_enabled");if(!a.ok)return!0;const i=await a.json();return i.value==="true"||i.value===!0}}),{data:o,isLoading:E}=v({queryKey:["admin-settings","system","shop_mode"],queryFn:async()=>{const a=await fetch("/api/admin/settings/system/shop_mode");return a.ok&&(await a.json()).value||"enabled"}}),[s,x]=d.useState(r??!0),[l,u]=d.useState(o||"enabled"),[g,y]=d.useState(!1);d.useEffect(()=>{r!==void 0&&x(r)},[r]),d.useEffect(()=>{o&&u(o)},[o]);const F=async()=>{y(!0);try{if(!(await k("/api/admin/settings/system/shop_enabled",{method:"PUT",body:JSON.stringify({category:"system",key:"shop_enabled",value:s.toString(),type:"boolean",description:"Global toggle to enable/disable the shop feature",isPublic:!0})})).ok)throw new Error("Failed to update shop enabled status");if(!(await k("/api/admin/settings/system/shop_mode",{method:"PUT",body:JSON.stringify({category:"system",key:"shop_mode",value:l,type:"string",description:`Shop display mode: ${c.find(b=>b.value===l)?.label}`,isPublic:!0})})).ok)throw new Error("Failed to update shop mode");await Promise.all([h.invalidateQueries({queryKey:["admin-settings"]}),h.invalidateQueries({queryKey:["/api/settings/public/shop-status"]}),h.refetchQueries({queryKey:["/api/settings/public/shop-status"]})]);const _=c.find(b=>b.value===l);f({title:"âœ… Settings Saved",description:`Shop mode: ${_?.label} - ${s?"Enabled":"Disabled"}`})}catch(a){f({title:"Error",description:a instanceof Error?a.message:"Failed to update shop settings",variant:"error"})}finally{y(!1)}},j=s!==r||l!==o,n=c.find(a=>a.value===l),M=n?.icon||m,D=C||E;return e.jsxs(I,{className:"border-2 border-blue-500/20 shadow-lg",children:[e.jsx(K,{className:"space-y-1 pb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gradient-to-br from-blue-500/20 to-cyan-500/20",children:e.jsx(A,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx(P,{className:"text-2xl",children:"Shop Control"}),e.jsx(Q,{className:"text-base mt-1",children:"Configure shop feature availability and display mode"})]})]})}),e.jsx(T,{className:"space-y-8",children:D?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(N,{className:"h-8 w-8 animate-spin text-blue-500"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t("relative overflow-hidden rounded-xl border-2 p-6 transition-all duration-300",s?"border-green-500/50 bg-gradient-to-br from-green-50 to-emerald-50 dark:from-green-950/30 dark:to-emerald-950/30":"border-red-500/30 bg-gradient-to-br from-red-50 to-orange-50 dark:from-red-950/20 dark:to-orange-950/20"),children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:t("p-3 rounded-full transition-colors",s?"bg-green-500/20":"bg-red-500/20"),children:s?e.jsx(m,{className:"h-6 w-6 text-green-600 dark:text-green-400"}):e.jsx(w,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{htmlFor:"shop-toggle",className:"text-lg font-bold cursor-pointer",children:"Shop Feature Status"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1 max-w-md",children:s?"ðŸŸ¢ Enabled - Shop feature is accessible to users":"ðŸ”´ Disabled - Shop feature is completely hidden"})]})]}),e.jsx(z,{id:"shop-toggle",checked:s,onCheckedChange:x,className:t("scale-125 sm:scale-150",s?"data-[state=checked]:bg-green-600":"data-[state=unchecked]:bg-red-600")})]})}),e.jsxs("div",{className:t("space-y-6 rounded-xl border-2 p-6 transition-all duration-300",s?"border-blue-500/30 bg-white dark:bg-gray-950":"border-gray-200 dark:border-gray-800 bg-gray-50/50 dark:bg-gray-900/20 opacity-50"),children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(O,{className:t("h-5 w-5 mt-0.5",s?"text-blue-500":"text-gray-400")}),e.jsxs("div",{className:"flex-1",children:[e.jsx(p,{htmlFor:"mode-selector",className:t("text-base font-semibold",!s&&"text-gray-400"),children:"Display Mode"}),e.jsx("p",{className:t("text-sm mt-1",s?"text-muted-foreground":"text-gray-400"),children:s?"Choose how the shop appears to users":"Disabled - Shop is hidden"})]})]}),e.jsxs("div",{className:t("p-4 rounded-lg border-2 transition-colors",s?"border-blue-200 dark:border-blue-800 bg-blue-50 dark:bg-blue-950/30":"border-gray-200 dark:border-gray-700 bg-gray-100 dark:bg-gray-800/50"),children:[e.jsx("div",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Current Mode"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{className:t("h-8 w-8",s?n?.color:"text-gray-400")}),e.jsxs("div",{children:[e.jsx("div",{className:t("text-2xl font-bold",s?n?.color:"text-gray-400"),children:n?.label}),e.jsx("div",{className:t("text-sm mt-1",s?"text-muted-foreground":"text-gray-400"),children:n?.description})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(p,{htmlFor:"mode-selector",className:"text-sm font-medium",children:"Select Display Mode"}),e.jsxs(W,{value:l,onValueChange:u,disabled:!s,children:[e.jsx($,{id:"mode-selector",className:"h-12",children:e.jsx(B,{})}),e.jsx(J,{children:c.map(a=>{const i=a.icon;return e.jsx(U,{value:a.value,children:e.jsxs("div",{className:"flex items-center gap-3 py-1",children:[e.jsx(i,{className:t("h-5 w-5",a.color)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:a.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:a.description})]})]})},a.value)})})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 pt-2",children:[e.jsx(S,{onClick:F,disabled:!j||g,className:"flex-1 h-12 text-base font-semibold",size:"lg",children:g?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-2 h-5 w-5 animate-spin"}),"Saving Changes..."]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"mr-2 h-5 w-5"}),"Save Changes"]})}),j&&e.jsx(S,{variant:"outline",onClick:()=>{x(r??!0),u(o||"enabled")},disabled:g,className:"h-12 text-base",size:"lg",children:"Reset"})]})]})})]})}export{se as S};
