import{j as e}from"./ui-vendor-_s0klCrL.js";import{u as E}from"./react-vendor-C7VPsBAG.js";import{u as X,_ as A,b as u,N as m,L as U,S as f,B as n,A as j,C as o,k as h,D as b,ae as w,F as r,h as _,i as D,az as y,af as O,a2 as W,ah as z,a9 as G}from"./index-BLJ_ytcB.js";import{P as H}from"./progress-CS8SLfk3.js";import{Z as v}from"./zap-JsjwqhbD.js";import{T as k}from"./trophy-C_Kv6fHf.js";import{C as p}from"./crown-Cq9T_P0l.js";import{G as P}from"./gift-lTXnbkoc.js";import"./utils-vendor-DYGWDIxX.js";function ee(){const[,i]=E(),{isAuthenticated:d,isLoading:C}=X(),{toast:x}=A(),{data:l,isLoading:R}=u({queryKey:["/api/settings/public/battle-pass-status"],queryFn:async()=>{const[s,t]=await Promise.all([fetch("/api/admin/settings/system/battle_pass_enabled"),fetch("/api/admin/settings/system/battle_pass_mode")]),c=s.ok?(await s.json()).value==="true":!0,q=t.ok?(await t.json()).value:"enabled";return{enabled:c,mode:q}}}),{data:a,isLoading:L}=u({queryKey:["/api/battle-pass/my-progress"],queryFn:async()=>{const s=await fetch("/api/battle-pass/my-progress",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch progress");return s.json()},enabled:d}),{data:g,isLoading:B}=u({queryKey:["/api/battle-pass/rewards"],queryFn:async()=>{const s=await fetch("/api/battle-pass/rewards",{credentials:"include"});if(!s.ok)throw new Error("Failed to fetch rewards");return s.json()},enabled:d}),F=async()=>{if(!d){i("/login?returnTo=/battle-pass");return}try{const s=await fetch("/api/battle-pass/upgrade",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"include"});if(!s.ok){const t=await s.json();throw new Error(t.message||"Failed to upgrade")}x({title:"Battle Pass Upgraded!",description:"You now have access to all premium rewards"})}catch(s){x({title:"Upgrade Failed",description:s.message,variant:"error"})}},S=async s=>{try{const t=await fetch("/api/battle-pass/claim-reward",{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},credentials:"include",body:JSON.stringify({tier:s})});if(!t.ok){const c=await t.json();throw new Error(c.message||"Failed to claim reward")}x({title:"Reward Claimed!",description:"Check your inventory"})}catch(t){x({title:"Claim Failed",description:t.message,variant:"error"})}},N=s=>{switch(s){case"coins":return e.jsx(G,{className:"w-5 h-5 text-amber-500"});case"premium_chapter":return e.jsx(z,{className:"w-5 h-5 text-purple-500"});case"cosmetic":return e.jsx(p,{className:"w-5 h-5 text-pink-500"});default:return e.jsx(P,{className:"w-5 h-5 text-blue-500"})}};if(R)return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background via-background to-primary/5",children:[e.jsx(m,{}),e.jsx("main",{className:"flex-1 flex items-center justify-center",children:e.jsx(U,{className:"w-8 h-8 animate-spin text-primary"})})]});if(!l?.enabled||l?.mode&&l.mode!=="enabled")return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-b from-background via-background to-primary/5",children:[e.jsx(f,{title:"Battle Pass - AmourScans",description:"AmourScans Battle Pass",keywords:"manga battle pass, premium"}),e.jsx(m,{}),e.jsxs("main",{className:"flex-1 container mx-auto px-4 py-8 mt-16",children:[e.jsxs(n,{variant:"ghost",onClick:()=>i("/"),className:"w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx("div",{className:"max-w-2xl mx-auto mt-20",children:e.jsx(o,{className:"border-2 bg-card/80 backdrop-blur-md",children:e.jsx(h,{className:"p-12 text-center space-y-6",children:l?.mode==="maintenance"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-orange-500/10 flex items-center justify-center mb-4",children:e.jsx(v,{className:"w-10 h-10 text-orange-600 dark:text-orange-400"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Battle Pass Under Maintenance"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"We're currently performing maintenance on the Battle Pass to bring you an even better experience. Please check back soon!"})]}):l?.mode==="coming_soon"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-blue-500/10 flex items-center justify-center mb-4",children:e.jsx(k,{className:"w-10 h-10 text-blue-600 dark:text-blue-400"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Battle Pass Coming Soon!"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"The Battle Pass feature is on the way! Get ready for exclusive rewards, challenges, and special perks. Stay tuned!"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mx-auto w-20 h-20 rounded-full bg-gray-500/10 flex items-center justify-center mb-4",children:e.jsx(b,{className:"w-10 h-10 text-gray-600 dark:text-gray-400"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Battle Pass Unavailable"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"The Battle Pass is currently unavailable. Please try again later."})]})})})})]})]});if(!d)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(m,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-20",children:[e.jsxs(n,{variant:"ghost",onClick:()=>i("/"),className:"w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs(o,{className:"bg-gray-900/50 border-gray-800 text-center p-16",children:[e.jsx(k,{className:"w-16 h-16 mx-auto mb-4 text-gray-600"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Login Required"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Sign in to access the Battle Pass"}),e.jsx(n,{onClick:()=>i("/login?returnTo=/battle-pass"),className:"bg-gradient-to-r from-primary to-accent",children:"Login"})]})]})]});if(C||L||B)return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(m,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-20",children:[e.jsx(w,{className:"h-64 bg-gray-800 mb-6"}),e.jsx(w,{className:"h-96 bg-gray-800"})]})]});const T=a?a.xp/a.xpForNextLevel*100:0;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-black to-gray-900",children:[e.jsx(f,{title:"AmourScans Battle Pass - Earn Rewards While Reading",description:"Unlock exclusive rewards and bonuses with the AmourScans Battle Pass. Earn coins, premium chapters, cosmetics, and special perks as you level up through reading.",keywords:"battle pass, manga rewards, level up, earn coins, premium rewards, manga progression"}),e.jsx(m,{}),e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-16",children:[e.jsxs(n,{variant:"ghost",onClick:()=>i("/"),className:"min-h-11 w-fit text-muted-foreground hover:text-primary mb-4",children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"Battle Pass"}),e.jsx("p",{className:"text-gray-400",children:a?.seasonName||"Current Season"})]}),!a?.isPremium&&e.jsxs(n,{onClick:F,className:"bg-gradient-to-r from-amber-500 to-orange-500 hover:from-amber-600 hover:to-orange-600 text-white shadow-lg",size:"lg",children:[e.jsx(p,{className:"w-5 h-5 mr-2"}),"Upgrade to Premium"]})]}),a?.isPremium&&e.jsxs(r,{className:"bg-amber-500/20 text-amber-500 border-amber-500/30 mb-4",children:[e.jsx(p,{className:"w-4 h-4 mr-1"}),"Premium Pass Active"]})]}),e.jsxs(o,{className:"bg-gray-900/50 border-gray-800 mb-8",children:[e.jsx(_,{children:e.jsxs(D,{className:"text-white flex items-center justify-between",children:[e.jsxs("span",{children:["Level ",a?.level||1]}),e.jsxs("span",{className:"text-sm font-normal text-gray-400",children:["Season ends: ",a?.seasonEnd?new Date(a.seasonEnd).toLocaleDateString():"TBD"]})]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-400",children:"XP Progress"}),e.jsxs("span",{className:"text-white font-semibold",children:[a?.xp||0," / ",a?.xpForNextLevel||100]})]}),e.jsx(H,{value:T,className:"h-3 bg-gray-800"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center pt-4 border-t border-gray-800",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:a?.level||1}),e.jsx("p",{className:"text-sm text-gray-400",children:"Current Level"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-primary",children:g?.filter(s=>s.claimed).length||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"Rewards Claimed"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-amber-500",children:g?.length||0}),e.jsx("p",{className:"text-sm text-gray-400",children:"Total Rewards"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Rewards"}),g?.map(s=>{const t=a&&a.level>=s.level,c=t&&!s.claimed;return e.jsx(o,{className:y("bg-gray-900/50 border-gray-800 transition-all duration-300",t&&"border-primary/30"),children:e.jsx(h,{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6 items-center",children:[e.jsx("div",{className:"md:col-span-2 text-center",children:e.jsx("div",{className:y("inline-flex items-center justify-center w-16 h-16 rounded-full border-2",t?"border-primary bg-primary/10":"border-gray-700 bg-gray-800"),children:e.jsx("span",{className:"text-2xl font-bold text-white",children:s.level})})}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("p",{className:"text-xs text-gray-500 uppercase mb-2",children:"Free Reward"}),e.jsxs("div",{className:"flex items-center gap-3",children:[N(s.freeReward.type),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.freeReward.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["x",s.freeReward.amount]})]})]})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsxs("p",{className:"text-xs text-amber-500 uppercase mb-2 flex items-center gap-1",children:[e.jsx(p,{className:"w-3 h-3"}),"Premium Reward"]}),e.jsx("div",{className:y("flex items-center gap-3",!a?.isPremium&&"opacity-40"),children:a?.isPremium?e.jsxs(e.Fragment,{children:[N(s.premiumReward.type),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.premiumReward.name}),e.jsxs("p",{className:"text-sm text-gray-400",children:["x",s.premiumReward.amount]})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-5 h-5 text-gray-600"}),e.jsx("p",{className:"text-gray-500",children:"Premium Required"})]})})]}),e.jsx("div",{className:"md:col-span-2 text-right",children:s.claimed?e.jsxs(r,{className:"bg-green-500/20 text-green-500 border-green-500/30",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"Claimed"]}):c?e.jsxs(n,{onClick:()=>S(s.level),size:"sm",className:"bg-primary hover:bg-primary/90",children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Claim"]}):t?e.jsx(r,{variant:"secondary",children:"Ready"}):e.jsxs(r,{variant:"secondary",className:"bg-gray-800 text-gray-500",children:[e.jsx(b,{className:"w-3 h-3 mr-1"}),"Locked"]})})]})})},s.level)})]}),e.jsx(o,{className:"bg-gradient-to-r from-primary/10 to-accent/10 border-primary/30 mt-8",children:e.jsxs(h,{className:"p-6 text-center",children:[e.jsx(v,{className:"w-12 h-12 mx-auto mb-4 text-primary"}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Earn XP to Level Up!"}),e.jsx("p",{className:"text-gray-400 mb-4",children:"Read chapters, complete achievements, and engage with the community to earn XP"}),e.jsxs("div",{className:"flex gap-4 justify-center flex-wrap",children:[e.jsx(r,{variant:"outline",className:"border-primary/30 text-primary",children:"+50 XP per chapter read"}),e.jsx(r,{variant:"outline",className:"border-primary/30 text-primary",children:"+100 XP per achievement"}),e.jsx(r,{variant:"outline",className:"border-primary/30 text-primary",children:"+25 XP per comment"})]})]})})]}),e.jsx(W,{})]})}export{ee as default};
